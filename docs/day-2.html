<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Day 2 | Psychological Measurement in R</title>
  <meta name="description" content="As a modern Psychologist, we can no longer be purely theoretical hypothesis generators, experimentalists, statisticians, or clinicians; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing research projects into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Day 2 | Psychological Measurement in R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://spencercastro.com" />
  <meta property="og:image" content="https://spencercastro.comimages/UPsychLogo.jpg" />
  <meta property="og:description" content="As a modern Psychologist, we can no longer be purely theoretical hypothesis generators, experimentalists, statisticians, or clinicians; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing research projects into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="github-repo" content="sccastro/PsychMeasurement" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Day 2 | Psychological Measurement in R" />
  
  <meta name="twitter:description" content="As a modern Psychologist, we can no longer be purely theoretical hypothesis generators, experimentalists, statisticians, or clinicians; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing research projects into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="twitter:image" content="https://spencercastro.comimages/UPsychLogo.jpg" />

<meta name="author" content="Spencer Castro" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-transformation-day-2.html"/>
<link rel="next" href="visualization-with-ggplot2.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="class_book.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Psychological Measurement in R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#course-overview"><i class="fa fa-check"></i><b>0.1</b> Course Overview</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#learning-outcomes-course-objectives"><i class="fa fa-check"></i><b>0.2</b> Learning Outcomes &amp; Course Objectives</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#course-format"><i class="fa fa-check"></i><b>0.3</b> Course Format</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#evaluation-methodsassignments"><i class="fa fa-check"></i><b>0.4</b> Evaluation Methods/Assignments</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#grading-policy"><i class="fa fa-check"></i><b>0.5</b> Grading Policy</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#student-rights-and-responsibilities"><i class="fa fa-check"></i><b>0.6</b> Student Rights and Responsibilities</a></li>
<li class="chapter" data-level="0.7" data-path="index.html"><a href="index.html#department-of-psychology-undergraduate-academic-misconduct-policy"><i class="fa fa-check"></i><b>0.7</b> Department of Psychology Undergraduate Academic Misconduct Policy</a></li>
<li class="chapter" data-level="0.8" data-path="index.html"><a href="index.html#course-policies"><i class="fa fa-check"></i><b>0.8</b> Course Policies</a></li>
<li class="chapter" data-level="0.9" data-path="index.html"><a href="index.html#university-attendance-requirements"><i class="fa fa-check"></i><b>0.9</b> University Attendance Requirements</a></li>
<li class="chapter" data-level="0.10" data-path="index.html"><a href="index.html#student-support-accommodations"><i class="fa fa-check"></i><b>0.10</b> Student Support &amp; Accommodations</a></li>
<li class="chapter" data-level="0.11" data-path="index.html"><a href="index.html#academic-calendar"><i class="fa fa-check"></i><b>0.11</b> Academic Calendar</a></li>
<li class="chapter" data-level="0.12" data-path="index.html"><a href="index.html#course-schedule"><i class="fa fa-check"></i><b>0.12</b> Course Schedule</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#baser-walkthrough"><i class="fa fa-check"></i>BaseR walkthrough</a></li>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#help"><i class="fa fa-check"></i><b>1.1</b> Help</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#vectors"><i class="fa fa-check"></i><b>1.2</b> VECTORS</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#programming"><i class="fa fa-check"></i><b>1.3</b> PROGRAMMING</a><ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#for-loop"><i class="fa fa-check"></i><b>1.3.1</b> For loop</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#while-loop"><i class="fa fa-check"></i><b>1.3.2</b> While loop</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#assignment-1"><i class="fa fa-check"></i><b>1.4</b> Assignment 1</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>2</b> Importing Data</a><ul>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#reading-files-into-r"><i class="fa fa-check"></i>Reading files into R</a></li>
<li class="chapter" data-level="2.1" data-path="importing-data.html"><a href="importing-data.html#whats-a-tibble"><i class="fa fa-check"></i><b>2.1</b> What’s a tibble?</a></li>
<li class="chapter" data-level="2.2" data-path="importing-data.html"><a href="importing-data.html#save-your-dataset"><i class="fa fa-check"></i><b>2.2</b> Save your dataset:</a></li>
<li class="chapter" data-level="2.3" data-path="importing-data.html"><a href="importing-data.html#cleaning-your-data-file"><i class="fa fa-check"></i><b>2.3</b> Cleaning your data file</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data Transformation</a><ul>
<li class="chapter" data-level="" data-path="data-transformation.html"><a href="data-transformation.html#data-transformation-with-dplyr"><i class="fa fa-check"></i>Data Transformation with Dplyr</a></li>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#get-a-dataset-from-your-.rdata-file"><i class="fa fa-check"></i><b>3.1</b> Get a dataset from your .RData file</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#introduction-to-the-pipe"><i class="fa fa-check"></i><b>3.2</b> Introduction to “The Pipe”</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#aside-on-the-apply-family"><i class="fa fa-check"></i><b>3.3</b> Aside on the apply family</a></li>
<li class="chapter" data-level="3.4" data-path="data-transformation.html"><a href="data-transformation.html#solutions-to-challenges"><i class="fa fa-check"></i><b>3.4</b> Solutions to Challenges</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html"><i class="fa fa-check"></i><b>4</b> Data Transformation Day 2</a></li>
<li class="chapter" data-level="" data-path="day-2.html"><a href="day-2.html"><i class="fa fa-check"></i>Day 2</a><ul>
<li class="chapter" data-level="4.1" data-path="day-2.html"><a href="day-2.html#note"><i class="fa fa-check"></i><b>4.1</b> <em>Note</em>:</a></li>
<li class="chapter" data-level="4.2" data-path="day-2.html"><a href="day-2.html#rcolorbrewer"><i class="fa fa-check"></i><b>4.2</b> RcolorBrewer</a></li>
<li class="chapter" data-level="4.3" data-path="day-2.html"><a href="day-2.html#modifying-factor-levels"><i class="fa fa-check"></i><b>4.3</b> Modifying Factor Levels</a></li>
<li class="chapter" data-level="4.4" data-path="day-2.html"><a href="day-2.html#play-time"><i class="fa fa-check"></i><b>4.4</b> Play time</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>5</b> Visualization with ggplot2</a><ul>
<li class="chapter" data-level="5.1" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#statistical-transformations"><i class="fa fa-check"></i><b>5.1</b> Statistical Transformations</a></li>
<li class="chapter" data-level="5.2" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#changing-the-position"><i class="fa fa-check"></i><b>5.2</b> Changing the position</a></li>
<li class="chapter" data-level="5.3" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#coordinates"><i class="fa fa-check"></i><b>5.3</b> Coordinates</a><ul>
<li class="chapter" data-level="5.3.1" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#plot-maps-if-you-want"><i class="fa fa-check"></i><b>5.3.1</b> Plot maps if you want</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html"><i class="fa fa-check"></i><b>6</b> Introduction to Statistics</a><ul>
<li class="chapter" data-level="6.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#steps-of-visualization"><i class="fa fa-check"></i><b>6.1</b> Steps of Visualization</a><ul>
<li class="chapter" data-level="6.1.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#descriptive-stats"><i class="fa fa-check"></i><b>6.1.1</b> Descriptive Stats</a></li>
<li class="chapter" data-level="6.1.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>6.1.2</b> Measures of Central Tendency</a></li>
<li class="chapter" data-level="6.1.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-variability"><i class="fa fa-check"></i><b>6.1.3</b> Measures of Variability</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#clinical-trial-example"><i class="fa fa-check"></i><b>6.2</b> Clinical Trial Example</a></li>
<li class="chapter" data-level="6.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#categorical-data-navarro-pg.-351"><i class="fa fa-check"></i><b>6.3</b> Categorical Data – Navarro pg. 351</a><ul>
<li class="chapter" data-level="6.3.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chi-square-goodness-of-fit-test-pearson-1900-review"><i class="fa fa-check"></i><b>6.3.1</b> Chi Square goodness-of-fit test (Pearson, 1900) Review</a></li>
<li class="chapter" data-level="6.3.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chi-square-test-of-independence"><i class="fa fa-check"></i><b>6.3.2</b> Chi-square test of independence</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#assumptions"><i class="fa fa-check"></i><b>6.4</b> Assumptions</a><ul>
<li class="chapter" data-level="6.4.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#shapiro-normality-test"><i class="fa fa-check"></i><b>6.4.1</b> Shapiro normality test</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#one-way-anova"><i class="fa fa-check"></i><b>6.5</b> One-Way ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="linear-models.html"><a href="linear-models.html"><i class="fa fa-check"></i><b>7</b> Linear Models</a><ul>
<li class="chapter" data-level="" data-path="linear-models.html"><a href="linear-models.html#steps-of-linear-models"><i class="fa fa-check"></i>Steps of Linear Models</a></li>
<li class="chapter" data-level="7.1" data-path="linear-models.html"><a href="linear-models.html#step-1.-get-your-data"><i class="fa fa-check"></i><b>7.1</b> Step 1. Get your data</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="multilevel-models.html"><a href="multilevel-models.html"><i class="fa fa-check"></i><b>8</b> Multilevel Models</a><ul>
<li class="chapter" data-level="" data-path="multilevel-models.html"><a href="multilevel-models.html#steps-of-multilevel-models"><i class="fa fa-check"></i>Steps of Multilevel Models</a><ul>
<li class="chapter" data-level="8.0.1" data-path="multilevel-models.html"><a href="multilevel-models.html#mixed-models-in-r"><i class="fa fa-check"></i><b>8.0.1</b> Mixed models in R</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Psychological Measurement in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="day-2" class="section level1 unnumbered">
<h1>Day 2</h1>
<div id="note" class="section level2">
<h2><span class="header-section-number">4.1</span> <em>Note</em>:</h2>
<p>Much of this lesson can be found in the “factors” chapter of R for Data Science by Hadley Wickham: <a href="http://r4ds.had.co.nz/factors.html" class="uri">http://r4ds.had.co.nz/factors.html</a></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">?gss_cat <span class="co">#See more about the variables in our dataset</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">View</span>(gss_cat)</a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">gss_cat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw">count</span>(race) <span class="co">#We can see counts of each race or religion</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;   race      n</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;   &lt;fct&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; 1 Other  1959</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; 2 Black  3129</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 3 White 16395</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">gss_cat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="st">  </span><span class="kw">count</span>(relig) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n)) <span class="co">#We can arrange them in descending order on the count column (n)</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt; # A tibble: 15 x 2</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;   relig          n</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;   &lt;fct&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; 1 Protestant 10846</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; 2 Catholic    5124</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; 3 None        3523</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; 4 Christian    689</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt; 5 Jewish       388</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt; 6 Other        224</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; # … with 9 more rows</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"></a>
<a class="sourceLine" id="cb3-24" data-line-number="24">gss_cat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="st">  </span><span class="kw">count</span>(age) <span class="co">#Or we can count by age...</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt; # A tibble: 73 x 2</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt;     age     n</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; 1    18    91</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; 2    19   249</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt; 3    20   251</span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; 4    21   278</span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; 5    22   298</span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="co">#&gt; 6    23   361</span></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"><span class="co">#&gt; # … with 67 more rows</span></a>
<a class="sourceLine" id="cb3-36" data-line-number="36"></a>
<a class="sourceLine" id="cb3-37" data-line-number="37"></a>
<a class="sourceLine" id="cb3-38" data-line-number="38">gss_cat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-39" data-line-number="39"><span class="st">  </span><span class="kw">count</span>(race) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-40" data-line-number="40"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">freq =</span> (n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n))<span class="op">*</span><span class="dv">100</span>) <span class="co">#We can see relative proportions in the sample</span></a>
<a class="sourceLine" id="cb3-41" data-line-number="41"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb3-42" data-line-number="42"><span class="co">#&gt;   race      n  freq</span></a>
<a class="sourceLine" id="cb3-43" data-line-number="43"><span class="co">#&gt;   &lt;fct&gt; &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb3-44" data-line-number="44"><span class="co">#&gt; 1 Other  1959  9.12</span></a>
<a class="sourceLine" id="cb3-45" data-line-number="45"><span class="co">#&gt; 2 Black  3129 14.6 </span></a>
<a class="sourceLine" id="cb3-46" data-line-number="46"><span class="co">#&gt; 3 White 16395 76.3</span></a>
<a class="sourceLine" id="cb3-47" data-line-number="47"></a>
<a class="sourceLine" id="cb3-48" data-line-number="48"><span class="kw">levels</span>(gss_cat<span class="op">$</span>rincome)</a>
<a class="sourceLine" id="cb3-49" data-line-number="49"><span class="co">#&gt;  [1] &quot;No answer&quot;      &quot;Don&#39;t know&quot;     &quot;Refused&quot;        &quot;$25000 or more&quot;</span></a>
<a class="sourceLine" id="cb3-50" data-line-number="50"><span class="co">#&gt;  [5] &quot;$20000 - 24999&quot; &quot;$15000 - 19999&quot; &quot;$10000 - 14999&quot; &quot;$8000 to 9999&quot; </span></a>
<a class="sourceLine" id="cb3-51" data-line-number="51"><span class="co">#&gt;  [9] &quot;$7000 to 7999&quot;  &quot;$6000 to 6999&quot;  &quot;$5000 to 5999&quot;  &quot;$4000 to 4999&quot; </span></a>
<a class="sourceLine" id="cb3-52" data-line-number="52"><span class="co">#&gt; [13] &quot;$3000 to 3999&quot;  &quot;$1000 to 2999&quot;  &quot;Lt $1000&quot;       &quot;Not applicable&quot;</span></a>
<a class="sourceLine" id="cb3-53" data-line-number="53"><span class="co">#Releveling factors with forcats</span></a>
<a class="sourceLine" id="cb3-54" data-line-number="54">df &lt;-<span class="st"> </span>forcats<span class="op">::</span>gss_cat</a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co">#Remember, none of these outcomes are being saved into any objects with &lt;- </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#This is just for visualizing and exploring the data.</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#We can visualize this information with ggplot2</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw">require</span>(ggplot2) <span class="co">#We will get more into ggplot next week, </span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#but for now here is an introduction.</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="kw">ggplot</span>(<span class="dt">data =</span> gss_cat, <span class="dt">mapping =</span> <span class="kw">aes</span>(race)) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_bar</span>()</a>
<a class="sourceLine" id="cb4-10" data-line-number="10"></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co"># By default, ggplot2 will drop levels that don’t have any values. </span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co"># You can force them to display with:</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="kw">ggplot</span>(gss_cat, <span class="kw">aes</span>(race)) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">drop =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/ggplotintro-1.png" width="70%" style="display: block; margin: auto;" /><img src="04_TransformationDay2_files/figure-html/ggplotintro-2.png" width="70%" style="display: block; margin: auto;" /></p>
<p>When working with factors, the two most common operations are:
1. Changing the order of the levels
2. Changing the values of the levels.</p>
<p>Why would you want to do this?</p>
<p>It’s often useful to change the order of the factor levels in a visualisation.</p>
<p>Let’s get the average number of hours spent watching TV per day across religions:</p>
<p>Note: if you put () on the outside of your assignment, it will also print</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">(relig_summary &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Get your data.frame and pipe into the columns</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(relig) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#group by religion so that each summary will be for one religion</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>( <span class="co">#Get a summary for the following transformations</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">    <span class="dt">age =</span> <span class="kw">mean</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co">#Get the mean of age and name it &quot;age&quot;</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    <span class="dt">tvhours =</span> <span class="kw">mean</span>(tvhours, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co">#Get the mean of tv hours and name it &quot;tvhours&quot;</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">    <span class="dt">n =</span> <span class="kw">n</span>() <span class="co">#Count the number of observations in each group</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">  ))</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; # A tibble: 15 x 4</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt;   relig                     age tvhours     n</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;   &lt;fct&gt;                   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; 1 No answer                49.5    2.72    93</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; 2 Don&#39;t know               35.9    4.62    15</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 3 Inter-nondenominational  40.0    2.87   109</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; 4 Native american          38.9    3.46    23</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; 5 Christian                40.1    2.79   689</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; 6 Orthodox-christian       50.4    2.42    95</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt; # … with 9 more rows</span></a></code></pre></div>
<p>Because there were NA’s and we wanted to do math we needed to remove them with:
na.rm = TRUE</p>
<p>##Change the order of the levels</p>
<p>Plot with ggplot, arguments are ggplot(data, mapping) + geom_type()
mapping is usually paired with the aes() function, which refers to aesthetics
arguments to aes are usually aes(x, y, group)</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> relig_summary, </a>
<a class="sourceLine" id="cb6-2" data-line-number="2">       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">y =</span> relig, <span class="dt">x =</span>tvhours)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/plotrelig-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Interesting, but we could pack more info into this visualization</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">ggplot</span>(relig_summary, <span class="kw">aes</span>(tvhours, <span class="kw">fct_reorder</span>(relig, tvhours))) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/plotmore-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Now we have reordered religion by tv hours watched.</p>
<p>The key argument is fct_reorder(“factor to order”, “column to be ordered by”)</p>
<p>We can do it in descending order as well:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">ggplot</span>(relig_summary, <span class="kw">aes</span>(tvhours, <span class="kw">fct_reorder</span>(relig, <span class="kw">desc</span>(tvhours)))) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() </a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/plotdescend-1.png" width="70%" style="display: block; margin: auto;" />
We just put desc() around tvhours</p>
<p>As you start making more complicated transformations,
I’d recommend moving them out of aes() and into a separate mutate() step.
For example, you could rewrite the plot above as:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">relig_summary <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">relig =</span> <span class="kw">fct_reorder</span>(relig, tvhours)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(tvhours, relig)) <span class="op">+</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="kw">levels</span>(relig_summary<span class="op">$</span>relig)</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt;  [1] &quot;No answer&quot;               &quot;Don&#39;t know&quot;             </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt;  [3] &quot;Inter-nondenominational&quot; &quot;Native american&quot;        </span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt;  [5] &quot;Christian&quot;               &quot;Orthodox-christian&quot;     </span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt;  [7] &quot;Moslem/islam&quot;            &quot;Other eastern&quot;          </span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt;  [9] &quot;Hinduism&quot;                &quot;Buddhism&quot;               </span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt; [11] &quot;Other&quot;                   &quot;None&quot;                   </span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt; [13] &quot;Jewish&quot;                  &quot;Catholic&quot;               </span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt; [15] &quot;Protestant&quot;              &quot;Not applicable&quot;</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"></a>
<a class="sourceLine" id="cb9-16" data-line-number="16">(testlevel &lt;-<span class="st"> </span>relig_summary <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">relig =</span> <span class="kw">fct_reorder</span>(relig, tvhours)))</a>
<a class="sourceLine" id="cb9-18" data-line-number="18"><span class="co">#&gt; # A tibble: 15 x 4</span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="co">#&gt;   relig                     age tvhours     n</span></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"><span class="co">#&gt;   &lt;fct&gt;                   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="co">#&gt; 1 No answer                49.5    2.72    93</span></a>
<a class="sourceLine" id="cb9-22" data-line-number="22"><span class="co">#&gt; 2 Don&#39;t know               35.9    4.62    15</span></a>
<a class="sourceLine" id="cb9-23" data-line-number="23"><span class="co">#&gt; 3 Inter-nondenominational  40.0    2.87   109</span></a>
<a class="sourceLine" id="cb9-24" data-line-number="24"><span class="co">#&gt; 4 Native american          38.9    3.46    23</span></a>
<a class="sourceLine" id="cb9-25" data-line-number="25"><span class="co">#&gt; 5 Christian                40.1    2.79   689</span></a>
<a class="sourceLine" id="cb9-26" data-line-number="26"><span class="co">#&gt; 6 Orthodox-christian       50.4    2.42    95</span></a>
<a class="sourceLine" id="cb9-27" data-line-number="27"><span class="co">#&gt; # … with 9 more rows</span></a>
<a class="sourceLine" id="cb9-28" data-line-number="28"></a>
<a class="sourceLine" id="cb9-29" data-line-number="29"><span class="kw">levels</span>(testlevel<span class="op">$</span>relig) <span class="co">#The levels have changed even if the visualization did not.</span></a>
<a class="sourceLine" id="cb9-30" data-line-number="30"><span class="co">#&gt;  [1] &quot;Other eastern&quot;           &quot;Hinduism&quot;               </span></a>
<a class="sourceLine" id="cb9-31" data-line-number="31"><span class="co">#&gt;  [3] &quot;Buddhism&quot;                &quot;Orthodox-christian&quot;     </span></a>
<a class="sourceLine" id="cb9-32" data-line-number="32"><span class="co">#&gt;  [5] &quot;Moslem/islam&quot;            &quot;Jewish&quot;                 </span></a>
<a class="sourceLine" id="cb9-33" data-line-number="33"><span class="co">#&gt;  [7] &quot;None&quot;                    &quot;No answer&quot;              </span></a>
<a class="sourceLine" id="cb9-34" data-line-number="34"><span class="co">#&gt;  [9] &quot;Other&quot;                   &quot;Christian&quot;              </span></a>
<a class="sourceLine" id="cb9-35" data-line-number="35"><span class="co">#&gt; [11] &quot;Inter-nondenominational&quot; &quot;Catholic&quot;               </span></a>
<a class="sourceLine" id="cb9-36" data-line-number="36"><span class="co">#&gt; [13] &quot;Protestant&quot;              &quot;Native american&quot;        </span></a>
<a class="sourceLine" id="cb9-37" data-line-number="37"><span class="co">#&gt; [15] &quot;Don&#39;t know&quot;              &quot;Not applicable&quot;</span></a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/fct_reorder-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This is most important for plotting</p>
<p>Let’s look at how average age varies across reported income level:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">(rincome_summary &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Save your df summary as something descriptive</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(rincome) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Group by income so that all summaries will be for those levels</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>( <span class="co">#Create summaries for the following:</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4">    <span class="dt">age =</span> <span class="kw">mean</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co">#Mean age with Na&#39;s removed named &quot;age&quot;</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5">    <span class="dt">tvhours =</span> <span class="kw">mean</span>(tvhours, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="co">#Mean tvhours named &quot;tvhours&quot;</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6">    <span class="dt">n =</span> <span class="kw">n</span>() <span class="co">#Count number of observations in each column</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7">  ))</a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt; # A tibble: 16 x 4</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt;   rincome          age tvhours     n</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;   &lt;fct&gt;          &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt; 1 No answer       45.5    2.90   183</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt; 2 Don&#39;t know      45.6    3.41   267</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt; 3 Refused         47.6    2.48   975</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt; 4 $25000 or more  44.2    2.23  7363</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt; 5 $20000 - 24999  41.5    2.78  1283</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">#&gt; 6 $15000 - 19999  40.0    2.91  1048</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">#&gt; # … with 10 more rows</span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="kw">ggplot</span>(rincome_summary, <span class="kw">aes</span>(age, <span class="kw">fct_reorder</span>(rincome, age))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/plotcount-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Reported income is an ordinal variable so it should be reported that way
However fct_reorder will often create an arbitrary order by the second argument
(age in this case).</p>
<p>Use fct_relevel to have an ordered outcome:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">ggplot</span>(rincome_summary, <span class="kw">aes</span>(age, <span class="kw">fct_relevel</span>(rincome))) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/fct_relevel%20ordered-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Now “Not applicable” is up at the top away from the other “special responses”
Let’s fix that:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">ggplot</span>(rincome_summary, <span class="kw">aes</span>(age, <span class="kw">fct_relevel</span>(rincome, <span class="st">&quot;Not applicable&quot;</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/plotNAs-1.png" width="70%" style="display: block; margin: auto;" />
We put it at the end! Now age and income are ordered! However, larger numbers
map to the top (Larger is higher in conceptual metaphor theory)</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">ggplot</span>(rincome_summary, <span class="kw">aes</span>(age,<span class="dt">x =</span> <span class="kw">fct_relevel</span>(<span class="kw">desc</span>(rincome), <span class="st">&quot;Not applicable&quot;</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() </a></code></pre></div>
<p>This doesn’t work in the aes() function, so we have to do it earlier!</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">ordered_rincome &lt;-rincome_summary <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rincome =</span> <span class="kw">fct_relevel</span>(rincome, <span class="st">&quot;Not applicable&quot;</span>, <span class="dt">after =</span> <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="kw">levels</span>(ordered_rincome<span class="op">$</span>rincome) <span class="co">#not applicable has moved...</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt;  [1] &quot;Not applicable&quot; &quot;No answer&quot;      &quot;Don&#39;t know&quot;     &quot;Refused&quot;       </span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt;  [5] &quot;$25000 or more&quot; &quot;$20000 - 24999&quot; &quot;$15000 - 19999&quot; &quot;$10000 - 14999&quot;</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt;  [9] &quot;$8000 to 9999&quot;  &quot;$7000 to 7999&quot;  &quot;$6000 to 6999&quot;  &quot;$5000 to 5999&quot; </span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; [13] &quot;$4000 to 4999&quot;  &quot;$3000 to 3999&quot;  &quot;$1000 to 2999&quot;  &quot;Lt $1000&quot;</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="kw">ggplot</span>(ordered_rincome, <span class="kw">aes</span>(age, <span class="kw">fct_relevel</span>(rincome, <span class="st">&quot;Not applicable&quot;</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="st">  </span><span class="kw">geom_point</span>() <span class="co">#But still plotting int he wrong order</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"></a>
<a class="sourceLine" id="cb14-13" data-line-number="13">ordered_rincome &lt;-<span class="st"> </span>rincome_summary <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rincome =</span> <span class="kw">fct_relevel</span>(rincome, <span class="st">&quot;Not applicable&quot;</span>, <span class="dt">after =</span> <span class="dv">0</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rincome =</span> <span class="kw">fct_rev</span>(rincome)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Now we can use fct_rev()</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="st">  </span><span class="kw">filter</span>(rincome <span class="op">!=</span><span class="st"> &quot;Not applicable&quot;</span>,</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">         rincome <span class="op">!=</span><span class="st"> &quot;No answer&quot;</span>)</a>
<a class="sourceLine" id="cb14-18" data-line-number="18"></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="kw">ggplot</span>(ordered_rincome, <span class="kw">aes</span>(age,rincome)) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/plotfull-1.png" width="70%" style="display: block; margin: auto;" /><img src="04_TransformationDay2_files/figure-html/plotfull-2.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Let’s do some more reordering:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">by_age &lt;-<span class="st"> </span><span class="kw">data.frame</span>(df) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Get data.frame</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">  </span><span class="kw">na.omit</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Get rid of Na&#39;s in age to do maths</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">  </span><span class="kw">count</span>(age, marital) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># count observations by age and marital status</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="st">  </span><span class="kw">group_by</span>(age) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Group by age for the following summary</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n)) <span class="co">#Get proportion of counts per age</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="kw">ggplot</span>(by_age, <span class="kw">aes</span>(age, prop, <span class="dt">colour =</span> marital)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb15-9" data-line-number="9"></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="kw">ggplot</span>(by_age, <span class="kw">aes</span>(age, prop, <span class="dt">colour =</span> <span class="kw">fct_reorder2</span>(marital, age, prop))) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">colour =</span> <span class="st">&quot;marital&quot;</span>)</a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/plotage-1.png" width="70%" style="display: block; margin: auto;" /><img src="04_TransformationDay2_files/figure-html/plotage-2.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="rcolorbrewer" class="section level2">
<h2><span class="header-section-number">4.2</span> RcolorBrewer</h2>
<p>Let’s get researched colors for proper visualization best practices from:
Brewer, Cynthia A., 200x. <a href="http://www.ColorBrewer.org" class="uri">http://www.ColorBrewer.org</a>, accessed 09/27/2018.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">library</span>(RColorBrewer)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">brewer.pal.info</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt;          maxcolors category colorblind</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt; BrBG            11      div       TRUE</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; PiYG            11      div       TRUE</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; PRGn            11      div       TRUE</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt; PuOr            11      div       TRUE</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt; RdBu            11      div       TRUE</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#&gt; RdGy            11      div      FALSE</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">#&gt; RdYlBu          11      div       TRUE</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="co">#&gt; RdYlGn          11      div      FALSE</span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="co">#&gt; Spectral        11      div      FALSE</span></a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="co">#&gt; Accent           8     qual      FALSE</span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16"><span class="co">#&gt; Dark2            8     qual       TRUE</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="co">#&gt; Paired          12     qual       TRUE</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18"><span class="co">#&gt; Pastel1          9     qual      FALSE</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19"><span class="co">#&gt; Pastel2          8     qual      FALSE</span></a>
<a class="sourceLine" id="cb16-20" data-line-number="20"><span class="co">#&gt; Set1             9     qual      FALSE</span></a>
<a class="sourceLine" id="cb16-21" data-line-number="21"><span class="co">#&gt; Set2             8     qual       TRUE</span></a>
<a class="sourceLine" id="cb16-22" data-line-number="22"><span class="co">#&gt; Set3            12     qual      FALSE</span></a>
<a class="sourceLine" id="cb16-23" data-line-number="23"><span class="co">#&gt; Blues            9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-24" data-line-number="24"><span class="co">#&gt; BuGn             9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-25" data-line-number="25"><span class="co">#&gt; BuPu             9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-26" data-line-number="26"><span class="co">#&gt; GnBu             9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-27" data-line-number="27"><span class="co">#&gt; Greens           9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-28" data-line-number="28"><span class="co">#&gt; Greys            9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-29" data-line-number="29"><span class="co">#&gt; Oranges          9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-30" data-line-number="30"><span class="co">#&gt; OrRd             9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-31" data-line-number="31"><span class="co">#&gt; PuBu             9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-32" data-line-number="32"><span class="co">#&gt; PuBuGn           9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-33" data-line-number="33"><span class="co">#&gt; PuRd             9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-34" data-line-number="34"><span class="co">#&gt; Purples          9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-35" data-line-number="35"><span class="co">#&gt; RdPu             9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-36" data-line-number="36"><span class="co">#&gt; Reds             9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-37" data-line-number="37"><span class="co">#&gt; YlGn             9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-38" data-line-number="38"><span class="co">#&gt; YlGnBu           9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-39" data-line-number="39"><span class="co">#&gt; YlOrBr           9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-40" data-line-number="40"><span class="co">#&gt; YlOrRd           9      seq       TRUE</span></a>
<a class="sourceLine" id="cb16-41" data-line-number="41"></a>
<a class="sourceLine" id="cb16-42" data-line-number="42">pal1 &lt;-<span class="st"> </span><span class="kw">brewer.pal</span>(<span class="dt">n =</span> <span class="dv">6</span>, <span class="st">&quot;Dark2&quot;</span>) <span class="co">#Try different palettes</span></a>
<a class="sourceLine" id="cb16-43" data-line-number="43"></a>
<a class="sourceLine" id="cb16-44" data-line-number="44"></a>
<a class="sourceLine" id="cb16-45" data-line-number="45"><span class="kw">display.brewer.all</span>()</a>
<a class="sourceLine" id="cb16-46" data-line-number="46"></a>
<a class="sourceLine" id="cb16-47" data-line-number="47"><span class="kw">ggplot</span>(by_age, <span class="kw">aes</span>(age, prop, <span class="dt">colour =</span> <span class="kw">fct_reorder2</span>(marital, age, prop))) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-48" data-line-number="48"><span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-49" data-line-number="49"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_classic</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb16-50" data-line-number="50"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">colour =</span> <span class="st">&quot;marital&quot;</span>)</a>
<a class="sourceLine" id="cb16-51" data-line-number="51"></a>
<a class="sourceLine" id="cb16-52" data-line-number="52">  </a>
<a class="sourceLine" id="cb16-53" data-line-number="53"><span class="kw">ggplot</span>(by_age, <span class="kw">aes</span>(age, prop, <span class="dt">colour =</span> <span class="kw">fct_reorder2</span>(marital, age, prop))) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-54" data-line-number="54"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb16-55" data-line-number="55"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">colour =</span> <span class="st">&quot;marital&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_dark</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb16-56" data-line-number="56"><span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">&quot;Accent&quot;</span>)</a>
<a class="sourceLine" id="cb16-57" data-line-number="57"></a>
<a class="sourceLine" id="cb16-58" data-line-number="58"><span class="kw">ggplot</span>(by_age, <span class="kw">aes</span>(age, prop, <span class="dt">colour =</span> <span class="kw">fct_reorder2</span>(marital, age, prop))) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-59" data-line-number="59"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb16-60" data-line-number="60"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">colour =</span> <span class="st">&quot;marital&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_void</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb16-61" data-line-number="61"><span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">type =</span> <span class="st">&quot;qual&quot;</span>)</a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/colorBrewer-1.png" width="70%" style="display: block; margin: auto;" /><img src="04_TransformationDay2_files/figure-html/colorBrewer-2.png" width="70%" style="display: block; margin: auto;" /><img src="04_TransformationDay2_files/figure-html/colorBrewer-3.png" width="70%" style="display: block; margin: auto;" /><img src="04_TransformationDay2_files/figure-html/colorBrewer-4.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Finally, for bar plots, you can use <code>fct_infreq()</code> to order levels in increasing frequency: this is the simplest type of reordering because it doesn’t need any extra variables. You may want to combine with <code>fct_rev()</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">marital =</span> marital <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">fct_infreq</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">fct_rev</span>()) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(marital)) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_bar</span>()</a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/marital-1.png" width="70%" style="display: block; margin: auto;" />
Notice that you can pipe these arguments WITHIN the mutate() function!</p>
<p><strong>Challenge 1</strong></p>
<p>For each factor in df identify whether the order of the levels is arbitrary or principled.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">rev</span>(<span class="kw">levels</span>(df<span class="op">$</span>marital))</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="co">#&gt; [1] &quot;Married&quot;       &quot;Widowed&quot;       &quot;Divorced&quot;      &quot;Separated&quot;    </span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="co">#&gt; [5] &quot;Never married&quot; &quot;No answer&quot;</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(year,<span class="dt">fill =</span> relig)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">8</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette =</span> <span class="st">&quot;Set3&quot;</span>)</a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">#&gt; Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Set3 is 12</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="co">#&gt; Returning the palette you asked for with that many colors</span></a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/challenge1-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>How would you determine this?</p>
</div>
<div id="modifying-factor-levels" class="section level2">
<h2><span class="header-section-number">4.3</span> Modifying Factor Levels</h2>
<p>Here’s a count of the levels in party_id</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(partyid)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="co">#&gt;   partyid                n</span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="co">#&gt;   &lt;fct&gt;              &lt;int&gt;</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co">#&gt; 1 No answer            154</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co">#&gt; 2 Don&#39;t know             1</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="co">#&gt; 3 Other party          393</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="co">#&gt; 4 Strong republican   2314</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="co">#&gt; 5 Not str republican  3032</span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="co">#&gt; 6 Ind,near rep        1791</span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="co">#&gt; # … with 4 more rows</span></a></code></pre></div>
<p><code>fct_recode</code> let’s us rename variables (new varname left = old varname right)</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">partyid =</span> <span class="kw">fct_recode</span>(partyid,</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">                              <span class="st">&quot;Republican, strong&quot;</span>    =<span class="st"> &quot;Strong republican&quot;</span>,</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">                              <span class="st">&quot;Republican, weak&quot;</span>      =<span class="st"> &quot;Not str republican&quot;</span>,</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">                              <span class="st">&quot;Independent, near rep&quot;</span> =<span class="st"> &quot;Ind,near rep&quot;</span>,</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">                              <span class="st">&quot;Independent, near dem&quot;</span> =<span class="st"> &quot;Ind,near dem&quot;</span>,</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">                              <span class="st">&quot;Democrat, weak&quot;</span>        =<span class="st"> &quot;Not str democrat&quot;</span>,</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">                              <span class="st">&quot;Democrat, strong&quot;</span>      =<span class="st"> &quot;Strong democrat&quot;</span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9">  )) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="st">  </span><span class="kw">count</span>(partyid) <span class="co">#Count party ID</span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="co">#&gt;   partyid                   n</span></a>
<a class="sourceLine" id="cb20-13" data-line-number="13"><span class="co">#&gt;   &lt;fct&gt;                 &lt;int&gt;</span></a>
<a class="sourceLine" id="cb20-14" data-line-number="14"><span class="co">#&gt; 1 No answer               154</span></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="co">#&gt; 2 Don&#39;t know                1</span></a>
<a class="sourceLine" id="cb20-16" data-line-number="16"><span class="co">#&gt; 3 Other party             393</span></a>
<a class="sourceLine" id="cb20-17" data-line-number="17"><span class="co">#&gt; 4 Republican, strong     2314</span></a>
<a class="sourceLine" id="cb20-18" data-line-number="18"><span class="co">#&gt; 5 Republican, weak       3032</span></a>
<a class="sourceLine" id="cb20-19" data-line-number="19"><span class="co">#&gt; 6 Independent, near rep  1791</span></a>
<a class="sourceLine" id="cb20-20" data-line-number="20"><span class="co">#&gt; # … with 4 more rows</span></a></code></pre></div>
<p><code>fct_recode()</code> will leave levels that aren’t explicitly mentioned as is,
and will warn you if you accidentally refer to a level that doesn’t exist.</p>
<p>If you want to collapse a lot of levels, <code>fct_collapse()</code> is a useful variant of <code>fct_recode()</code>.
For each new variable, you can provide a vector of old levels:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">partyid =</span> <span class="kw">fct_collapse</span>(partyid,</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">                                <span class="dt">other =</span> <span class="kw">c</span>(<span class="st">&quot;No answer&quot;</span>, <span class="st">&quot;Don&#39;t know&quot;</span>, <span class="st">&quot;Other party&quot;</span>),</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">                                <span class="dt">rep =</span> <span class="kw">c</span>(<span class="st">&quot;Strong republican&quot;</span>, <span class="st">&quot;Not str republican&quot;</span>),</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">                                <span class="dt">ind =</span> <span class="kw">c</span>(<span class="st">&quot;Ind,near rep&quot;</span>, <span class="st">&quot;Independent&quot;</span>, <span class="st">&quot;Ind,near dem&quot;</span>),</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">                                <span class="dt">dem =</span> <span class="kw">c</span>(<span class="st">&quot;Not str democrat&quot;</span>, <span class="st">&quot;Strong democrat&quot;</span>)</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">  )) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="st">  </span><span class="kw">count</span>(partyid)</a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="co">#&gt;   partyid     n</span></a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="co">#&gt;   &lt;fct&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb21-12" data-line-number="12"><span class="co">#&gt; 1 other     548</span></a>
<a class="sourceLine" id="cb21-13" data-line-number="13"><span class="co">#&gt; 2 rep      5346</span></a>
<a class="sourceLine" id="cb21-14" data-line-number="14"><span class="co">#&gt; 3 ind      8409</span></a>
<a class="sourceLine" id="cb21-15" data-line-number="15"><span class="co">#&gt; 4 dem      7180</span></a></code></pre></div>
<p>Pretty cool huh?! We just created in groupings to plot or do analyses on.</p>
<p>Sometimes you just want to lump together all the small groups to make a plot or table simpler.
That’s the job of <code>fct_lump()</code></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="st">  </span><span class="kw">count</span>(relig) <span class="co">#This is before lumping</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="co">#&gt; # A tibble: 15 x 2</span></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co">#&gt;   relig                       n</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5"><span class="co">#&gt;   &lt;fct&gt;                   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb22-6" data-line-number="6"><span class="co">#&gt; 1 No answer                  93</span></a>
<a class="sourceLine" id="cb22-7" data-line-number="7"><span class="co">#&gt; 2 Don&#39;t know                 15</span></a>
<a class="sourceLine" id="cb22-8" data-line-number="8"><span class="co">#&gt; 3 Inter-nondenominational   109</span></a>
<a class="sourceLine" id="cb22-9" data-line-number="9"><span class="co">#&gt; 4 Native american            23</span></a>
<a class="sourceLine" id="cb22-10" data-line-number="10"><span class="co">#&gt; 5 Christian                 689</span></a>
<a class="sourceLine" id="cb22-11" data-line-number="11"><span class="co">#&gt; 6 Orthodox-christian         95</span></a>
<a class="sourceLine" id="cb22-12" data-line-number="12"><span class="co">#&gt; # … with 9 more rows</span></a>
<a class="sourceLine" id="cb22-13" data-line-number="13"></a>
<a class="sourceLine" id="cb22-14" data-line-number="14">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-15" data-line-number="15"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">marital =</span> <span class="kw">fct_lump</span>(marital)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-16" data-line-number="16"><span class="st">  </span><span class="kw">count</span>(marital)</a>
<a class="sourceLine" id="cb22-17" data-line-number="17"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb22-18" data-line-number="18"><span class="co">#&gt;   marital           n</span></a>
<a class="sourceLine" id="cb22-19" data-line-number="19"><span class="co">#&gt;   &lt;fct&gt;         &lt;int&gt;</span></a>
<a class="sourceLine" id="cb22-20" data-line-number="20"><span class="co">#&gt; 1 Never married  5416</span></a>
<a class="sourceLine" id="cb22-21" data-line-number="21"><span class="co">#&gt; 2 Divorced       3383</span></a>
<a class="sourceLine" id="cb22-22" data-line-number="22"><span class="co">#&gt; 3 Married       10117</span></a>
<a class="sourceLine" id="cb22-23" data-line-number="23"><span class="co">#&gt; 4 Other          2567</span></a>
<a class="sourceLine" id="cb22-24" data-line-number="24"></a>
<a class="sourceLine" id="cb22-25" data-line-number="25">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-26" data-line-number="26"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">relig =</span> <span class="kw">fct_lump</span>(relig)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-27" data-line-number="27"><span class="st">  </span><span class="kw">count</span>(relig) <span class="co">#This is default after lumping</span></a>
<a class="sourceLine" id="cb22-28" data-line-number="28"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb22-29" data-line-number="29"><span class="co">#&gt;   relig          n</span></a>
<a class="sourceLine" id="cb22-30" data-line-number="30"><span class="co">#&gt;   &lt;fct&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb22-31" data-line-number="31"><span class="co">#&gt; 1 Protestant 10846</span></a>
<a class="sourceLine" id="cb22-32" data-line-number="32"><span class="co">#&gt; 2 Other      10637</span></a>
<a class="sourceLine" id="cb22-33" data-line-number="33"></a>
<a class="sourceLine" id="cb22-34" data-line-number="34"><span class="kw">levels</span>(df<span class="op">$</span>relig)</a>
<a class="sourceLine" id="cb22-35" data-line-number="35"><span class="co">#&gt;  [1] &quot;No answer&quot;               &quot;Don&#39;t know&quot;             </span></a>
<a class="sourceLine" id="cb22-36" data-line-number="36"><span class="co">#&gt;  [3] &quot;Inter-nondenominational&quot; &quot;Native american&quot;        </span></a>
<a class="sourceLine" id="cb22-37" data-line-number="37"><span class="co">#&gt;  [5] &quot;Christian&quot;               &quot;Orthodox-christian&quot;     </span></a>
<a class="sourceLine" id="cb22-38" data-line-number="38"><span class="co">#&gt;  [7] &quot;Moslem/islam&quot;            &quot;Other eastern&quot;          </span></a>
<a class="sourceLine" id="cb22-39" data-line-number="39"><span class="co">#&gt;  [9] &quot;Hinduism&quot;                &quot;Buddhism&quot;               </span></a>
<a class="sourceLine" id="cb22-40" data-line-number="40"><span class="co">#&gt; [11] &quot;Other&quot;                   &quot;None&quot;                   </span></a>
<a class="sourceLine" id="cb22-41" data-line-number="41"><span class="co">#&gt; [13] &quot;Jewish&quot;                  &quot;Catholic&quot;               </span></a>
<a class="sourceLine" id="cb22-42" data-line-number="42"><span class="co">#&gt; [15] &quot;Protestant&quot;              &quot;Not applicable&quot;</span></a></code></pre></div>
<p>It looks like Protestant had the largest count, so by default it grouped everything else and Protestant together.</p>
<p>You can collapse across specified lumps…</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">relig =</span> <span class="kw">fct_lump</span>(relig, <span class="dt">n =</span> <span class="dv">10</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Specify lumps here</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="st">  </span><span class="kw">count</span>(relig, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb23-5" data-line-number="5"><span class="co">#&gt;   relig          n</span></a>
<a class="sourceLine" id="cb23-6" data-line-number="6"><span class="co">#&gt;   &lt;fct&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb23-7" data-line-number="7"><span class="co">#&gt; 1 Protestant 10846</span></a>
<a class="sourceLine" id="cb23-8" data-line-number="8"><span class="co">#&gt; 2 Catholic    5124</span></a>
<a class="sourceLine" id="cb23-9" data-line-number="9"><span class="co">#&gt; 3 None        3523</span></a>
<a class="sourceLine" id="cb23-10" data-line-number="10"><span class="co">#&gt; 4 Christian    689</span></a>
<a class="sourceLine" id="cb23-11" data-line-number="11"><span class="co">#&gt; 5 Other        458</span></a>
<a class="sourceLine" id="cb23-12" data-line-number="12"><span class="co">#&gt; 6 Jewish       388</span></a>
<a class="sourceLine" id="cb23-13" data-line-number="13"><span class="co">#&gt; # … with 4 more rows</span></a></code></pre></div>
</div>
<div id="play-time" class="section level2">
<h2><span class="header-section-number">4.4</span> Play time</h2>
<p>Answer some interesting questions about this dataset</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">df</a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="co">#&gt; # A tibble: 21,483 x 9</span></a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="co">#&gt;    year marital      age race  rincome    partyid     relig     denom    tvhours</span></a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;fct&gt;      &lt;int&gt; &lt;fct&gt; &lt;fct&gt;      &lt;fct&gt;       &lt;fct&gt;     &lt;fct&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="co">#&gt; 1  2000 Never mar…    26 White $8000 to … Ind,near r… Protesta… Souther…      12</span></a>
<a class="sourceLine" id="cb24-6" data-line-number="6"><span class="co">#&gt; 2  2000 Divorced      48 White $8000 to … Not str re… Protesta… Baptist…      NA</span></a>
<a class="sourceLine" id="cb24-7" data-line-number="7"><span class="co">#&gt; 3  2000 Widowed       67 White Not appli… Independent Protesta… No deno…       2</span></a>
<a class="sourceLine" id="cb24-8" data-line-number="8"><span class="co">#&gt; 4  2000 Never mar…    39 White Not appli… Ind,near r… Orthodox… Not app…       4</span></a>
<a class="sourceLine" id="cb24-9" data-line-number="9"><span class="co">#&gt; 5  2000 Divorced      25 White Not appli… Not str de… None      Not app…       1</span></a>
<a class="sourceLine" id="cb24-10" data-line-number="10"><span class="co">#&gt; 6  2000 Married       25 White $20000 - … Strong dem… Protesta… Souther…      NA</span></a>
<a class="sourceLine" id="cb24-11" data-line-number="11"><span class="co">#&gt; # … with 2.148e+04 more rows</span></a></code></pre></div>
<p>What is the proportion of race in each religion?</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(relig) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="st">  </span><span class="kw">count</span>(...) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop =</span> ...)</a></code></pre></div>
<p>Try to plot it</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(relig) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="st">  </span><span class="kw">count</span>(race) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop =</span> n<span class="op">/</span><span class="kw">sum</span>(n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(relig, ..., <span class="dt">fill =</span> ...)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb26-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;...&quot;</span>, <span class="dt">position =</span> <span class="st">&quot;...&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="st">  </span><span class="kw">theme</span>(...)</a></code></pre></div>
<p>##Solutions</p>
<p>Play 1</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">View</span>(df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(relig) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="st">  </span><span class="kw">count</span>(race) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop =</span> n<span class="op">/</span><span class="kw">sum</span>(n)))</a></code></pre></div>
<p>Play 2</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(relig) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-3" data-line-number="3"><span class="st">  </span><span class="kw">count</span>(race) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop =</span> n<span class="op">/</span><span class="kw">sum</span>(n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-5" data-line-number="5"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(relig, prop, <span class="dt">fill =</span> race)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-7" data-line-number="7"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb28-8" data-line-number="8"></a>
<a class="sourceLine" id="cb28-9" data-line-number="9">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-10" data-line-number="10"><span class="st">  </span><span class="kw">group_by</span>(relig) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-11" data-line-number="11"><span class="st">  </span><span class="kw">count</span>(race) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-12" data-line-number="12"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop =</span> n<span class="op">/</span><span class="kw">sum</span>(n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-13" data-line-number="13"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(relig, prop, <span class="dt">color =</span> race)) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-14" data-line-number="14"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">group =</span> race)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb28-15" data-line-number="15"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb28-16" data-line-number="16"></a>
<a class="sourceLine" id="cb28-17" data-line-number="17"></a>
<a class="sourceLine" id="cb28-18" data-line-number="18">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-19" data-line-number="19"><span class="st">  </span><span class="kw">count</span>(relig, race) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-20" data-line-number="20"><span class="st">  </span><span class="kw">group_by</span>(relig) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-21" data-line-number="21"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop =</span> n<span class="op">/</span><span class="kw">sum</span>(n))</a>
<a class="sourceLine" id="cb28-22" data-line-number="22"><span class="co">#&gt; # A tibble: 44 x 4</span></a>
<a class="sourceLine" id="cb28-23" data-line-number="23"><span class="co">#&gt; # Groups:   relig [15]</span></a>
<a class="sourceLine" id="cb28-24" data-line-number="24"><span class="co">#&gt;   relig      race      n  prop</span></a>
<a class="sourceLine" id="cb28-25" data-line-number="25"><span class="co">#&gt;   &lt;fct&gt;      &lt;fct&gt; &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb28-26" data-line-number="26"><span class="co">#&gt; 1 No answer  Other    14 0.151</span></a>
<a class="sourceLine" id="cb28-27" data-line-number="27"><span class="co">#&gt; 2 No answer  Black    16 0.172</span></a>
<a class="sourceLine" id="cb28-28" data-line-number="28"><span class="co">#&gt; 3 No answer  White    63 0.677</span></a>
<a class="sourceLine" id="cb28-29" data-line-number="29"><span class="co">#&gt; 4 Don&#39;t know Other     3 0.2  </span></a>
<a class="sourceLine" id="cb28-30" data-line-number="30"><span class="co">#&gt; 5 Don&#39;t know Black     3 0.2  </span></a>
<a class="sourceLine" id="cb28-31" data-line-number="31"><span class="co">#&gt; 6 Don&#39;t know White     9 0.6  </span></a>
<a class="sourceLine" id="cb28-32" data-line-number="32"><span class="co">#&gt; # … with 38 more rows</span></a></code></pre></div>
<p><img src="04_TransformationDay2_files/figure-html/play2-1.png" width="70%" style="display: block; margin: auto;" /><img src="04_TransformationDay2_files/figure-html/play2-2.png" width="70%" style="display: block; margin: auto;" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-transformation-day-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualization-with-ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://spencercastro.com/04_TransformationDay2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
