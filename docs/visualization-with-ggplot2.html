<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Visualization with ggplot2 | Psychological Measurement in R</title>
  <meta name="description" content="As a modern Psychologist, we can no longer be purely theoretical hypothesis generators, experimentalists, statisticians, or clinicians; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing research projects into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Visualization with ggplot2 | Psychological Measurement in R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://spencercastro.com" />
  <meta property="og:image" content="https://spencercastro.comimages/UPsychLogo.jpg" />
  <meta property="og:description" content="As a modern Psychologist, we can no longer be purely theoretical hypothesis generators, experimentalists, statisticians, or clinicians; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing research projects into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="github-repo" content="sccastro/PsychMeasurement" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Visualization with ggplot2 | Psychological Measurement in R" />
  
  <meta name="twitter:description" content="As a modern Psychologist, we can no longer be purely theoretical hypothesis generators, experimentalists, statisticians, or clinicians; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing research projects into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="twitter:image" content="https://spencercastro.comimages/UPsychLogo.jpg" />

<meta name="author" content="Spencer Castro" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-transformation-day-2.html"/>
<link rel="next" href="introduction-to-statistics.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="class_book.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Psychological Measurement in R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i><b>1</b> Syllabus</a><ul>
<li class="chapter" data-level="1.1" data-path="syllabus.html"><a href="syllabus.html#course-overview"><i class="fa fa-check"></i><b>1.1</b> Course Overview</a></li>
<li class="chapter" data-level="1.2" data-path="syllabus.html"><a href="syllabus.html#learning-outcomes-course-objectives"><i class="fa fa-check"></i><b>1.2</b> Learning Outcomes &amp; Course Objectives</a></li>
<li class="chapter" data-level="1.3" data-path="syllabus.html"><a href="syllabus.html#course-format"><i class="fa fa-check"></i><b>1.3</b> Course Format</a></li>
<li class="chapter" data-level="1.4" data-path="syllabus.html"><a href="syllabus.html#evaluation-methodsassignments"><i class="fa fa-check"></i><b>1.4</b> Evaluation Methods/Assignments</a></li>
<li class="chapter" data-level="1.5" data-path="syllabus.html"><a href="syllabus.html#grading-policy"><i class="fa fa-check"></i><b>1.5</b> Grading Policy</a></li>
<li class="chapter" data-level="1.6" data-path="syllabus.html"><a href="syllabus.html#student-rights-and-responsibilities"><i class="fa fa-check"></i><b>1.6</b> Student Rights and Responsibilities</a></li>
<li class="chapter" data-level="1.7" data-path="syllabus.html"><a href="syllabus.html#department-of-psychology-undergraduate-academic-misconduct-policy"><i class="fa fa-check"></i><b>1.7</b> Department of Psychology Undergraduate Academic Misconduct Policy</a></li>
<li class="chapter" data-level="1.8" data-path="syllabus.html"><a href="syllabus.html#course-policies"><i class="fa fa-check"></i><b>1.8</b> Course Policies</a></li>
<li class="chapter" data-level="1.9" data-path="syllabus.html"><a href="syllabus.html#university-attendance-requirements"><i class="fa fa-check"></i><b>1.9</b> University Attendance Requirements</a></li>
<li class="chapter" data-level="1.10" data-path="syllabus.html"><a href="syllabus.html#student-support-accommodations"><i class="fa fa-check"></i><b>1.10</b> Student Support &amp; Accommodations</a></li>
<li class="chapter" data-level="1.11" data-path="syllabus.html"><a href="syllabus.html#academic-calendar"><i class="fa fa-check"></i><b>1.11</b> Academic Calendar</a></li>
<li class="chapter" data-level="1.12" data-path="syllabus.html"><a href="syllabus.html#course-schedule"><i class="fa fa-check"></i><b>1.12</b> Course Schedule</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#baser-walkthrough"><i class="fa fa-check"></i>BaseR walkthrough</a></li>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#help"><i class="fa fa-check"></i><b>2.1</b> Help</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#vectors"><i class="fa fa-check"></i><b>2.2</b> VECTORS</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#programming"><i class="fa fa-check"></i><b>2.3</b> PROGRAMMING</a><ul>
<li class="chapter" data-level="2.3.1" data-path="introduction.html"><a href="introduction.html#for-loop"><i class="fa fa-check"></i><b>2.3.1</b> For loop</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction.html"><a href="introduction.html#while-loop"><i class="fa fa-check"></i><b>2.3.2</b> While loop</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#assignment-1"><i class="fa fa-check"></i><b>2.4</b> Assignment 1</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>3</b> Importing Data</a><ul>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#reading-files-into-r"><i class="fa fa-check"></i>Reading files into R</a></li>
<li class="chapter" data-level="3.1" data-path="importing-data.html"><a href="importing-data.html#whats-a-tibble"><i class="fa fa-check"></i><b>3.1</b> What’s a tibble?</a></li>
<li class="chapter" data-level="3.2" data-path="importing-data.html"><a href="importing-data.html#save-your-dataset"><i class="fa fa-check"></i><b>3.2</b> Save your dataset:</a></li>
<li class="chapter" data-level="3.3" data-path="importing-data.html"><a href="importing-data.html#cleaning-your-data-file"><i class="fa fa-check"></i><b>3.3</b> Cleaning your data file</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>4</b> Data Transformation</a><ul>
<li class="chapter" data-level="" data-path="data-transformation.html"><a href="data-transformation.html#data-transformation-with-dplyr"><i class="fa fa-check"></i>Data Transformation with Dplyr</a></li>
<li class="chapter" data-level="4.1" data-path="data-transformation.html"><a href="data-transformation.html#get-a-dataset-from-your-.rdata-file"><i class="fa fa-check"></i><b>4.1</b> Get a dataset from your .RData file</a></li>
<li class="chapter" data-level="4.2" data-path="data-transformation.html"><a href="data-transformation.html#introduction-to-the-pipe"><i class="fa fa-check"></i><b>4.2</b> Introduction to “The Pipe”</a></li>
<li class="chapter" data-level="4.3" data-path="data-transformation.html"><a href="data-transformation.html#aside-on-the-apply-family"><i class="fa fa-check"></i><b>4.3</b> Aside on the apply family</a></li>
<li class="chapter" data-level="4.4" data-path="data-transformation.html"><a href="data-transformation.html#solutions-to-challenges"><i class="fa fa-check"></i><b>4.4</b> Solutions to Challenges</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html"><i class="fa fa-check"></i><b>5</b> Data Transformation Day 2</a><ul>
<li class="chapter" data-level="5.1" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#rcolorbrewer"><i class="fa fa-check"></i><b>5.1</b> RcolorBrewer</a></li>
<li class="chapter" data-level="5.2" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#modifying-factor-levels"><i class="fa fa-check"></i><b>5.2</b> Modifying Factor Levels</a></li>
<li class="chapter" data-level="5.3" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#play-time"><i class="fa fa-check"></i><b>5.3</b> Play time</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>6</b> Visualization with ggplot2</a><ul>
<li class="chapter" data-level="6.1" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#statistical-transformations"><i class="fa fa-check"></i><b>6.1</b> Statistical Transformations</a></li>
<li class="chapter" data-level="6.2" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#changing-the-position"><i class="fa fa-check"></i><b>6.2</b> Changing the position</a></li>
<li class="chapter" data-level="6.3" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#coordinates"><i class="fa fa-check"></i><b>6.3</b> Coordinates</a><ul>
<li class="chapter" data-level="6.3.1" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#plot-maps-if-you-want"><i class="fa fa-check"></i><b>6.3.1</b> Plot maps if you want</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html"><i class="fa fa-check"></i><b>7</b> Introduction to Statistics</a><ul>
<li class="chapter" data-level="7.0.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#descriptive-stats"><i class="fa fa-check"></i><b>7.0.1</b> Descriptive Stats</a></li>
<li class="chapter" data-level="7.0.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>7.0.2</b> Measures of Central Tendency</a></li>
<li class="chapter" data-level="7.0.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-variability"><i class="fa fa-check"></i><b>7.0.3</b> Measures of Variability</a></li>
<li class="chapter" data-level="7.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#clinical-trial-example"><i class="fa fa-check"></i><b>7.1</b> Clinical Trial Example</a><ul>
<li class="chapter" data-level="7.1.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chi-square-goodness-of-fit-test-pearson-1900-review"><i class="fa fa-check"></i><b>7.1.1</b> Chi Square goodness-of-fit test (Pearson, 1900) Review</a></li>
<li class="chapter" data-level="7.1.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chi-square-test-of-independence"><i class="fa fa-check"></i><b>7.1.2</b> Chi-square test of independence</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="linear-models.html"><a href="linear-models.html"><i class="fa fa-check"></i><b>8</b> Linear Models</a><ul>
<li class="chapter" data-level="" data-path="linear-models.html"><a href="linear-models.html#steps-of-linear-models"><i class="fa fa-check"></i>Steps of Linear Models</a></li>
<li class="chapter" data-level="8.1" data-path="linear-models.html"><a href="linear-models.html#step-1.-get-your-data"><i class="fa fa-check"></i><b>8.1</b> Step 1. Get your data</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="multilevel-models.html"><a href="multilevel-models.html"><i class="fa fa-check"></i><b>9</b> Multilevel Models</a><ul>
<li class="chapter" data-level="" data-path="multilevel-models.html"><a href="multilevel-models.html#steps-of-multilevel-models"><i class="fa fa-check"></i>Steps of Multilevel Models</a><ul>
<li class="chapter" data-level="9.0.1" data-path="multilevel-models.html"><a href="multilevel-models.html#mixed-models-in-r"><i class="fa fa-check"></i><b>9.0.1</b> Mixed models in R</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Psychological Measurement in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualization-with-ggplot2" class="section level1">
<h1><span class="header-section-number">6</span> Visualization with ggplot2</h1>
<blockquote>
“…few people will appreciate the music if I just show them the notes. Most of us need to listen to the music to understand how beautiful it is. But often that’s how we present statistics; we just show the notes we don’t play the music.”
<div style="text-align: right">
— Hans Rosling
</div>
</blockquote>
<blockquote>
“At their best, visualizations of data effortlessly reveal the true nature of information.”
<div style="text-align: right">
— Lace Padilla
</div>
</blockquote>
<p>First off…</p>
<h4>
Advanced R Challenges
</h4>
<p>Create a custom theme for your graphs!</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1"><span class="kw">require</span>(tidyverse)</a>
<a class="sourceLine" id="cb106-2" data-line-number="2"><span class="co">#&gt; Loading required package: tidyverse</span></a>
<a class="sourceLine" id="cb106-3" data-line-number="3"><span class="co">#&gt; ── Attaching packages ─────────────────────────────────── tidyverse 1.2.1 ──</span></a>
<a class="sourceLine" id="cb106-4" data-line-number="4"><span class="co">#&gt; ✔ ggplot2 3.1.0     ✔ purrr   0.2.5</span></a>
<a class="sourceLine" id="cb106-5" data-line-number="5"><span class="co">#&gt; ✔ tibble  1.4.2     ✔ dplyr   0.7.8</span></a>
<a class="sourceLine" id="cb106-6" data-line-number="6"><span class="co">#&gt; ✔ tidyr   0.8.1     ✔ stringr 1.3.1</span></a>
<a class="sourceLine" id="cb106-7" data-line-number="7"><span class="co">#&gt; ✔ readr   1.1.1     ✔ forcats 0.3.0</span></a>
<a class="sourceLine" id="cb106-8" data-line-number="8"><span class="co">#&gt; ── Conflicts ────────────────────────────────────── tidyverse_conflicts() ──</span></a>
<a class="sourceLine" id="cb106-9" data-line-number="9"><span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span></a>
<a class="sourceLine" id="cb106-10" data-line-number="10"><span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></a>
<a class="sourceLine" id="cb106-11" data-line-number="11"><span class="co">#Example 1.</span></a>
<a class="sourceLine" id="cb106-12" data-line-number="12">my.axis.font&lt;-<span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">18</span>), <span class="dt">axis.title.y =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">18</span>),</a>
<a class="sourceLine" id="cb106-13" data-line-number="13">                    <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">18</span>), <span class="dt">axis.text.y =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">18</span>), </a>
<a class="sourceLine" id="cb106-14" data-line-number="14">                    <span class="dt">plot.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">18</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>, <span class="dt">hjust =</span> <span class="fl">.5</span>),</a>
<a class="sourceLine" id="cb106-15" data-line-number="15">                    <span class="dt">legend.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">14</span>),<span class="dt">legend.text=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">14</span>))</a>
<a class="sourceLine" id="cb106-16" data-line-number="16"></a>
<a class="sourceLine" id="cb106-17" data-line-number="17"><span class="co"># theme_mine &lt;- theme(...)</span></a>
<a class="sourceLine" id="cb106-18" data-line-number="18"><span class="co"># example 2.</span></a>
<a class="sourceLine" id="cb106-19" data-line-number="19"><span class="co">### XKCD theme</span></a>
<a class="sourceLine" id="cb106-20" data-line-number="20">theme_xkcd2 &lt;-<span class="st"> </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb106-21" data-line-number="21">  <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill=</span><span class="st">&quot;white&quot;</span>), </a>
<a class="sourceLine" id="cb106-22" data-line-number="22">  <span class="dt">axis.ticks =</span> <span class="kw">element_line</span>(<span class="dt">colour=</span><span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb106-23" data-line-number="23">  <span class="dt">panel.grid =</span> <span class="kw">element_line</span>(<span class="dt">colour=</span><span class="st">&quot;white&quot;</span>),</a>
<a class="sourceLine" id="cb106-24" data-line-number="24">  <span class="dt">axis.text.y =</span> <span class="kw">element_text</span>(<span class="dt">colour=</span><span class="ot">NA</span>), </a>
<a class="sourceLine" id="cb106-25" data-line-number="25">  <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">colour=</span><span class="st">&quot;black&quot;</span>),</a>
<a class="sourceLine" id="cb106-26" data-line-number="26">  <span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">16</span>, <span class="dt">family=</span><span class="st">&quot;Humor Sans&quot;</span>)</a>
<a class="sourceLine" id="cb106-27" data-line-number="27">)</a>
<a class="sourceLine" id="cb106-28" data-line-number="28"></a>
<a class="sourceLine" id="cb106-29" data-line-number="29"><span class="co">###Jittery line###</span></a>
<a class="sourceLine" id="cb106-30" data-line-number="30">xkcd_line &lt;-<span class="st"> </span><span class="cf">function</span>(x, y, color) {</a>
<a class="sourceLine" id="cb106-31" data-line-number="31">  len &lt;-<span class="st"> </span><span class="kw">length</span>(x);</a>
<a class="sourceLine" id="cb106-32" data-line-number="32">  rg &lt;-<span class="st"> </span><span class="kw">par</span>(<span class="st">&quot;usr&quot;</span>);</a>
<a class="sourceLine" id="cb106-33" data-line-number="33">  yjitter &lt;-<span class="st"> </span>(rg[<span class="dv">4</span>] <span class="op">-</span><span class="st"> </span>rg[<span class="dv">3</span>]) <span class="op">/</span><span class="st"> </span><span class="dv">1000</span>;</a>
<a class="sourceLine" id="cb106-34" data-line-number="34">  xjitter &lt;-<span class="st"> </span>(rg[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>rg[<span class="dv">1</span>]) <span class="op">/</span><span class="st"> </span><span class="dv">1000</span>;</a>
<a class="sourceLine" id="cb106-35" data-line-number="35">  x_mod &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(len) <span class="op">*</span><span class="st"> </span>xjitter;</a>
<a class="sourceLine" id="cb106-36" data-line-number="36">  y_mod &lt;-<span class="st"> </span>y <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(len) <span class="op">*</span><span class="st"> </span>yjitter;</a>
<a class="sourceLine" id="cb106-37" data-line-number="37">  <span class="kw">lines</span>(x_mod, y_mod, <span class="dt">col=</span><span class="st">&#39;white&#39;</span>, <span class="dt">lwd=</span><span class="dv">10</span>);</a>
<a class="sourceLine" id="cb106-38" data-line-number="38">  <span class="kw">lines</span>(x_mod, y_mod, <span class="dt">col=</span>color, <span class="dt">lwd=</span><span class="dv">5</span>);</a>
<a class="sourceLine" id="cb106-39" data-line-number="39">}</a>
<a class="sourceLine" id="cb106-40" data-line-number="40"></a>
<a class="sourceLine" id="cb106-41" data-line-number="41"><span class="co">###Off-axis###</span></a>
<a class="sourceLine" id="cb106-42" data-line-number="42">xkcd_axis &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb106-43" data-line-number="43">  rg &lt;-<span class="st"> </span><span class="kw">par</span>(<span class="st">&quot;usr&quot;</span>);</a>
<a class="sourceLine" id="cb106-44" data-line-number="44">  yaxis &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">100</span> <span class="op">/</span><span class="st"> </span><span class="dv">100</span> <span class="op">*</span><span class="st"> </span>(rg[<span class="dv">4</span>] <span class="op">-</span><span class="st"> </span>rg[<span class="dv">3</span>]) <span class="op">+</span><span class="st"> </span>rg[<span class="dv">3</span>];</a>
<a class="sourceLine" id="cb106-45" data-line-number="45">  xaxis &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">100</span> <span class="op">/</span><span class="st"> </span><span class="dv">100</span> <span class="op">*</span><span class="st"> </span>(rg[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>rg[<span class="dv">1</span>]) <span class="op">+</span><span class="st"> </span>rg[<span class="dv">1</span>];</a>
<a class="sourceLine" id="cb106-46" data-line-number="46">  <span class="kw">xkcd_line</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span> <span class="op">*</span><span class="st"> </span><span class="dv">0</span> <span class="op">+</span><span class="st"> </span>rg[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>(rg[<span class="dv">2</span>]<span class="op">-</span>rg[<span class="dv">1</span>])<span class="op">/</span><span class="dv">100</span>, yaxis,<span class="st">&#39;black&#39;</span>)</a>
<a class="sourceLine" id="cb106-47" data-line-number="47">  <span class="kw">xkcd_line</span>(xaxis, <span class="dv">1</span><span class="op">:</span><span class="dv">100</span> <span class="op">*</span><span class="st"> </span><span class="dv">0</span> <span class="op">+</span><span class="st"> </span>rg[<span class="dv">3</span>] <span class="op">+</span><span class="st"> </span>(rg[<span class="dv">4</span>]<span class="op">-</span>rg[<span class="dv">3</span>])<span class="op">/</span><span class="dv">100</span>, <span class="st">&#39;black&#39;</span>)</a>
<a class="sourceLine" id="cb106-48" data-line-number="48">}</a>
<a class="sourceLine" id="cb106-49" data-line-number="49"></a>
<a class="sourceLine" id="cb106-50" data-line-number="50"><span class="co">#Now use it to  plot some graphs.</span></a>
<a class="sourceLine" id="cb106-51" data-line-number="51">mpg <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb106-52" data-line-number="52"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb106-53" data-line-number="53"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;My Plot&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb106-54" data-line-number="54"><span class="st">  </span>my.axis.font</a>
<a class="sourceLine" id="cb106-55" data-line-number="55"></a>
<a class="sourceLine" id="cb106-56" data-line-number="56"><span class="co">#Some squiggly lines:</span></a>
<a class="sourceLine" id="cb106-57" data-line-number="57">d &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x=</span><span class="dv">1</span><span class="op">:</span><span class="dv">100</span>)</a>
<a class="sourceLine" id="cb106-58" data-line-number="58">d<span class="op">$</span>one &lt;-<span class="st"> </span><span class="kw">exp</span>(<span class="op">-</span>((d<span class="op">$</span>x <span class="op">-</span><span class="st"> </span><span class="dv">50</span>)<span class="op">/</span><span class="dv">10</span>)<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb106-59" data-line-number="59">d<span class="op">$</span>two &lt;-<span class="st"> </span><span class="kw">sin</span>(d<span class="op">$</span>x<span class="op">/</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb106-60" data-line-number="60"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb106-61" data-line-number="61"><span class="kw">plot.window</span>(</a>
<a class="sourceLine" id="cb106-62" data-line-number="62">  <span class="kw">c</span>(<span class="kw">min</span>(d<span class="op">$</span>x),<span class="kw">max</span>(d<span class="op">$</span>x)),</a>
<a class="sourceLine" id="cb106-63" data-line-number="63">  <span class="kw">c</span>(<span class="kw">min</span>(<span class="kw">c</span>(d<span class="op">$</span>one,d<span class="op">$</span>two)),<span class="kw">max</span>(<span class="kw">c</span>(d<span class="op">$</span>one,d<span class="op">$</span>two))))</a>
<a class="sourceLine" id="cb106-64" data-line-number="64"><span class="kw">xkcd_axis</span>()</a>
<a class="sourceLine" id="cb106-65" data-line-number="65"><span class="kw">xkcd_line</span>(d<span class="op">$</span>x, d<span class="op">$</span>one, <span class="st">&#39;red&#39;</span>)</a>
<a class="sourceLine" id="cb106-66" data-line-number="66"><span class="kw">xkcd_line</span>(d<span class="op">$</span>x, d<span class="op">$</span>two, <span class="st">&#39;blue&#39;</span>)</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/advancedR-1.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/advancedR-2.png" width="70%" style="display: block; margin: auto;" /></p>
<p>#Steps of Visualization {-}</p>
<p>Step 1: Get some data</p>
<p><code>ggplot2</code> has the mpg dataset.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="kw">kable</span>(ggplot2<span class="op">::</span>mpg[<span class="dv">1</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">11</span>])</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
manufacturer
</th>
<th style="text-align:left;">
model
</th>
<th style="text-align:right;">
displ
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
cyl
</th>
<th style="text-align:left;">
trans
</th>
<th style="text-align:left;">
drv
</th>
<th style="text-align:right;">
cty
</th>
<th style="text-align:right;">
hwy
</th>
<th style="text-align:left;">
fl
</th>
<th style="text-align:left;">
class
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
audi
</td>
<td style="text-align:left;">
a4
</td>
<td style="text-align:right;">
1.8
</td>
<td style="text-align:right;">
1999
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
auto(l5)
</td>
<td style="text-align:left;">
f
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:left;">
p
</td>
<td style="text-align:left;">
compact
</td>
</tr>
</tbody>
</table>
<p>Let’s save it to something…</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1">df &lt;-<span class="st"> </span>ggplot2<span class="op">::</span>mpg</a></code></pre></div>
<p>take a look at it…</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="kw">View</span>(df)</a></code></pre></div>
<p>Also look at its dimensions up in the environment —-&gt;
(usually it’s in the upper-right corner)
or print them to the console…</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="kw">dim</span>(df)</a>
<a class="sourceLine" id="cb110-2" data-line-number="2"><span class="co">#&gt; [1] 234  11</span></a>
<a class="sourceLine" id="cb110-3" data-line-number="3"><span class="kw">str</span>(df) <span class="co">#what kind of classes are we dealing with?</span></a>
<a class="sourceLine" id="cb110-4" data-line-number="4"><span class="co">#&gt; Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    234 obs. of  11 variables:</span></a>
<a class="sourceLine" id="cb110-5" data-line-number="5"><span class="co">#&gt;  $ manufacturer: chr  &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ...</span></a>
<a class="sourceLine" id="cb110-6" data-line-number="6"><span class="co">#&gt;  $ model       : chr  &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; ...</span></a>
<a class="sourceLine" id="cb110-7" data-line-number="7"><span class="co">#&gt;  $ displ       : num  1.8 1.8 2 2 2.8 2.8 3.1 1.8 1.8 2 ...</span></a>
<a class="sourceLine" id="cb110-8" data-line-number="8"><span class="co">#&gt;  $ year        : int  1999 1999 2008 2008 1999 1999 2008 1999 1999 2008 ...</span></a>
<a class="sourceLine" id="cb110-9" data-line-number="9"><span class="co">#&gt;  $ cyl         : int  4 4 4 4 6 6 6 4 4 4 ...</span></a>
<a class="sourceLine" id="cb110-10" data-line-number="10"><span class="co">#&gt;  $ trans       : chr  &quot;auto(l5)&quot; &quot;manual(m5)&quot; &quot;manual(m6)&quot; &quot;auto(av)&quot; ...</span></a>
<a class="sourceLine" id="cb110-11" data-line-number="11"><span class="co">#&gt;  $ drv         : chr  &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ...</span></a>
<a class="sourceLine" id="cb110-12" data-line-number="12"><span class="co">#&gt;  $ cty         : int  18 21 20 21 16 18 18 18 16 20 ...</span></a>
<a class="sourceLine" id="cb110-13" data-line-number="13"><span class="co">#&gt;  $ hwy         : int  29 29 31 30 26 26 27 26 25 28 ...</span></a>
<a class="sourceLine" id="cb110-14" data-line-number="14"><span class="co">#&gt;  $ fl          : chr  &quot;p&quot; &quot;p&quot; &quot;p&quot; &quot;p&quot; ...</span></a>
<a class="sourceLine" id="cb110-15" data-line-number="15"><span class="co">#&gt;  $ class       : chr  &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; ...</span></a></code></pre></div>
<p>Where can I read more about this dataset?</p>
<p>hint:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1">?mpg</a></code></pre></div>
<p>You can plot this data quickly in many ways:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="kw">stem</span>(mpg<span class="op">$</span>displ)</a>
<a class="sourceLine" id="cb112-2" data-line-number="2"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb112-3" data-line-number="3"><span class="co">#&gt;   The decimal point is at the |</span></a>
<a class="sourceLine" id="cb112-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb112-5" data-line-number="5"><span class="co">#&gt;   1 | 6666688888888888888999</span></a>
<a class="sourceLine" id="cb112-6" data-line-number="6"><span class="co">#&gt;   2 | 0000000000000000000002222224444444444444</span></a>
<a class="sourceLine" id="cb112-7" data-line-number="7"><span class="co">#&gt;   2 | 55555555555555555555777777778888888888</span></a>
<a class="sourceLine" id="cb112-8" data-line-number="8"><span class="co">#&gt;   3 | 000000001111113333333334444</span></a>
<a class="sourceLine" id="cb112-9" data-line-number="9"><span class="co">#&gt;   3 | 555556677788888888999</span></a>
<a class="sourceLine" id="cb112-10" data-line-number="10"><span class="co">#&gt;   4 | 00000000000000022224</span></a>
<a class="sourceLine" id="cb112-11" data-line-number="11"><span class="co">#&gt;   4 | 6666666666677777777777777777</span></a>
<a class="sourceLine" id="cb112-12" data-line-number="12"><span class="co">#&gt;   5 | 002222233333344444444</span></a>
<a class="sourceLine" id="cb112-13" data-line-number="13"><span class="co">#&gt;   5 | 67777777799</span></a>
<a class="sourceLine" id="cb112-14" data-line-number="14"><span class="co">#&gt;   6 | 0122</span></a>
<a class="sourceLine" id="cb112-15" data-line-number="15"><span class="co">#&gt;   6 | 5</span></a>
<a class="sourceLine" id="cb112-16" data-line-number="16"><span class="co">#&gt;   7 | 0</span></a>
<a class="sourceLine" id="cb112-17" data-line-number="17"><span class="kw">hist</span>(mpg<span class="op">$</span>displ)</a>
<a class="sourceLine" id="cb112-18" data-line-number="18"><span class="kw">plot</span>(mpg<span class="op">$</span>displ)</a>
<a class="sourceLine" id="cb112-19" data-line-number="19"><span class="kw">plot</span>(mpg<span class="op">$</span>cty, mpg<span class="op">$</span>hwy)</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/ezplots-1.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/ezplots-2.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/ezplots-3.png" width="70%" style="display: block; margin: auto;" />
However, the ggplot package offers a structure and flexibility to create
almost any plot you can imagine. Other packages work with ggplot to
create the rest.</p>
<p>##ggplot2
Remember this scaffolding for your ggplots:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="op">&lt;</span>DATA<span class="op">&gt;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb113-2" data-line-number="2"><span class="st">  </span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span>(</a>
<a class="sourceLine" id="cb113-3" data-line-number="3">    <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>),</a>
<a class="sourceLine" id="cb113-4" data-line-number="4">    <span class="dt">stat =</span> <span class="op">&lt;</span>STAT<span class="op">&gt;</span>,</a>
<a class="sourceLine" id="cb113-5" data-line-number="5">    <span class="dt">position =</span> <span class="op">&lt;</span>POSITION<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb113-6" data-line-number="6"><span class="st">  </span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb113-7" data-line-number="7"><span class="st">  </span><span class="er">&lt;</span>COORDINATE_FUNCTION<span class="op">&gt;</span><span class="st"> </span><span class="op">+</span></a>
<a class="sourceLine" id="cb113-8" data-line-number="8"><span class="st">  </span><span class="er">&lt;</span>FACET_FUNCTION<span class="op">&gt;</span></a></code></pre></div>
<p>ggplot consists of a data.frame (or a tibble), a coordinate system,
and geoms (marks that represent data values)</p>
<p>This is usually how we start:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1">df <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#the tibble</span></a>
<a class="sourceLine" id="cb114-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span><span class="co">#the x and y coordinates (what goes on the axes)</span></a>
<a class="sourceLine" id="cb114-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="co">#marks that represent the data values</span></a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/baseggplot-1.png" width="70%" style="display: block; margin: auto;" />
You can do the same with qplot(), which is short for quick plot…</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1"><span class="kw">qplot</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">data =</span> df, <span class="dt">geom =</span> <span class="st">&quot;point&quot;</span>)</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/qplot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><strong>Challenge 1</strong>
What does “displ” mean? What does “hwy” mean? What is the relationship between these variables?</p>
<p>Some geoms summarize data or provide trends. For example, <code>geom_smooth()</code> plots the relationship between two variables as smoothed conditional means.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb116-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(displ, hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb116-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb116-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_smooth</span>()</a>
<a class="sourceLine" id="cb116-5" data-line-number="5"><span class="co">#&gt; `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</span></a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/smooth-1.png" width="70%" style="display: block; margin: auto;" />
Remember, this is equivalent to the example written above…</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb117-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_smooth</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb117-3" data-line-number="3"><span class="co">#&gt; `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</span></a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/equivalent-1.png" width="70%" style="display: block; margin: auto;" />
We can get some useful information out of this plot, like cars that don’t follow the trend.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb118-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> displ <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="op">&amp;</span><span class="st"> </span>hwy <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>()</a>
<a class="sourceLine" id="cb118-3" data-line-number="3"><span class="co">#&gt; `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</span></a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/outlier-1.png" width="70%" style="display: block; margin: auto;" />
These cars don’t follow the trend, getting higher mpg with bigger engines. We can identify these cars in the data.frame…</p>
<p><strong>Challenge 2</strong>
Get the cars that were identified in blue and print the data.frame (tibble)</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" data-line-number="1"><span class="kw">View</span>(df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb119-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(displ <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="op">&amp;</span><span class="st"> </span>hwy <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>))</a></code></pre></div>
<p>All of these cars have an “fl” of “p”. What does that mean?
How would you find out?</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" data-line-number="1"><span class="kw">unique</span>(df<span class="op">$</span>fl)</a>
<a class="sourceLine" id="cb120-2" data-line-number="2"><span class="co">#&gt; [1] &quot;p&quot; &quot;r&quot; &quot;e&quot; &quot;d&quot; &quot;c&quot;</span></a>
<a class="sourceLine" id="cb120-3" data-line-number="3"></a>
<a class="sourceLine" id="cb120-4" data-line-number="4"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x=</span>fl, <span class="dt">y=</span>hwy)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>cyl, <span class="dt">nrow=</span><span class="dv">1</span>)</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/unnamed-chunk-3-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>You can add a third variable, like class, to a two dimensional scatterplot by mapping it to an aesthetic. An aesthetic is a visual property of the objects in your plot.Aesthetics include things like the size, the shape, or the color of your points. You can display a point in
different ways by changing the values of its aesthetic properties.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb121-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class))</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/coloring-1.png" width="70%" style="display: block; margin: auto;" />
Notice that a legend is automatically created.
Grouping variables, such as color, might include:</p>
<p>position (i.e., on the x and y axes)
color (“outside” color)
fill (“inside” color)
shape (of points)
linetype
size</p>
<p>##Linetypes</p>
<p>Here are the linetypes</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" data-line-number="1">generateRLineTypes&lt;-<span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb122-2" data-line-number="2">  oldPar&lt;-<span class="kw">par</span>()</a>
<a class="sourceLine" id="cb122-3" data-line-number="3">  <span class="kw">par</span>(<span class="dt">font=</span><span class="dv">2</span>, <span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb122-4" data-line-number="4">  <span class="kw">plot</span>(<span class="dv">1</span>, <span class="dt">pch=</span><span class="st">&quot;&quot;</span>, <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">6</span>), <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="fl">0.7</span>),  <span class="dt">axes=</span><span class="ot">FALSE</span>,<span class="dt">xlab=</span><span class="st">&quot;&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb122-5" data-line-number="5">  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">0</span><span class="op">:</span><span class="dv">6</span>) <span class="kw">lines</span>(<span class="kw">c</span>(<span class="fl">0.3</span>,<span class="fl">0.7</span>), <span class="kw">c</span>(i,i), <span class="dt">lty=</span>i, <span class="dt">lwd=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb122-6" data-line-number="6">  <span class="kw">text</span>(<span class="kw">rep</span>(<span class="fl">0.1</span>,<span class="dv">6</span>), <span class="dv">0</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;0.&#39;blank&#39;&quot;</span>, <span class="st">&quot;1.&#39;solid&#39;&quot;</span>, <span class="st">&quot;2.&#39;dashed&#39;&quot;</span>, <span class="st">&quot;3.&#39;dotted&#39;&quot;</span>,</a>
<a class="sourceLine" id="cb122-7" data-line-number="7">                                 <span class="st">&quot;4.&#39;dotdash&#39;&quot;</span>, <span class="st">&quot;5.&#39;longdash&#39;&quot;</span>, <span class="st">&quot;6.&#39;twodash&#39;&quot;</span>))</a>
<a class="sourceLine" id="cb122-8" data-line-number="8">  <span class="kw">par</span>(<span class="dt">mar=</span>oldPar<span class="op">$</span>mar,<span class="dt">font=</span>oldPar<span class="op">$</span>font )</a>
<a class="sourceLine" id="cb122-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb122-10" data-line-number="10"><span class="kw">generateRLineTypes</span>()</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/linetypes-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>##Symbols</p>
<p>Here’s an example of symbols and their numbers</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" data-line-number="1">d &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">p=</span><span class="kw">c</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">25</span>,<span class="dv">32</span><span class="op">:</span><span class="dv">127</span>))</a>
<a class="sourceLine" id="cb123-2" data-line-number="2"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb123-3" data-line-number="3"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">name=</span><span class="st">&quot;&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb123-4" data-line-number="4"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">name=</span><span class="st">&quot;&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb123-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_shape_identity</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb123-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data=</span>d, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>p<span class="op">%%</span><span class="dv">16</span>, <span class="dt">y=</span>p<span class="op">%/%</span><span class="dv">16</span>, <span class="dt">shape=</span>p), <span class="dt">size=</span><span class="dv">5</span>, <span class="dt">fill=</span><span class="st">&quot;red&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb123-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">data=</span>d, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>p<span class="op">%%</span><span class="dv">16</span>, <span class="dt">y=</span>p<span class="op">%/%</span><span class="dv">16</span><span class="fl">+0.25</span>, <span class="dt">label=</span>p), <span class="dt">size=</span><span class="dv">3</span>)</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/symbols-1.png" width="70%" style="display: block; margin: auto;" />
There are 32 quickly referenced geoms, including:</p>
<p>geom_abline<br />
geom_blank<br />
geom_errorbar<br />
geom_errorbarh<br />
geom_hline<br />
geom_jitter<br />
geom_linerange<br />
geom_point<br />
geom_pointrange<br />
geom_polygon<br />
geom_rect<br />
geom_rug<br />
geom_segment<br />
geom_step<br />
geom_text<br />
geom_vline</p>
<p>See them all here: <a href="http://sape.inf.usi.ch/quick-reference/ggplot2/geom" class="uri">http://sape.inf.usi.ch/quick-reference/ggplot2/geom</a></p>
<p>Try them now.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb124-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb124-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">linetype =</span> class)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> class))</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/linetype-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><strong>Challenge 3</strong>
What happens if you move the grouping aesthetic “color = class” to the ggplot() function? Why?</p>
<p>Try it:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb125-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(...) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p>##Play time
Keep in mind which geoms you would like to apply to your data.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="kw">load</span>(<span class="st">&quot;data/eyedata.RData&quot;</span>)</a>
<a class="sourceLine" id="cb126-2" data-line-number="2"></a>
<a class="sourceLine" id="cb126-3" data-line-number="3"><span class="co"># View(df)</span></a>
<a class="sourceLine" id="cb126-4" data-line-number="4"></a>
<a class="sourceLine" id="cb126-5" data-line-number="5">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb126-6" data-line-number="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dif =</span> Stop <span class="op">-</span><span class="st"> </span>Start) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb126-7" data-line-number="7"><span class="st">  </span><span class="kw">group_by</span>(Participant) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb126-8" data-line-number="8"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Participant, <span class="dt">y =</span> dif, <span class="dt">group =</span> Participant)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb126-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a>
<a class="sourceLine" id="cb126-10" data-line-number="10"><span class="co">#&gt; Warning: Removed 2 rows containing non-finite values (stat_boxplot).</span></a>
<a class="sourceLine" id="cb126-11" data-line-number="11"></a>
<a class="sourceLine" id="cb126-12" data-line-number="12">df &lt;-<span class="st"> </span>mpg</a>
<a class="sourceLine" id="cb126-13" data-line-number="13"></a>
<a class="sourceLine" id="cb126-14" data-line-number="14">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb126-15" data-line-number="15"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bin2d</span>()</a>
<a class="sourceLine" id="cb126-16" data-line-number="16"></a>
<a class="sourceLine" id="cb126-17" data-line-number="17">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb126-18" data-line-number="18"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> manufacturer)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb126-19" data-line-number="19"><span class="st">  </span><span class="kw">stat_count</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb126-20" data-line-number="20"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/play-1.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/play-2.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/play-3.png" width="70%" style="display: block; margin: auto;" /></p>
<p>If you really want to create some ridiculous plots…</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" data-line-number="1"><span class="co">#install.packages(&quot;ggthemes&quot;)</span></a>
<a class="sourceLine" id="cb127-2" data-line-number="2"><span class="co">#install.packages(&quot;xkcd&quot;)</span></a>
<a class="sourceLine" id="cb127-3" data-line-number="3"><span class="kw">require</span>(ggthemes)</a>
<a class="sourceLine" id="cb127-4" data-line-number="4"><span class="co">#&gt; Loading required package: ggthemes</span></a>
<a class="sourceLine" id="cb127-5" data-line-number="5"><span class="kw">require</span>(xkcd)</a>
<a class="sourceLine" id="cb127-6" data-line-number="6"><span class="co">#&gt; Loading required package: xkcd</span></a>
<a class="sourceLine" id="cb127-7" data-line-number="7"><span class="co">#&gt; Loading required package: extrafont</span></a>
<a class="sourceLine" id="cb127-8" data-line-number="8"><span class="co">#&gt; Registering fonts with R</span></a>
<a class="sourceLine" id="cb127-9" data-line-number="9"></a>
<a class="sourceLine" id="cb127-10" data-line-number="10"><span class="cf">if</span>( <span class="st">&#39;xkcd&#39;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">fonts</span>()) {</a>
<a class="sourceLine" id="cb127-11" data-line-number="11">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x=</span>mpg, <span class="dt">y=</span>wt), <span class="dt">data=</span>mtcars) <span class="op">+</span></a>
<a class="sourceLine" id="cb127-12" data-line-number="12"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">family =</span> <span class="st">&quot;xkcd&quot;</span>))</a>
<a class="sourceLine" id="cb127-13" data-line-number="13">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb127-14" data-line-number="14">  <span class="kw">warning</span>(<span class="st">&quot;No xkcd fonts installed!&quot;</span>)</a>
<a class="sourceLine" id="cb127-15" data-line-number="15">  p &lt;-<span class="st"> </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x=</span>mpg, <span class="dt">y=</span>wt), <span class="dt">data=</span>mtcars)</a>
<a class="sourceLine" id="cb127-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb127-17" data-line-number="17">p</a>
<a class="sourceLine" id="cb127-18" data-line-number="18"><span class="co">### How to get it (I wouldn&#39;t mess with this unless you know about installing fonts) </span><span class="al">###</span></a>
<a class="sourceLine" id="cb127-19" data-line-number="19"><span class="co"># download.file(&quot;http://simonsoftware.se/other/xkcd.ttf&quot;,dest=&quot;xkcd.ttf&quot;, mode=&quot;wb&quot;)</span></a>
<a class="sourceLine" id="cb127-20" data-line-number="20"><span class="co"># system(&quot;mkdir ~/.fonts&quot;)</span></a>
<a class="sourceLine" id="cb127-21" data-line-number="21"><span class="co"># system(&quot;cp ~/.fonts/xkcd.ttf&quot;)</span></a>
<a class="sourceLine" id="cb127-22" data-line-number="22"><span class="co"># font_import(pattern = &quot;xkcd&quot;, prompt=FALSE)</span></a>
<a class="sourceLine" id="cb127-23" data-line-number="23"><span class="co"># fonts()</span></a>
<a class="sourceLine" id="cb127-24" data-line-number="24"><span class="co"># fonttable()</span></a>
<a class="sourceLine" id="cb127-25" data-line-number="25"><span class="co"># </span></a>
<a class="sourceLine" id="cb127-26" data-line-number="26"><span class="co"># if(.Platform$OS.type != &quot;unix&quot;) {</span></a>
<a class="sourceLine" id="cb127-27" data-line-number="27"><span class="co">#    ## Register fonts for Windows bitmap output</span></a>
<a class="sourceLine" id="cb127-28" data-line-number="28"><span class="co">#      loadfonts(device=&quot;pdf&quot;)</span></a>
<a class="sourceLine" id="cb127-29" data-line-number="29"><span class="co">#    } else {</span></a>
<a class="sourceLine" id="cb127-30" data-line-number="30"><span class="co">#     loadfonts()</span></a>
<a class="sourceLine" id="cb127-31" data-line-number="31"><span class="co">#     }</span></a>
<a class="sourceLine" id="cb127-32" data-line-number="32"></a>
<a class="sourceLine" id="cb127-33" data-line-number="33"></a>
<a class="sourceLine" id="cb127-34" data-line-number="34"><span class="co">#### All of the code below should work unless it&#39;s xkcd related and you haven&#39;t</span></a>
<a class="sourceLine" id="cb127-35" data-line-number="35"><span class="co">#### installed the fonts.</span></a>
<a class="sourceLine" id="cb127-36" data-line-number="36"></a>
<a class="sourceLine" id="cb127-37" data-line-number="37">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb127-38" data-line-number="38"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> manufacturer)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb127-39" data-line-number="39"><span class="st">  </span><span class="kw">stat_count</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_fivethirtyeight</span>() <span class="op">+</span><span class="st"> </span><span class="co">#fivethirtyeight theme</span></a>
<a class="sourceLine" id="cb127-40" data-line-number="40"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Look at me </span><span class="ch">\n</span><span class="st"> I&#39;m Nate Silver&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb127-41" data-line-number="41"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb127-42" data-line-number="42">        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">.5</span>))</a>
<a class="sourceLine" id="cb127-43" data-line-number="43"></a>
<a class="sourceLine" id="cb127-44" data-line-number="44"></a>
<a class="sourceLine" id="cb127-45" data-line-number="45">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb127-46" data-line-number="46"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> manufacturer)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb127-47" data-line-number="47"><span class="st">  </span><span class="kw">stat_count</span>(<span class="dt">fill =</span> <span class="st">&quot;#D4E8E7&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_tufte</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb127-48" data-line-number="48"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;...or Edward Tufte&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb127-49" data-line-number="49"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb127-50" data-line-number="50">        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">.5</span>))</a>
<a class="sourceLine" id="cb127-51" data-line-number="51"></a>
<a class="sourceLine" id="cb127-52" data-line-number="52"></a>
<a class="sourceLine" id="cb127-53" data-line-number="53">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb127-54" data-line-number="54"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> manufacturer)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb127-55" data-line-number="55"><span class="st">  </span><span class="kw">stat_count</span>(<span class="dt">position =</span> <span class="kw">position_jitter</span>(<span class="dt">h =</span> <span class="fl">0.0005</span>), <span class="dt">fill =</span> <span class="st">&quot;grey&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb127-56" data-line-number="56"><span class="st">  </span><span class="kw">theme_xkcd</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb127-57" data-line-number="57"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Now I&#39;m Randall Munroe&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb127-58" data-line-number="58"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb127-59" data-line-number="59">        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">.5</span>))</a>
<a class="sourceLine" id="cb127-60" data-line-number="60"></a>
<a class="sourceLine" id="cb127-61" data-line-number="61">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb127-62" data-line-number="62"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb127-63" data-line-number="63"><span class="st">  </span><span class="kw">theme_xkcd</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb127-64" data-line-number="64"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Because who needs </span><span class="ch">\n</span><span class="st"> to interpret your plots?&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb127-65" data-line-number="65"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> cyl),</a>
<a class="sourceLine" id="cb127-66" data-line-number="66">             <span class="dt">alpha =</span> <span class="fl">.5</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb127-67" data-line-number="67"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">.5</span>))</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/themes-1.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/themes-2.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/themes-3.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/themes-4.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/themes-5.png" width="70%" style="display: block; margin: auto;" />
Now for serious plots</p>
<p><strong>Challenge 4</strong></p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb128-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>))</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/darkgreen-1.png" width="70%" style="display: block; margin: auto;" />
Why are the dots not blue?</p>
<p>facet_wrap can create multiple plots based on levels of a factor (column)…</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb129-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb129-3" data-line-number="3"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>class, <span class="dt">nrow =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/wrapping-1.png" width="70%" style="display: block; margin: auto;" />
facet_grid takes slightly different arguments, and facets the plot on two variables…</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb130-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb130-3" data-line-number="3"><span class="st">  </span><span class="kw">facet_grid</span>(drv <span class="op">~</span><span class="st"> </span>cyl)</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/grid-1.png" width="70%" style="display: block; margin: auto;" />
If you prefer to not facet in the rows or columns dimension, use a . instead of a variable name, e.g. + facet_grid(. ~ cyl).</p>
<p>…facet on a continuous variable?</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb131-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> class, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb131-3" data-line-number="3"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>cty)</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/wrapcont-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><strong>Challenge 5</strong><br />
What plots does the following code make? What does . do?</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb132-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb132-3" data-line-number="3"><span class="st">  </span><span class="kw">facet_grid</span>(drv <span class="op">~</span><span class="st"> </span>.)</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/challenge5-1.png" width="70%" style="display: block; margin: auto;" />
hint: try switching the . and drv</p>
<p>You can group by color, shape, linetype, etc. or facet, but you can also apply geoms to only a subset of the data. Below, our smooth line displays just a subset of the mpg dataset, the subcompact cars. The local data argument in geom_smooth() overrides the global data argument in ggplot() for that layer only.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb133-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">color =</span> class)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb133-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">data =</span> <span class="kw">filter</span>(mpg, class <span class="op">==</span><span class="st"> &quot;pickup&quot;</span>), <span class="dt">se =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb133-4" data-line-number="4"><span class="co">#&gt; `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</span></a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/se-1.png" width="70%" style="display: block; margin: auto;" />
Notice how we used the filter function in the geom function?</p>
<div id="statistical-transformations" class="section level2">
<h2><span class="header-section-number">6.1</span> Statistical Transformations</h2>
<p>Let’s get a new dataset:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1">df &lt;-<span class="st"> </span>ggplot2<span class="op">::</span>diamonds</a></code></pre></div>
<p>Look in the usual places for information on your diamonds datset.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb135-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb135-3" data-line-number="3"><span class="st">  </span><span class="kw">theme_classic</span>()</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/daimonddim-1.png" width="70%" style="display: block; margin: auto;" />
In this case, the geom_bar function has a “count” statistic. <code>count</code> is the default statistic for <code>geom_bar()</code> You can change it</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb136-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut),<span class="dt">stat =</span> <span class="st">&quot;density&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb136-3" data-line-number="3"><span class="st">  </span><span class="kw">theme_classic</span>()</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/dens-1.png" width="70%" style="display: block; margin: auto;" />
…but it doesn’t make sense because we have a categorical variable on the x-axis. Remember…</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" data-line-number="1">?geom_bar</a></code></pre></div>
<p>We can also do the counting beforehand and then plot with the “identity” statistic…</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb138-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(cut) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb138-3" data-line-number="3"><span class="st">  </span><span class="kw">count</span>() </a>
<a class="sourceLine" id="cb138-4" data-line-number="4"><span class="co">#&gt; # A tibble: 5 x 2</span></a>
<a class="sourceLine" id="cb138-5" data-line-number="5"><span class="co">#&gt; # Groups:   cut [5]</span></a>
<a class="sourceLine" id="cb138-6" data-line-number="6"><span class="co">#&gt;   cut           n</span></a>
<a class="sourceLine" id="cb138-7" data-line-number="7"><span class="co">#&gt;   &lt;ord&gt;     &lt;int&gt;</span></a>
<a class="sourceLine" id="cb138-8" data-line-number="8"><span class="co">#&gt; 1 Fair       1610</span></a>
<a class="sourceLine" id="cb138-9" data-line-number="9"><span class="co">#&gt; 2 Good       4906</span></a>
<a class="sourceLine" id="cb138-10" data-line-number="10"><span class="co">#&gt; 3 Very Good 12082</span></a>
<a class="sourceLine" id="cb138-11" data-line-number="11"><span class="co">#&gt; 4 Premium   13791</span></a>
<a class="sourceLine" id="cb138-12" data-line-number="12"><span class="co">#&gt; 5 Ideal     21551</span></a></code></pre></div>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb139-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(cut) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb139-3" data-line-number="3"><span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb139-4" data-line-number="4"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> n),<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb139-5" data-line-number="5"><span class="st">  </span><span class="kw">theme_classic</span>()</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/classic-1.png" width="70%" style="display: block; margin: auto;" />
Now we had to specify the y value because that is how high the bar should be.</p>
<p>We can also use geom_point with stat = “identity”, which usually creates scatterplots</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb140-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(cut) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb140-3" data-line-number="3"><span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb140-4" data-line-number="4"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> n),<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb140-5" data-line-number="5"><span class="st">  </span><span class="kw">theme_classic</span>()</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/cutgroup-1.png" width="70%" style="display: block; margin: auto;" />
Here’s a cool trick, we can use proportion in the argument to get fractions of the whole:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb141-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> ..prop.., <span class="dt">group =</span> <span class="dv">1</span>))</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/group1-1.png" width="70%" style="display: block; margin: auto;" />
Notice that we had to specify the computed variable in dots ..“stat”..</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb142-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> ..count.., <span class="dt">group =</span> <span class="dv">1</span>))</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/ycount-1.png" width="70%" style="display: block; margin: auto;" />
also you have to specify that the proportion is out of a group of 1 and not cut. Otherwise they would all be a proportion of 1 for their group.</p>
<p>We can do this before in the data.frame as well:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" data-line-number="1">df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb143-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(cut) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb143-3" data-line-number="3"><span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb143-4" data-line-number="4"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb143-5" data-line-number="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop =</span> n<span class="op">/</span><span class="kw">sum</span>(n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb143-6" data-line-number="6"><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> prop), <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/sum-1.png" width="70%" style="display: block; margin: auto;" />
You can get summary stats inside ggplot with stat_summary:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb144-2" data-line-number="2"><span class="st">  </span><span class="kw">stat_summary</span>(</a>
<a class="sourceLine" id="cb144-3" data-line-number="3">    <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> depth),</a>
<a class="sourceLine" id="cb144-4" data-line-number="4">    <span class="dt">fun.ymin =</span> min,</a>
<a class="sourceLine" id="cb144-5" data-line-number="5">    <span class="dt">fun.ymax =</span> max,</a>
<a class="sourceLine" id="cb144-6" data-line-number="6">    <span class="dt">fun.y =</span> median</a>
<a class="sourceLine" id="cb144-7" data-line-number="7">  )</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/allstats-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="changing-the-position" class="section level2">
<h2><span class="header-section-number">6.2</span> Changing the position</h2>
<p>We can also fill, stack, dodge and jitter our geoms:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb145-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">colour =</span> cut)) <span class="co">#color is the outside</span></a>
<a class="sourceLine" id="cb145-3" data-line-number="3"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb145-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">fill =</span> cut)) <span class="co">#fill is the inside</span></a>
<a class="sourceLine" id="cb145-5" data-line-number="5"></a>
<a class="sourceLine" id="cb145-6" data-line-number="6"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb145-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">fill =</span> clarity)) <span class="co">#fill by a group NOT on the x axis</span></a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/positions-1.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/positions-2.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/positions-3.png" width="70%" style="display: block; margin: auto;" />
Remember colorBrewer?</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="kw">require</span>(RColorBrewer)</a>
<a class="sourceLine" id="cb146-2" data-line-number="2"><span class="co">#&gt; Loading required package: RColorBrewer</span></a>
<a class="sourceLine" id="cb146-3" data-line-number="3"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb146-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">fill =</span> clarity)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb146-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette =</span> <span class="dv">4</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/brewer-1.png" width="70%" style="display: block; margin: auto;" />
The stacking is performed automatically by the position adjustment specified by the position argument. If you don’t want a stacked bar chart, you can use one of three other options: “identity”, “dodge” or “fill”.</p>
<p>position = “identity” will place each object exactly where it falls in the context of the graph.
This is not very useful for bars, because it overlaps them. To see that overlapping we either need to make the bars slightly transparent by setting alpha to a small value, or completely transparent by setting fill = NA.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">fill =</span> clarity)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb147-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">5</span>, <span class="dt">position =</span> <span class="st">&quot;identity&quot;</span>)</a>
<a class="sourceLine" id="cb147-3" data-line-number="3"><span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">colour =</span> clarity)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb147-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">position =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_classic</span>()</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/bars-1.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/bars-2.png" width="70%" style="display: block; margin: auto;" />
The identity position adjustment is more useful for 2d geoms, like points, where it is the default.</p>
<p>position = “fill” works like stacking, but makes each set of stacked bars the same height.
This makes it easier to compare proportions across groups.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb148-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">fill =</span> clarity), <span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>)</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/masbars-1.png" width="70%" style="display: block; margin: auto;" />
position = “dodge” places overlapping objects directly beside one another.
This makes it easier to compare individual values.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb149-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">fill =</span> clarity), <span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb149-3" data-line-number="3"><span class="st">  </span><span class="kw">theme_minimal</span>()</a>
<a class="sourceLine" id="cb149-4" data-line-number="4"></a>
<a class="sourceLine" id="cb149-5" data-line-number="5"><span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="kw">aes</span>(<span class="dt">x =</span> price, <span class="dt">y =</span> carat)) <span class="op">+</span></a>
<a class="sourceLine" id="cb149-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">position =</span> <span class="st">&quot;jitter&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_light</span>() <span class="co">#position jitter adds randomness</span></a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/jitter-1.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/jitter-2.png" width="70%" style="display: block; margin: auto;" />
There are packages that deal with overplotting, but some geoms make this easy as well.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="kw">aes</span>(<span class="dt">x =</span> price, <span class="dt">y =</span> carat)) <span class="op">+</span></a>
<a class="sourceLine" id="cb150-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bin2d</span>()</a>
<a class="sourceLine" id="cb150-3" data-line-number="3"></a>
<a class="sourceLine" id="cb150-4" data-line-number="4"><span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="kw">aes</span>(<span class="dt">x =</span> price, <span class="dt">y =</span> carat)) <span class="op">+</span></a>
<a class="sourceLine" id="cb150-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_density2d</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_classic</span>()</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/bin2d-1.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/bin2d-2.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="coordinates" class="section level2">
<h2><span class="header-section-number">6.3</span> Coordinates</h2>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" data-line-number="1"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> depth)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>()</a>
<a class="sourceLine" id="cb151-2" data-line-number="2"></a>
<a class="sourceLine" id="cb151-3" data-line-number="3"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> depth)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb151-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb151-5" data-line-number="5"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/coords-1.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/coords-2.png" width="70%" style="display: block; margin: auto;" /></p>
<div id="plot-maps-if-you-want" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Plot maps if you want</h3>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1"><span class="co"># install.packages(&quot;maps&quot;)</span></a>
<a class="sourceLine" id="cb152-2" data-line-number="2"><span class="kw">require</span>(maps)</a>
<a class="sourceLine" id="cb152-3" data-line-number="3"><span class="co">#&gt; Loading required package: maps</span></a>
<a class="sourceLine" id="cb152-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb152-5" data-line-number="5"><span class="co">#&gt; Attaching package: &#39;maps&#39;</span></a>
<a class="sourceLine" id="cb152-6" data-line-number="6"><span class="co">#&gt; The following object is masked from &#39;package:purrr&#39;:</span></a>
<a class="sourceLine" id="cb152-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb152-8" data-line-number="8"><span class="co">#&gt;     map</span></a>
<a class="sourceLine" id="cb152-9" data-line-number="9">globe &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="dt">map =</span> <span class="st">&quot;world&quot;</span>)</a>
<a class="sourceLine" id="cb152-10" data-line-number="10"></a>
<a class="sourceLine" id="cb152-11" data-line-number="11"><span class="kw">ggplot</span>(globe, <span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group)) <span class="op">+</span></a>
<a class="sourceLine" id="cb152-12" data-line-number="12"><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>)</a>
<a class="sourceLine" id="cb152-13" data-line-number="13"></a>
<a class="sourceLine" id="cb152-14" data-line-number="14"><span class="kw">unique</span>(globe<span class="op">$</span>region)[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</a>
<a class="sourceLine" id="cb152-15" data-line-number="15"><span class="co">#&gt;  [1] &quot;Aruba&quot;                &quot;Afghanistan&quot;          &quot;Angola&quot;              </span></a>
<a class="sourceLine" id="cb152-16" data-line-number="16"><span class="co">#&gt;  [4] &quot;Anguilla&quot;             &quot;Albania&quot;              &quot;Finland&quot;             </span></a>
<a class="sourceLine" id="cb152-17" data-line-number="17"><span class="co">#&gt;  [7] &quot;Andorra&quot;              &quot;United Arab Emirates&quot; &quot;Argentina&quot;           </span></a>
<a class="sourceLine" id="cb152-18" data-line-number="18"><span class="co">#&gt; [10] &quot;Armenia&quot;</span></a>
<a class="sourceLine" id="cb152-19" data-line-number="19"></a>
<a class="sourceLine" id="cb152-20" data-line-number="20">newplaces &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="dt">map =</span> <span class="st">&quot;world&quot;</span>, <span class="dt">region =</span> <span class="st">&quot;Vanuatu&quot;</span>)</a>
<a class="sourceLine" id="cb152-21" data-line-number="21"></a>
<a class="sourceLine" id="cb152-22" data-line-number="22"><span class="kw">ggplot</span>(newplaces, <span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group)) <span class="op">+</span></a>
<a class="sourceLine" id="cb152-23" data-line-number="23"><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb152-24" data-line-number="24"><span class="st">  </span><span class="kw">coord_quickmap</span>() <span class="co">#This adds lat and long</span></a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/maps-1.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/maps-2.png" width="70%" style="display: block; margin: auto;" />
Plot with flipped axes or in polar coordinates…</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" data-line-number="1">bar &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> df) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb153-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(</a>
<a class="sourceLine" id="cb153-3" data-line-number="3">    <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">fill =</span> cut), </a>
<a class="sourceLine" id="cb153-4" data-line-number="4">    <span class="dt">show.legend =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb153-5" data-line-number="5">    <span class="dt">width =</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb153-6" data-line-number="6">  ) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb153-7" data-line-number="7"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">aspect.ratio =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb153-8" data-line-number="8"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb153-9" data-line-number="9"></a>
<a class="sourceLine" id="cb153-10" data-line-number="10">bar <span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>()</a>
<a class="sourceLine" id="cb153-11" data-line-number="11">bar <span class="op">+</span><span class="st"> </span><span class="kw">coord_polar</span>()</a></code></pre></div>
<p><img src="05_Visualize_files/figure-html/polar-1.png" width="70%" style="display: block; margin: auto;" /><img src="05_Visualize_files/figure-html/polar-2.png" width="70%" style="display: block; margin: auto;" />
So much you can do!</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-transformation-day-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-statistics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://spencercastro.com/05_Visualize.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
