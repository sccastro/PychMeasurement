<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Data Transformation | Data Analysis and Optimization in R</title>
  <meta name="description" content="As modern Data Scientists, we cannot be content with untested assumptions, decisions based on the “gut feelings” of a CEO, poorly leveraged data insights, or small sample sizes; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze and vizualize any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing projects and goals into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Data Transformation | Data Analysis and Optimization in R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://spencercastro.com/assets/image/ucmSeals/UCM_Seal_FullColor_2019.png" />
  <meta property="og:description" content="As modern Data Scientists, we cannot be content with untested assumptions, decisions based on the “gut feelings” of a CEO, poorly leveraged data insights, or small sample sizes; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze and vizualize any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing projects and goals into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="github-repo" content="sccastro/PsychMeasurement" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Data Transformation | Data Analysis and Optimization in R" />
  
  <meta name="twitter:description" content="As modern Data Scientists, we cannot be content with untested assumptions, decisions based on the “gut feelings” of a CEO, poorly leveraged data insights, or small sample sizes; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze and vizualize any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing projects and goals into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="twitter:image" content="https://spencercastro.com/assets/image/ucmSeals/UCM_Seal_FullColor_2019.png" />

<meta name="author" content="Spencer Castro" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="importing-data.html"/>
<link rel="next" href="data-transformation-day-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="class_book.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Data Analysis and Optimization in R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#instructor-information"><i class="fa fa-check"></i><b>0.1</b> Instructor Information</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#books"><i class="fa fa-check"></i><b>0.2</b> Books</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#course-overview"><i class="fa fa-check"></i><b>0.3</b> Course Overview</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#learning-outcomes-course-objectives"><i class="fa fa-check"></i><b>0.4</b> Learning Outcomes &amp; Course Objectives</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#course-format"><i class="fa fa-check"></i><b>0.5</b> Course Format</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#evaluation-methodsassignments"><i class="fa fa-check"></i><b>0.6</b> Evaluation Methods/Assignments</a></li>
<li class="chapter" data-level="0.7" data-path="index.html"><a href="index.html#grading-policy"><i class="fa fa-check"></i><b>0.7</b> Grading Policy</a></li>
<li class="chapter" data-level="0.8" data-path="index.html"><a href="index.html#student-rights-and-responsibilities"><i class="fa fa-check"></i><b>0.8</b> Student Rights and Responsibilities</a></li>
<li class="chapter" data-level="0.9" data-path="index.html"><a href="index.html#course-policies"><i class="fa fa-check"></i><b>0.9</b> Course Policies</a></li>
<li class="chapter" data-level="0.10" data-path="index.html"><a href="index.html#university-attendance-requirements"><i class="fa fa-check"></i><b>0.10</b> University Attendance Requirements</a></li>
<li class="chapter" data-level="0.11" data-path="index.html"><a href="index.html#student-support-accommodations"><i class="fa fa-check"></i><b>0.11</b> Student Support &amp; Accommodations</a></li>
<li class="chapter" data-level="0.12" data-path="index.html"><a href="index.html#academic-calendar"><i class="fa fa-check"></i><b>0.12</b> Academic Calendar</a></li>
<li class="chapter" data-level="0.13" data-path="index.html"><a href="index.html#course-schedule"><i class="fa fa-check"></i><b>0.13</b> Course Schedule</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#baser-walkthrough"><i class="fa fa-check"></i>BaseR walkthrough</a></li>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#help"><i class="fa fa-check"></i><b>1.1</b> Help</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#vectors"><i class="fa fa-check"></i><b>1.2</b> VECTORS</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#programming"><i class="fa fa-check"></i><b>1.3</b> PROGRAMMING</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#for-loop"><i class="fa fa-check"></i><b>1.3.1</b> For loop</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#while-loop"><i class="fa fa-check"></i><b>1.3.2</b> While loop</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction.html"><a href="introduction.html#ifelse-statement"><i class="fa fa-check"></i><b>1.3.3</b> Ifelse statement</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction.html"><a href="introduction.html#function"><i class="fa fa-check"></i><b>1.3.4</b> Function</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#assignment-1"><i class="fa fa-check"></i><b>1.4</b> Assignment 1</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>2</b> Importing Data</a>
<ul>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#reading-files-into-r"><i class="fa fa-check"></i>Reading files into R</a></li>
<li class="chapter" data-level="2.1" data-path="importing-data.html"><a href="importing-data.html#whats-a-tibble"><i class="fa fa-check"></i><b>2.1</b> What’s a tibble?</a></li>
<li class="chapter" data-level="2.2" data-path="importing-data.html"><a href="importing-data.html#save-your-dataset"><i class="fa fa-check"></i><b>2.2</b> Save your dataset:</a></li>
<li class="chapter" data-level="2.3" data-path="importing-data.html"><a href="importing-data.html#cleaning-your-data-file"><i class="fa fa-check"></i><b>2.3</b> Cleaning your data file</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data Transformation</a>
<ul>
<li class="chapter" data-level="" data-path="data-transformation.html"><a href="data-transformation.html#data-transformation-with-dplyr"><i class="fa fa-check"></i>Data Transformation with Dplyr</a></li>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#get-a-dataset-from-your-.rdata-file"><i class="fa fa-check"></i><b>3.1</b> Get a dataset from your .RData file</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#introduction-to-the-pipe"><i class="fa fa-check"></i><b>3.2</b> Introduction to “The Pipe”</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#aside-on-the-apply-family"><i class="fa fa-check"></i><b>3.3</b> Aside on the apply family</a></li>
<li class="chapter" data-level="3.4" data-path="data-transformation.html"><a href="data-transformation.html#extracting-rows"><i class="fa fa-check"></i><b>3.4</b> Extracting rows</a></li>
<li class="chapter" data-level="3.5" data-path="data-transformation.html"><a href="data-transformation.html#pivoting-separating-and-uniting"><i class="fa fa-check"></i><b>3.5</b> Pivoting, Separating and Uniting</a></li>
<li class="chapter" data-level="3.6" data-path="data-transformation.html"><a href="data-transformation.html#solutions-to-challenges"><i class="fa fa-check"></i><b>3.6</b> Solutions to Challenges</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html"><i class="fa fa-check"></i><b>4</b> Data Transformation Day 2</a>
<ul>
<li class="chapter" data-level="" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#day-2"><i class="fa fa-check"></i>Day 2</a></li>
<li class="chapter" data-level="4.1" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#change-the-order-of-the-levels"><i class="fa fa-check"></i><b>4.1</b> Change the order of the levels</a></li>
<li class="chapter" data-level="4.2" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#rcolorbrewer"><i class="fa fa-check"></i><b>4.2</b> RcolorBrewer</a></li>
<li class="chapter" data-level="4.3" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#modifying-factor-levels"><i class="fa fa-check"></i><b>4.3</b> Modifying Factor Levels</a></li>
<li class="chapter" data-level="4.4" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#play-time"><i class="fa fa-check"></i><b>4.4</b> Play time</a></li>
<li class="chapter" data-level="4.5" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#solutions"><i class="fa fa-check"></i><b>4.5</b> Solutions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>5</b> Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#steps-of-visualization"><i class="fa fa-check"></i>Steps of Visualization</a></li>
<li class="chapter" data-level="5.1" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#ggplot2"><i class="fa fa-check"></i><b>5.1</b> ggplot2</a></li>
<li class="chapter" data-level="5.2" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#linetypes"><i class="fa fa-check"></i><b>5.2</b> Linetypes</a></li>
<li class="chapter" data-level="5.3" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#symbols"><i class="fa fa-check"></i><b>5.3</b> Symbols</a></li>
<li class="chapter" data-level="5.4" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#play-time-1"><i class="fa fa-check"></i><b>5.4</b> Play time</a></li>
<li class="chapter" data-level="5.5" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#statistical-transformations"><i class="fa fa-check"></i><b>5.5</b> Statistical Transformations</a></li>
<li class="chapter" data-level="5.6" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#changing-the-position"><i class="fa fa-check"></i><b>5.6</b> Changing the position</a></li>
<li class="chapter" data-level="5.7" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#coordinates"><i class="fa fa-check"></i><b>5.7</b> Coordinates</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#plot-maps-if-you-want"><i class="fa fa-check"></i><b>5.7.1</b> Plot maps if you want</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html"><i class="fa fa-check"></i><b>6</b> Introduction to Statistics</a>
<ul>
<li class="chapter" data-level="" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#stats"><i class="fa fa-check"></i>Stats</a></li>
<li class="chapter" data-level="6.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#steps-of-visualization-1"><i class="fa fa-check"></i><b>6.1</b> Steps of Visualization</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#descriptive-stats"><i class="fa fa-check"></i><b>6.1.1</b> Descriptive Stats</a></li>
<li class="chapter" data-level="6.1.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>6.1.2</b> Measures of Central Tendency</a></li>
<li class="chapter" data-level="6.1.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-variability"><i class="fa fa-check"></i><b>6.1.3</b> Measures of Variability</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#clinical-trial-example"><i class="fa fa-check"></i><b>6.2</b> Clinical Trial Example</a></li>
<li class="chapter" data-level="6.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlations"><i class="fa fa-check"></i><b>6.3</b> Correlations</a></li>
<li class="chapter" data-level="6.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#categorical-data-navarro-pg.-351"><i class="fa fa-check"></i><b>6.4</b> Categorical Data – Navarro pg. 351</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chi-square-goodness-of-fit-test-pearson-1900-review"><i class="fa fa-check"></i><b>6.4.1</b> Chi Square goodness-of-fit test (Pearson, 1900) Review</a></li>
<li class="chapter" data-level="6.4.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chi-square-test-of-independence"><i class="fa fa-check"></i><b>6.4.2</b> Chi-square test of independence</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#t.test"><i class="fa fa-check"></i><b>6.5</b> T.TEST</a></li>
<li class="chapter" data-level="6.6" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#effect-size"><i class="fa fa-check"></i><b>6.6</b> Effect Size</a></li>
<li class="chapter" data-level="6.7" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#assumptions"><i class="fa fa-check"></i><b>6.7</b> Assumptions</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#shapiro-normality-test"><i class="fa fa-check"></i><b>6.7.1</b> Shapiro normality test</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#one-way-anova"><i class="fa fa-check"></i><b>6.8</b> One-Way ANOVA</a></li>
<li class="chapter" data-level="6.9" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#aaaanndd-regression"><i class="fa fa-check"></i><b>6.9</b> AAAANNDD Regression</a></li>
<li class="chapter" data-level="6.10" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#solutions-1"><i class="fa fa-check"></i><b>6.10</b> Solutions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="linear-models.html"><a href="linear-models.html"><i class="fa fa-check"></i><b>7</b> Linear Models</a>
<ul>
<li class="chapter" data-level="" data-path="linear-models.html"><a href="linear-models.html#steps-of-linear-models"><i class="fa fa-check"></i>Steps of Linear Models</a></li>
<li class="chapter" data-level="7.1" data-path="linear-models.html"><a href="linear-models.html#step-1.-get-your-data"><i class="fa fa-check"></i><b>7.1</b> Step 1. Get your data</a></li>
<li class="chapter" data-level="7.2" data-path="linear-models.html"><a href="linear-models.html#solutions-2"><i class="fa fa-check"></i><b>7.2</b> Solutions</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="linear-models.html"><a href="linear-models.html#challenge-2"><i class="fa fa-check"></i><b>7.2.1</b> Challenge 2</a></li>
<li class="chapter" data-level="7.2.2" data-path="linear-models.html"><a href="linear-models.html#challenge-3"><i class="fa fa-check"></i><b>7.2.2</b> Challenge 3</a></li>
<li class="chapter" data-level="7.2.3" data-path="linear-models.html"><a href="linear-models.html#challenge-4"><i class="fa fa-check"></i><b>7.2.3</b> Challenge 4</a></li>
<li class="chapter" data-level="7.2.4" data-path="linear-models.html"><a href="linear-models.html#challenge-5"><i class="fa fa-check"></i><b>7.2.4</b> Challenge 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="multilevel-models.html"><a href="multilevel-models.html"><i class="fa fa-check"></i><b>8</b> Multilevel Models</a>
<ul>
<li class="chapter" data-level="" data-path="multilevel-models.html"><a href="multilevel-models.html#steps-of-multilevel-models"><i class="fa fa-check"></i>Steps of Multilevel Models</a></li>
<li class="chapter" data-level="8.1" data-path="multilevel-models.html"><a href="multilevel-models.html#step-1.-get-your-data-1"><i class="fa fa-check"></i><b>8.1</b> Step 1. Get your data</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="multilevel-models.html"><a href="multilevel-models.html#mixed-models-in-r"><i class="fa fa-check"></i><b>8.1.1</b> Mixed models in R</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="multilevel-models.html"><a href="multilevel-models.html#solutions-3"><i class="fa fa-check"></i><b>8.2</b> Solutions</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="multilevel-models.html"><a href="multilevel-models.html#challenge-1"><i class="fa fa-check"></i><b>8.2.1</b> Challenge 1</a></li>
<li class="chapter" data-level="8.2.2" data-path="multilevel-models.html"><a href="multilevel-models.html#challenge-2-1"><i class="fa fa-check"></i><b>8.2.2</b> Challenge 2</a></li>
<li class="chapter" data-level="8.2.3" data-path="multilevel-models.html"><a href="multilevel-models.html#challenge-3-1"><i class="fa fa-check"></i><b>8.2.3</b> Challenge 3</a></li>
<li class="chapter" data-level="8.2.4" data-path="multilevel-models.html"><a href="multilevel-models.html#challenge-4-1"><i class="fa fa-check"></i><b>8.2.4</b> Challenge 4</a></li>
<li class="chapter" data-level="8.2.5" data-path="multilevel-models.html"><a href="multilevel-models.html#challenge-5-1"><i class="fa fa-check"></i><b>8.2.5</b> Challenge 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>9</b> Rmarkdown</a>
<ul>
<li class="chapter" data-level="9.1" data-path="rmarkdown.html"><a href="rmarkdown.html#basics"><i class="fa fa-check"></i><b>9.1</b> Basics</a></li>
<li class="chapter" data-level="9.2" data-path="rmarkdown.html"><a href="rmarkdown.html#output-formats"><i class="fa fa-check"></i><b>9.2</b> Output Formats</a></li>
<li class="chapter" data-level="9.3" data-path="rmarkdown.html"><a href="rmarkdown.html#rmarkdown-syntax"><i class="fa fa-check"></i><b>9.3</b> Rmarkdown Syntax</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="rmarkdown.html"><a href="rmarkdown.html#in-line-formatting"><i class="fa fa-check"></i><b>9.3.1</b> In-line Formatting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="blogdown.html"><a href="blogdown.html"><i class="fa fa-check"></i><b>10</b> Blogdown</a>
<ul>
<li class="chapter" data-level="10.1" data-path="blogdown.html"><a href="blogdown.html#rmarkdown-website"><i class="fa fa-check"></i><b>10.1</b> Rmarkdown Website</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="shiny-applications.html"><a href="shiny-applications.html"><i class="fa fa-check"></i><b>11</b> Shiny Applications</a></li>
<li class="divider"></li>
<li><a href="https://spencercastro.com/people.php" target="blank">Published by Spencer Castro</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis and Optimization in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Data Transformation<a href="data-transformation.html#data-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p>“Happy families are all alike; every unhappy family is unhappy in its
own way.”</p>
<div style="text-align: right">
<p>— Leo Tolstoy</p>
</div>
</blockquote>
<blockquote>
<p>“Tidy datasets are all alike, but every messy dataset is messy in its
own way.”</p>
<div style="text-align: right">
<p>— Hadley Wickham</p>
</div>
</blockquote>
<p>First off…</p>
<h4>
Advanced R Challenges
</h4>
<p>This challenge is to understand and use this function to read in a
series of csv files and transform them into one data.frame.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-transformation.html#cb1-1" tabindex="-1"></a></span>
<span id="cb1-2"><a href="data-transformation.html#cb1-2" tabindex="-1"></a><span class="co">#Joel&#39;s awesome function</span></span>
<span id="cb1-3"><a href="data-transformation.html#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="data-transformation.html#cb1-4" tabindex="-1"></a>combineCSV <span class="ot">&lt;-</span> <span class="cf">function</span>(fPath){ <span class="co">#see the r base cheatsheet for function syntax</span></span>
<span id="cb1-5"><a href="data-transformation.html#cb1-5" tabindex="-1"></a>  <span class="co"># List all files in the path</span></span>
<span id="cb1-6"><a href="data-transformation.html#cb1-6" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> fPath, <span class="at">recursive =</span> <span class="cn">TRUE</span>) <span class="co">#see ?list.files</span></span>
<span id="cb1-7"><a href="data-transformation.html#cb1-7" tabindex="-1"></a>  </span>
<span id="cb1-8"><a href="data-transformation.html#cb1-8" tabindex="-1"></a>  <span class="co">#separate files list and place into tibble (This is all the names and subids in the titles of the files)</span></span>
<span id="cb1-9"><a href="data-transformation.html#cb1-9" tabindex="-1"></a>  f_split <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">str_split</span>(f, <span class="st">&quot;_|/&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="co">#see ?str_split from stringr package, separated by &quot;_&quot;</span></span>
<span id="cb1-10"><a href="data-transformation.html#cb1-10" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">.id =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> <span class="co">#How does making a row number column help this process?</span></span>
<span id="cb1-11"><a href="data-transformation.html#cb1-11" tabindex="-1"></a>    <span class="fu">select</span>(<span class="st">&quot;.id&quot;</span>, <span class="fu">everything</span>()) <span class="co">#How does everything() work?</span></span>
<span id="cb1-12"><a href="data-transformation.html#cb1-12" tabindex="-1"></a>  </span>
<span id="cb1-13"><a href="data-transformation.html#cb1-13" tabindex="-1"></a>  <span class="co">#read in all files to list</span></span>
<span id="cb1-14"><a href="data-transformation.html#cb1-14" tabindex="-1"></a>  fls <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">str_c</span>(fPath, f), read.csv, <span class="at">header =</span> <span class="cn">FALSE</span>) <span class="co">#see ?str_c from stringr and ?lapply from the apply family</span></span>
<span id="cb1-15"><a href="data-transformation.html#cb1-15" tabindex="-1"></a>  </span>
<span id="cb1-16"><a href="data-transformation.html#cb1-16" tabindex="-1"></a>  <span class="co">#convert list to data frame</span></span>
<span id="cb1-17"><a href="data-transformation.html#cb1-17" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">rbindlist</span>(fls, <span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">idcol =</span> <span class="cn">TRUE</span>)) <span class="co">#see ?rbind_list from the data.table package</span></span>
<span id="cb1-18"><a href="data-transformation.html#cb1-18" tabindex="-1"></a>  </span>
<span id="cb1-19"><a href="data-transformation.html#cb1-19" tabindex="-1"></a>  <span class="co">#join data with identifying information</span></span>
<span id="cb1-20"><a href="data-transformation.html#cb1-20" tabindex="-1"></a>  e <span class="ot">&lt;-</span> f_split <span class="sc">%&gt;%</span> <span class="co">#Join df of names and ids with df of data</span></span>
<span id="cb1-21"><a href="data-transformation.html#cb1-21" tabindex="-1"></a>    <span class="fu">full_join</span>(d, <span class="at">by =</span> <span class="st">&quot;.id&quot;</span>) <span class="co">#See ?full_join</span></span>
<span id="cb1-22"><a href="data-transformation.html#cb1-22" tabindex="-1"></a>}</span></code></pre></div>
<div id="data-transformation-with-dplyr" class="section level2 unnumbered hasAnchor">
<h2>Data Transformation with Dplyr<a href="data-transformation.html#data-transformation-with-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First, we clean the environment and get the <code>tidyverse</code>,
which has <code>dplyr</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-transformation.html#cb2-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb2-2"><a href="data-transformation.html#cb2-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-3"><a href="data-transformation.html#cb2-3" tabindex="-1"></a><span class="co">#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</span></span>
<span id="cb2-4"><a href="data-transformation.html#cb2-4" tabindex="-1"></a><span class="co">#&gt; ✓ ggplot2 3.3.5     ✓ purrr   0.3.4</span></span>
<span id="cb2-5"><a href="data-transformation.html#cb2-5" tabindex="-1"></a><span class="co">#&gt; ✓ tibble  3.1.6     ✓ dplyr   1.0.7</span></span>
<span id="cb2-6"><a href="data-transformation.html#cb2-6" tabindex="-1"></a><span class="co">#&gt; ✓ tidyr   1.1.3     ✓ stringr 1.4.0</span></span>
<span id="cb2-7"><a href="data-transformation.html#cb2-7" tabindex="-1"></a><span class="co">#&gt; ✓ readr   1.4.0     ✓ forcats 0.5.1</span></span>
<span id="cb2-8"><a href="data-transformation.html#cb2-8" tabindex="-1"></a><span class="co">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span id="cb2-9"><a href="data-transformation.html#cb2-9" tabindex="-1"></a><span class="co">#&gt; x dplyr::filter() masks stats::filter()</span></span>
<span id="cb2-10"><a href="data-transformation.html#cb2-10" tabindex="-1"></a><span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span></span></code></pre></div>
</div>
<div id="get-a-dataset-from-your-.rdata-file" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Get a dataset from your .RData file<a href="data-transformation.html#get-a-dataset-from-your-.rdata-file" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-transformation.html#cb3-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&#39;data/ready.RData&#39;</span>)</span></code></pre></div>
<p><code>ready.Rdata</code> has multiple dataframes within it. This is the
helpful thing about <code>.RData</code> files. They can contain all of
the dataframes you need for a project or analysis.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-transformation.html#cb4-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(ccolor <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="data-transformation.html#cb4-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">subject =</span> s, <span class="at">congruency =</span> con, <span class="at">stimulus =</span>S,</span>
<span id="cb4-3"><a href="data-transformation.html#cb4-3" tabindex="-1"></a>          <span class="at">response =</span> R, <span class="at">reactionTime =</span> RT))</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data-transformation.html#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="data-transformation.html#cb5-2" tabindex="-1"></a><span class="fu">tbl_df</span>(ccolor) <span class="co">#Converts data to tbl class - Easier to view</span></span>
<span id="cb5-3"><a href="data-transformation.html#cb5-3" tabindex="-1"></a><span class="co">#&gt; Warning: `tbl_df()` was deprecated in dplyr 1.0.0.</span></span>
<span id="cb5-4"><a href="data-transformation.html#cb5-4" tabindex="-1"></a><span class="co">#&gt; Please use `tibble::as_tibble()` instead.</span></span>
<span id="cb5-5"><a href="data-transformation.html#cb5-5" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once every 8 hours.</span></span>
<span id="cb5-6"><a href="data-transformation.html#cb5-6" tabindex="-1"></a><span class="co">#&gt; Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.</span></span>
<span id="cb5-7"><a href="data-transformation.html#cb5-7" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6,400 × 5</span></span>
<span id="cb5-8"><a href="data-transformation.html#cb5-8" tabindex="-1"></a><span class="co">#&gt;   s     con         S     R        RT</span></span>
<span id="cb5-9"><a href="data-transformation.html#cb5-9" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt; &lt;chr&gt;       &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt;</span></span>
<span id="cb5-10"><a href="data-transformation.html#cb5-10" tabindex="-1"></a><span class="co">#&gt; 1 1     congruent   blue  blue   1023</span></span>
<span id="cb5-11"><a href="data-transformation.html#cb5-11" tabindex="-1"></a><span class="co">#&gt; 2 1     incongruent blue  red     665</span></span>
<span id="cb5-12"><a href="data-transformation.html#cb5-12" tabindex="-1"></a><span class="co">#&gt; 3 1     congruent   red   red    1568</span></span>
<span id="cb5-13"><a href="data-transformation.html#cb5-13" tabindex="-1"></a><span class="co">#&gt; 4 1     congruent   blue  blue    955</span></span>
<span id="cb5-14"><a href="data-transformation.html#cb5-14" tabindex="-1"></a><span class="co">#&gt; 5 1     incongruent red   blue    792</span></span>
<span id="cb5-15"><a href="data-transformation.html#cb5-15" tabindex="-1"></a><span class="co">#&gt; 6 1     congruent   red   red     452</span></span>
<span id="cb5-16"><a href="data-transformation.html#cb5-16" tabindex="-1"></a><span class="co">#&gt; # … with 6,394 more rows</span></span></code></pre></div>
<p>You can compare the classes…</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data-transformation.html#cb6-1" tabindex="-1"></a><span class="fu">class</span>(ccolor)</span>
<span id="cb6-2"><a href="data-transformation.html#cb6-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;data.frame&quot;</span></span>
<span id="cb6-3"><a href="data-transformation.html#cb6-3" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">tbl_df</span>(ccolor))</span>
<span id="cb6-4"><a href="data-transformation.html#cb6-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></span></code></pre></div>
<p>or get a glimpse of the data…</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data-transformation.html#cb7-1" tabindex="-1"></a><span class="fu">glimpse</span>(ccolor) <span class="co">#Gives the same information as clicking the blue circle in the environment panel</span></span>
<span id="cb7-2"><a href="data-transformation.html#cb7-2" tabindex="-1"></a><span class="co">#&gt; Rows: 6,400</span></span>
<span id="cb7-3"><a href="data-transformation.html#cb7-3" tabindex="-1"></a><span class="co">#&gt; Columns: 5</span></span>
<span id="cb7-4"><a href="data-transformation.html#cb7-4" tabindex="-1"></a><span class="co">#&gt; $ s   &lt;fct&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …</span></span>
<span id="cb7-5"><a href="data-transformation.html#cb7-5" tabindex="-1"></a><span class="co">#&gt; $ con &lt;chr&gt; &quot;congruent&quot;, &quot;incongruent&quot;, &quot;congruent&quot;, &quot;congruent&quot;, &quot;incongruent…</span></span>
<span id="cb7-6"><a href="data-transformation.html#cb7-6" tabindex="-1"></a><span class="co">#&gt; $ S   &lt;fct&gt; blue, blue, red, blue, red, red, blue, red, blue, red, blue, blue,…</span></span>
<span id="cb7-7"><a href="data-transformation.html#cb7-7" tabindex="-1"></a><span class="co">#&gt; $ R   &lt;chr&gt; &quot;blue&quot;, &quot;red&quot;, &quot;red&quot;, &quot;blue&quot;, &quot;blue&quot;, &quot;red&quot;, &quot;blue&quot;, &quot;red&quot;, &quot;blue&quot;…</span></span>
<span id="cb7-8"><a href="data-transformation.html#cb7-8" tabindex="-1"></a><span class="co">#&gt; $ RT  &lt;dbl&gt; 1023, 665, 1568, 955, 792, 452, 369, 1067, 414, 763, 766, 563, 115…</span></span></code></pre></div>
<p>or get the full thing…</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-transformation.html#cb8-1" tabindex="-1"></a><span class="fu">View</span>(ccolor) <span class="co">#Gives you a navigable display</span></span></code></pre></div>
</div>
<div id="introduction-to-the-pipe" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Introduction to “The Pipe”<a href="data-transformation.html#introduction-to-the-pipe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The pipe, aka <code>%&gt;%</code>, takes you a level into the data, so…</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-transformation.html#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="data-transformation.html#cb9-2" tabindex="-1"></a>ccolor <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="data-transformation.html#cb9-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="co"># is the same as...</span></span>
<span id="cb9-4"><a href="data-transformation.html#cb9-4" tabindex="-1"></a><span class="co">#&gt;   count</span></span>
<span id="cb9-5"><a href="data-transformation.html#cb9-5" tabindex="-1"></a><span class="co">#&gt; 1  6400</span></span>
<span id="cb9-6"><a href="data-transformation.html#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="data-transformation.html#cb9-7" tabindex="-1"></a><span class="fu">summarise</span>(ccolor, <span class="at">count =</span> <span class="fu">n</span>())</span>
<span id="cb9-8"><a href="data-transformation.html#cb9-8" tabindex="-1"></a><span class="co">#&gt;   count</span></span>
<span id="cb9-9"><a href="data-transformation.html#cb9-9" tabindex="-1"></a><span class="co">#&gt; 1  6400</span></span></code></pre></div>
<p>Now let’s do some descriptives…</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-transformation.html#cb10-1" tabindex="-1"></a>ccolor <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="data-transformation.html#cb10-2" tabindex="-1"></a>  <span class="fu">group_by</span>(s) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="data-transformation.html#cb10-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">nrow</span>(.)) </span>
<span id="cb10-4"><a href="data-transformation.html#cb10-4" tabindex="-1"></a><span class="co">#&gt; # A tibble: 20 × 2</span></span>
<span id="cb10-5"><a href="data-transformation.html#cb10-5" tabindex="-1"></a><span class="co">#&gt;   s     `nrow(.)`</span></span>
<span id="cb10-6"><a href="data-transformation.html#cb10-6" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;</span></span>
<span id="cb10-7"><a href="data-transformation.html#cb10-7" tabindex="-1"></a><span class="co">#&gt; 1 1          6400</span></span>
<span id="cb10-8"><a href="data-transformation.html#cb10-8" tabindex="-1"></a><span class="co">#&gt; 2 2          6400</span></span>
<span id="cb10-9"><a href="data-transformation.html#cb10-9" tabindex="-1"></a><span class="co">#&gt; 3 3          6400</span></span>
<span id="cb10-10"><a href="data-transformation.html#cb10-10" tabindex="-1"></a><span class="co">#&gt; 4 4          6400</span></span>
<span id="cb10-11"><a href="data-transformation.html#cb10-11" tabindex="-1"></a><span class="co">#&gt; 5 5          6400</span></span>
<span id="cb10-12"><a href="data-transformation.html#cb10-12" tabindex="-1"></a><span class="co">#&gt; 6 6          6400</span></span>

<span id="cb10-13"><a href="data-transformation.html#cb10-13" tabindex="-1"></a><span class="co">#&gt; # ℹ 14 more rows</span></span>

<span id="cb10-19"><a href="data-transformation.html#cb10-19" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co">#Let&#39;s name this something easy to type and remember, like &quot;count&quot;</span></span>
<span id="cb10-20"><a href="data-transformation.html#cb10-20" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> s, <span class="at">values_from =</span> count)</span>
<span id="cb10-21"><a href="data-transformation.html#cb10-21" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 20</span></span>
<span id="cb10-22"><a href="data-transformation.html#cb10-22" tabindex="-1"></a><span class="co">#&gt;     `1`   `2`   `3`   `4`   `5`   `6`   `7`   `8`   `9`  `10`  `11`  `12`  `13`</span></span>
<span id="cb10-23"><a href="data-transformation.html#cb10-23" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb10-24"><a href="data-transformation.html#cb10-24" tabindex="-1"></a><span class="co">#&gt; 1   320   320   320   320   320   320   320   320   320   320   320   320   320</span></span>
<span id="cb10-25"><a href="data-transformation.html#cb10-25" tabindex="-1"></a><span class="co">#&gt; # ℹ 7 more variables: `14` &lt;int&gt;, `15` &lt;int&gt;, `16` &lt;int&gt;, `17` &lt;int&gt;,</span></span>
<span id="cb10-26"><a href="data-transformation.html#cb10-26" tabindex="-1"></a><span class="co">#&gt; #   `18` &lt;int&gt;, `19` &lt;int&gt;, `20` &lt;int&gt;</span></span></code></pre></div>
<p>We can also wrap functions around the whole data object…</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-transformation.html#cb11-1" tabindex="-1"></a><span class="fu">as.matrix</span>(ccolor <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="data-transformation.html#cb11-2" tabindex="-1"></a>  <span class="fu">group_by</span>(s) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="data-transformation.html#cb11-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="data-transformation.html#cb11-4" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> s, <span class="at">values_from =</span> count)) <span class="co">#or we can subset it</span></span>
<span id="cb11-5"><a href="data-transformation.html#cb11-5" tabindex="-1"></a><span class="co">#&gt;        1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18</span></span>
<span id="cb11-6"><a href="data-transformation.html#cb11-6" tabindex="-1"></a><span class="co">#&gt; [1,] 320 320 320 320 320 320 320 320 320 320 320 320 320 320 320 320 320 320</span></span>
<span id="cb11-7"><a href="data-transformation.html#cb11-7" tabindex="-1"></a><span class="co">#&gt;       19  20</span></span>
<span id="cb11-8"><a href="data-transformation.html#cb11-8" tabindex="-1"></a><span class="co">#&gt; [1,] 320 320</span></span>
<span id="cb11-9"><a href="data-transformation.html#cb11-9" tabindex="-1"></a></span>
<span id="cb11-10"><a href="data-transformation.html#cb11-10" tabindex="-1"></a><span class="fu">data.frame</span>(ccolor <span class="sc">%&gt;%</span></span>
<span id="cb11-11"><a href="data-transformation.html#cb11-11" tabindex="-1"></a>  <span class="fu">group_by</span>(s) <span class="sc">%&gt;%</span></span>
<span id="cb11-12"><a href="data-transformation.html#cb11-12" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb11-13"><a href="data-transformation.html#cb11-13" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> s, <span class="at">values_from =</span> count))[,<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>]</span>
<span id="cb11-14"><a href="data-transformation.html#cb11-14" tabindex="-1"></a><span class="co">#&gt;    X4  X5  X6  X7</span></span>
<span id="cb11-15"><a href="data-transformation.html#cb11-15" tabindex="-1"></a><span class="co">#&gt; 1 320 320 320 320</span></span></code></pre></div>

<p>What happened to the names? What is that X4, X5, stuff? That’s what R
does when it doesn’t know the column names, but in this case it actually
does. Check with colnames()</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-transformation.html#cb12-1" tabindex="-1"></a><span class="fu">colnames</span>(ccolor <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="data-transformation.html#cb12-2" tabindex="-1"></a>           <span class="fu">group_by</span>(s) <span class="sc">%&gt;%</span></span>


<span id="cb12-3"><a href="data-transformation.html#cb12-3" tabindex="-1"></a>           <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co">#Let&#39;s name this something easy to type and remember, like &quot;count&quot;</span></span>
<span id="cb12-4"><a href="data-transformation.html#cb12-4" tabindex="-1"></a>           <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> s, <span class="at">values_from =</span> count))</span>

<span id="cb12-5"><a href="data-transformation.html#cb12-5" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot;  &quot;9&quot;  &quot;10&quot; &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; &quot;15&quot;</span></span>
<span id="cb12-6"><a href="data-transformation.html#cb12-6" tabindex="-1"></a><span class="co">#&gt; [16] &quot;16&quot; &quot;17&quot; &quot;18&quot; &quot;19&quot; &quot;20&quot;</span></span></code></pre></div>
<p>None of these changes are being saved! You can make new objects with the
<code>&lt;-</code> operator.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-transformation.html#cb13-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> ccolor <span class="co">#do some stuff here</span></span></code></pre></div>
<p>Above I used <code>group_by(s)</code>, which groups by participant,
<code>summarise()</code> with <code>n()</code>, which counts the
number of rows, and <code>pivot_wider()</code>, which takes the column s,
turns each row into a column, and puts the value argument in that
column.</p>
<p>There’s also <code>filter()</code>, <code>gather()</code>,
<code>separate()</code>, <code>unite()</code>, <code>select()</code>,
<code>distinct()</code>, <code>sample_n()</code>, <code>slice()</code>,
and many more.</p>
<p>For example:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-transformation.html#cb14-1" tabindex="-1"></a><span class="fu">as_tibble</span>(ccolor <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="data-transformation.html#cb14-2" tabindex="-1"></a>  <span class="fu">filter</span>(s <span class="sc">==</span> <span class="dv">1</span>))<span class="co"># &quot;==&quot; is a logic operator, which works with most classes of data</span></span>
<span id="cb14-3"><a href="data-transformation.html#cb14-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 320 × 5</span></span>
<span id="cb14-4"><a href="data-transformation.html#cb14-4" tabindex="-1"></a><span class="co">#&gt;   s     con         S     R        RT</span></span>
<span id="cb14-5"><a href="data-transformation.html#cb14-5" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt; &lt;chr&gt;       &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt;</span></span>
<span id="cb14-6"><a href="data-transformation.html#cb14-6" tabindex="-1"></a><span class="co">#&gt; 1 1     congruent   blue  blue   1023</span></span>
<span id="cb14-7"><a href="data-transformation.html#cb14-7" tabindex="-1"></a><span class="co">#&gt; 2 1     incongruent blue  red     665</span></span>
<span id="cb14-8"><a href="data-transformation.html#cb14-8" tabindex="-1"></a><span class="co">#&gt; 3 1     congruent   red   red    1568</span></span>
<span id="cb14-9"><a href="data-transformation.html#cb14-9" tabindex="-1"></a><span class="co">#&gt; 4 1     congruent   blue  blue    955</span></span>
<span id="cb14-10"><a href="data-transformation.html#cb14-10" tabindex="-1"></a><span class="co">#&gt; 5 1     incongruent red   blue    792</span></span>
<span id="cb14-11"><a href="data-transformation.html#cb14-11" tabindex="-1"></a><span class="co">#&gt; 6 1     congruent   red   red     452</span></span>
<span id="cb14-12"><a href="data-transformation.html#cb14-12" tabindex="-1"></a><span class="co">#&gt; # … with 314 more rows</span></span>
<span id="cb14-13"><a href="data-transformation.html#cb14-13" tabindex="-1"></a></span>
<span id="cb14-14"><a href="data-transformation.html#cb14-14" tabindex="-1"></a><span class="fu">class</span>(ccolor<span class="sc">$</span>s)</span>
<span id="cb14-15"><a href="data-transformation.html#cb14-15" tabindex="-1"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span></code></pre></div>
</div>
<div id="aside-on-the-apply-family" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Aside on the apply family<a href="data-transformation.html#aside-on-the-apply-family" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>&lt;ASIDE&gt;</em> - for those of you interested in replacing your For Loops,
this is how you’d do it. Here’s a quick introduction to the apply
family. We can apply <code>class()</code> to muliple columns.</p>
<p>Say we want to get the class of every column…</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-transformation.html#cb15-1" tabindex="-1"></a><span class="fu">apply</span>(ccolor, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> class) <span class="co">#Something about changing it to an array loses its class attributes</span></span>
<span id="cb15-2"><a href="data-transformation.html#cb15-2" tabindex="-1"></a><span class="co">#&gt;           s         con           S           R          RT </span></span>
<span id="cb15-3"><a href="data-transformation.html#cb15-3" tabindex="-1"></a><span class="co">#&gt; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot;</span></span>
<span id="cb15-4"><a href="data-transformation.html#cb15-4" tabindex="-1"></a><span class="fu">lapply</span>(ccolor, <span class="at">FUN =</span> class) <span class="co">#list apply makes the output of the call a list</span></span>
<span id="cb15-5"><a href="data-transformation.html#cb15-5" tabindex="-1"></a><span class="co">#&gt; $s</span></span>
<span id="cb15-6"><a href="data-transformation.html#cb15-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span>
<span id="cb15-7"><a href="data-transformation.html#cb15-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-8"><a href="data-transformation.html#cb15-8" tabindex="-1"></a><span class="co">#&gt; $con</span></span>
<span id="cb15-9"><a href="data-transformation.html#cb15-9" tabindex="-1"></a><span class="co">#&gt; [1] &quot;character&quot;</span></span>
<span id="cb15-10"><a href="data-transformation.html#cb15-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-11"><a href="data-transformation.html#cb15-11" tabindex="-1"></a><span class="co">#&gt; $S</span></span>
<span id="cb15-12"><a href="data-transformation.html#cb15-12" tabindex="-1"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span>
<span id="cb15-13"><a href="data-transformation.html#cb15-13" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-14"><a href="data-transformation.html#cb15-14" tabindex="-1"></a><span class="co">#&gt; $R</span></span>
<span id="cb15-15"><a href="data-transformation.html#cb15-15" tabindex="-1"></a><span class="co">#&gt; [1] &quot;character&quot;</span></span>
<span id="cb15-16"><a href="data-transformation.html#cb15-16" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-17"><a href="data-transformation.html#cb15-17" tabindex="-1"></a><span class="co">#&gt; $RT</span></span>
<span id="cb15-18"><a href="data-transformation.html#cb15-18" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numeric&quot;</span></span>
<span id="cb15-19"><a href="data-transformation.html#cb15-19" tabindex="-1"></a><span class="fu">sapply</span>(ccolor,<span class="at">FUN =</span> class) <span class="co">#simple apply tries to output the simplest outcome</span></span>
<span id="cb15-20"><a href="data-transformation.html#cb15-20" tabindex="-1"></a><span class="co">#&gt;           s         con           S           R          RT </span></span>
<span id="cb15-21"><a href="data-transformation.html#cb15-21" tabindex="-1"></a><span class="co">#&gt;    &quot;factor&quot; &quot;character&quot;    &quot;factor&quot; &quot;character&quot;   &quot;numeric&quot;</span></span></code></pre></div>
<p>The bottom two assume you mean the columns, while the top one you have
to specify. tapply is different, because you index (or group) by another
variable. Say we want mean RT by subject…</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-transformation.html#cb16-1" tabindex="-1"></a><span class="fu">tapply</span>(<span class="at">X =</span> ccolor<span class="sc">$</span>RT, <span class="at">INDEX =</span> ccolor<span class="sc">$</span>s, <span class="at">FUN =</span> mean) <span class="co">#We&#39;d do it like that.</span></span>
<span id="cb16-2"><a href="data-transformation.html#cb16-2" tabindex="-1"></a><span class="co">#&gt;    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16 </span></span>
<span id="cb16-3"><a href="data-transformation.html#cb16-3" tabindex="-1"></a><span class="co">#&gt;  790  731  485  847  824  536 1065 1325 1090 1002  840  914  900 1012  953   NA </span></span>
<span id="cb16-4"><a href="data-transformation.html#cb16-4" tabindex="-1"></a><span class="co">#&gt;   17   18   19   20 </span></span>
<span id="cb16-5"><a href="data-transformation.html#cb16-5" tabindex="-1"></a><span class="co">#&gt;  996  980  719  623</span></span></code></pre></div>
<p>mapply stands for “multivariate apply’, and works like this:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-transformation.html#cb17-1" tabindex="-1"></a><span class="co"># Create a 4x4 matrix</span></span>
<span id="cb17-2"><a href="data-transformation.html#cb17-2" tabindex="-1"></a>Q1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="dv">2</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="dv">4</span>, <span class="dv">4</span>)),<span class="dv">4</span>,<span class="dv">4</span>)</span>
<span id="cb17-3"><a href="data-transformation.html#cb17-3" tabindex="-1"></a>Q1 <span class="co">#Or you could use mapply()</span></span>
<span id="cb17-4"><a href="data-transformation.html#cb17-4" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span id="cb17-5"><a href="data-transformation.html#cb17-5" tabindex="-1"></a><span class="co">#&gt; [1,]    1    2    3    4</span></span>
<span id="cb17-6"><a href="data-transformation.html#cb17-6" tabindex="-1"></a><span class="co">#&gt; [2,]    1    2    3    4</span></span>
<span id="cb17-7"><a href="data-transformation.html#cb17-7" tabindex="-1"></a><span class="co">#&gt; [3,]    1    2    3    4</span></span>
<span id="cb17-8"><a href="data-transformation.html#cb17-8" tabindex="-1"></a><span class="co">#&gt; [4,]    1    2    3    4</span></span>
<span id="cb17-9"><a href="data-transformation.html#cb17-9" tabindex="-1"></a><span class="fu">mapply</span>(rep, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">4</span>) <span class="co">#repeat 1 through 4, 4 times</span></span>
<span id="cb17-10"><a href="data-transformation.html#cb17-10" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span id="cb17-11"><a href="data-transformation.html#cb17-11" tabindex="-1"></a><span class="co">#&gt; [1,]    1    2    3    4</span></span>
<span id="cb17-12"><a href="data-transformation.html#cb17-12" tabindex="-1"></a><span class="co">#&gt; [2,]    1    2    3    4</span></span>
<span id="cb17-13"><a href="data-transformation.html#cb17-13" tabindex="-1"></a><span class="co">#&gt; [3,]    1    2    3    4</span></span>
<span id="cb17-14"><a href="data-transformation.html#cb17-14" tabindex="-1"></a><span class="co">#&gt; [4,]    1    2    3    4</span></span></code></pre></div>
<p>Say you want to mean-center some data</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data-transformation.html#cb18-1" tabindex="-1"></a>dataPoints <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">30</span>), <span class="at">nrow=</span><span class="dv">5</span>, <span class="at">ncol=</span><span class="dv">6</span>)</span></code></pre></div>
<p>Find means per column with <code>apply()</code></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-transformation.html#cb19-1" tabindex="-1"></a>dataPoints_means <span class="ot">&lt;-</span> <span class="fu">apply</span>(dataPoints, <span class="dv">2</span>, mean) <span class="co">#Margin = 2 signifies &quot;do it to the columns&quot;</span></span></code></pre></div>
<p>Find standard deviation with <code>apply()</code></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-transformation.html#cb20-1" tabindex="-1"></a>dataPoints_sdev <span class="ot">&lt;-</span> <span class="fu">apply</span>(dataPoints, <span class="dv">2</span>, sd)</span></code></pre></div>
<p>Center the points</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-transformation.html#cb21-1" tabindex="-1"></a>dataPoints_Trans1 <span class="ot">&lt;-</span> <span class="fu">sweep</span>(dataPoints, <span class="dv">2</span>, dataPoints_means,<span class="st">&quot;-&quot;</span>) <span class="co">#subtract mean from points in columns</span></span></code></pre></div>
<p>Return the result</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-transformation.html#cb22-1" tabindex="-1"></a>dataPoints_Trans1</span>
<span id="cb22-2"><a href="data-transformation.html#cb22-2" tabindex="-1"></a><span class="co">#&gt;        [,1]     [,2]   [,3]    [,4]    [,5]   [,6]</span></span>
<span id="cb22-3"><a href="data-transformation.html#cb22-3" tabindex="-1"></a><span class="co">#&gt; [1,] -0.807  1.43794 -0.758 -1.3013  0.0376  0.580</span></span>
<span id="cb22-4"><a href="data-transformation.html#cb22-4" tabindex="-1"></a><span class="co">#&gt; [2,]  0.849 -1.53229  0.425  0.0397 -0.0676 -0.258</span></span>
<span id="cb22-5"><a href="data-transformation.html#cb22-5" tabindex="-1"></a><span class="co">#&gt; [3,] -1.844  0.04220  1.861  0.5091 -1.7351  0.662</span></span>
<span id="cb22-6"><a href="data-transformation.html#cb22-6" tabindex="-1"></a><span class="co">#&gt; [4,]  0.588  0.04533 -1.835  1.1047  0.3072 -0.149</span></span>
<span id="cb22-7"><a href="data-transformation.html#cb22-7" tabindex="-1"></a><span class="co">#&gt; [5,]  1.215  0.00682  0.308 -0.3523  1.4579 -0.835</span></span></code></pre></div>
<p>Normalize</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-transformation.html#cb23-1" tabindex="-1"></a>dataPoints_Trans2 <span class="ot">&lt;-</span> <span class="fu">sweep</span>(dataPoints_Trans1, <span class="dv">2</span>, dataPoints_sdev, <span class="st">&quot;/&quot;</span>) <span class="co">#divide new point values by standard deviation in columns</span></span></code></pre></div>
<p>Return the result</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-transformation.html#cb24-1" tabindex="-1"></a>dataPoints_Trans2</span>
<span id="cb24-2"><a href="data-transformation.html#cb24-2" tabindex="-1"></a><span class="co">#&gt;        [,1]     [,2]   [,3]    [,4]    [,5]   [,6]</span></span>
<span id="cb24-3"><a href="data-transformation.html#cb24-3" tabindex="-1"></a><span class="co">#&gt; [1,] -0.628  1.36800 -0.547 -1.4329  0.0328  0.929</span></span>
<span id="cb24-4"><a href="data-transformation.html#cb24-4" tabindex="-1"></a><span class="co">#&gt; [2,]  0.661 -1.45776  0.306  0.0437 -0.0591 -0.413</span></span>
<span id="cb24-5"><a href="data-transformation.html#cb24-5" tabindex="-1"></a><span class="co">#&gt; [3,] -1.436  0.04015  1.343  0.5607 -1.5165  1.060</span></span>
<span id="cb24-6"><a href="data-transformation.html#cb24-6" tabindex="-1"></a><span class="co">#&gt; [4,]  0.458  0.04312 -1.325  1.2165  0.2685 -0.239</span></span>
<span id="cb24-7"><a href="data-transformation.html#cb24-7" tabindex="-1"></a><span class="co">#&gt; [5,]  0.946  0.00649  0.222 -0.3880  1.2742 -1.337</span></span></code></pre></div>
<p>Now you have mean-centered data points, probably for a regression model.</p>
<p><em>&lt;/ASIDE&gt;</em></p>
</div>
<div id="extracting-rows" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Extracting rows<a href="data-transformation.html#extracting-rows" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One thing we always want to do is extract rows based on some criteria.
For example, in Reaction Time data we often trim the early responses as
anticipatory, and the late responses as outliers.</p>
<p><strong>Challenge 1</strong>: Find and remove the rows with NAs, save it out to
“newdf”</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-transformation.html#cb25-1" tabindex="-1"></a>newdf <span class="ot">&lt;-</span> ...</span></code></pre></div>
<p><strong>Challenge 2</strong>: Filter out RT’s below 150 milliseconds and show how
many you’ve filtered out.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-transformation.html#cb26-1" tabindex="-1"></a>newdf <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="data-transformation.html#cb26-2" tabindex="-1"></a>  <span class="fu">filter</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="data-transformation.html#cb26-3" tabindex="-1"></a>  <span class="fu">summarise</span>(...)</span></code></pre></div>
<p><strong>Challenge 3</strong>: Get the number of observations (rows) kept and removed
with <code>group_by()</code></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-transformation.html#cb27-1" tabindex="-1"></a>newdf <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="data-transformation.html#cb27-2" tabindex="-1"></a>  <span class="fu">group_by</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="data-transformation.html#cb27-3" tabindex="-1"></a>  <span class="fu">summarise</span>(...)</span></code></pre></div>
<p>In papers, you want to report the proportion of data you have removed
and the criteria with which you removed that data.</p>
<p>Now you have the slow responses, but a more appropriate standard might
be removing data above three standard deviations from the mean for each
participant’s own distribution. Let’s try that now…</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data-transformation.html#cb28-1" tabindex="-1"></a>newdf <span class="sc">%&gt;%</span> <span class="co">#Step 1 is to group by the subject and get the mean and sd</span></span>
<span id="cb28-2"><a href="data-transformation.html#cb28-2" tabindex="-1"></a>  <span class="fu">group_by</span>(s) <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="data-transformation.html#cb28-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mRT =</span> <span class="fu">mean</span>(RT), <span class="at">RTsd =</span> <span class="fu">sd</span>(RT))</span>
<span id="cb28-4"><a href="data-transformation.html#cb28-4" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6,399 × 7</span></span>
<span id="cb28-5"><a href="data-transformation.html#cb28-5" tabindex="-1"></a><span class="co">#&gt; # Groups:   s [20]</span></span>
<span id="cb28-6"><a href="data-transformation.html#cb28-6" tabindex="-1"></a><span class="co">#&gt;   s     con         S     R        RT   mRT  RTsd</span></span>
<span id="cb28-7"><a href="data-transformation.html#cb28-7" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt; &lt;chr&gt;       &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb28-8"><a href="data-transformation.html#cb28-8" tabindex="-1"></a><span class="co">#&gt; 1 1     congruent   blue  blue   1023  790.  775.</span></span>
<span id="cb28-9"><a href="data-transformation.html#cb28-9" tabindex="-1"></a><span class="co">#&gt; 2 1     incongruent blue  red     665  790.  775.</span></span>
<span id="cb28-10"><a href="data-transformation.html#cb28-10" tabindex="-1"></a><span class="co">#&gt; 3 1     congruent   red   red    1568  790.  775.</span></span>
<span id="cb28-11"><a href="data-transformation.html#cb28-11" tabindex="-1"></a><span class="co">#&gt; 4 1     congruent   blue  blue    955  790.  775.</span></span>
<span id="cb28-12"><a href="data-transformation.html#cb28-12" tabindex="-1"></a><span class="co">#&gt; 5 1     incongruent red   blue    792  790.  775.</span></span>
<span id="cb28-13"><a href="data-transformation.html#cb28-13" tabindex="-1"></a><span class="co">#&gt; 6 1     congruent   red   red     452  790.  775.</span></span>

<span id="cb28-14"><a href="data-transformation.html#cb28-14" tabindex="-1"></a><span class="co">#&gt; # ℹ 6,393 more rows</span></span>

<span id="cb28-15"><a href="data-transformation.html#cb28-15" tabindex="-1"></a></span>
<span id="cb28-16"><a href="data-transformation.html#cb28-16" tabindex="-1"></a>newdf <span class="sc">%&gt;%</span> <span class="co">#Step 2 is to make a cutoff 3 standard deviations above the mean for each participant</span></span>
<span id="cb28-17"><a href="data-transformation.html#cb28-17" tabindex="-1"></a>  <span class="fu">group_by</span>(s) <span class="sc">%&gt;%</span></span>
<span id="cb28-18"><a href="data-transformation.html#cb28-18" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mRT =</span> <span class="fu">mean</span>(RT), <span class="at">RTsd =</span> <span class="fu">sd</span>(RT)) <span class="sc">%&gt;%</span></span>
<span id="cb28-19"><a href="data-transformation.html#cb28-19" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cutoff =</span> mRT <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span>RTsd)</span>
<span id="cb28-20"><a href="data-transformation.html#cb28-20" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6,399 × 8</span></span>
<span id="cb28-21"><a href="data-transformation.html#cb28-21" tabindex="-1"></a><span class="co">#&gt; # Groups:   s [20]</span></span>
<span id="cb28-22"><a href="data-transformation.html#cb28-22" tabindex="-1"></a><span class="co">#&gt;   s     con         S     R        RT   mRT  RTsd cutoff</span></span>
<span id="cb28-23"><a href="data-transformation.html#cb28-23" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt; &lt;chr&gt;       &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb28-24"><a href="data-transformation.html#cb28-24" tabindex="-1"></a><span class="co">#&gt; 1 1     congruent   blue  blue   1023  790.  775.  3115.</span></span>
<span id="cb28-25"><a href="data-transformation.html#cb28-25" tabindex="-1"></a><span class="co">#&gt; 2 1     incongruent blue  red     665  790.  775.  3115.</span></span>
<span id="cb28-26"><a href="data-transformation.html#cb28-26" tabindex="-1"></a><span class="co">#&gt; 3 1     congruent   red   red    1568  790.  775.  3115.</span></span>
<span id="cb28-27"><a href="data-transformation.html#cb28-27" tabindex="-1"></a><span class="co">#&gt; 4 1     congruent   blue  blue    955  790.  775.  3115.</span></span>
<span id="cb28-28"><a href="data-transformation.html#cb28-28" tabindex="-1"></a><span class="co">#&gt; 5 1     incongruent red   blue    792  790.  775.  3115.</span></span>
<span id="cb28-29"><a href="data-transformation.html#cb28-29" tabindex="-1"></a><span class="co">#&gt; 6 1     congruent   red   red     452  790.  775.  3115.</span></span>

<span id="cb28-30"><a href="data-transformation.html#cb28-30" tabindex="-1"></a><span class="co">#&gt; # ℹ 6,393 more rows</span></span>

<span id="cb28-31"><a href="data-transformation.html#cb28-31" tabindex="-1"></a></span>
<span id="cb28-32"><a href="data-transformation.html#cb28-32" tabindex="-1"></a></span>
<span id="cb28-33"><a href="data-transformation.html#cb28-33" tabindex="-1"></a>newdf <span class="sc">%&gt;%</span> <span class="co">#Step 3 Let&#39;s clean up the columns we need and the ones we don&#39;t</span></span>
<span id="cb28-34"><a href="data-transformation.html#cb28-34" tabindex="-1"></a>  <span class="fu">group_by</span>(s) <span class="sc">%&gt;%</span></span>
<span id="cb28-35"><a href="data-transformation.html#cb28-35" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mRT =</span> <span class="fu">mean</span>(RT), <span class="at">RTsd =</span> <span class="fu">sd</span>(RT)) <span class="sc">%&gt;%</span></span>
<span id="cb28-36"><a href="data-transformation.html#cb28-36" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cutoff =</span> mRT <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span>RTsd) <span class="sc">%&gt;%</span></span>
<span id="cb28-37"><a href="data-transformation.html#cb28-37" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>mRT, <span class="sc">-</span>RTsd)</span>
<span id="cb28-38"><a href="data-transformation.html#cb28-38" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6,399 × 6</span></span>
<span id="cb28-39"><a href="data-transformation.html#cb28-39" tabindex="-1"></a><span class="co">#&gt; # Groups:   s [20]</span></span>
<span id="cb28-40"><a href="data-transformation.html#cb28-40" tabindex="-1"></a><span class="co">#&gt;   s     con         S     R        RT cutoff</span></span>
<span id="cb28-41"><a href="data-transformation.html#cb28-41" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt; &lt;chr&gt;       &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb28-42"><a href="data-transformation.html#cb28-42" tabindex="-1"></a><span class="co">#&gt; 1 1     congruent   blue  blue   1023  3115.</span></span>
<span id="cb28-43"><a href="data-transformation.html#cb28-43" tabindex="-1"></a><span class="co">#&gt; 2 1     incongruent blue  red     665  3115.</span></span>
<span id="cb28-44"><a href="data-transformation.html#cb28-44" tabindex="-1"></a><span class="co">#&gt; 3 1     congruent   red   red    1568  3115.</span></span>
<span id="cb28-45"><a href="data-transformation.html#cb28-45" tabindex="-1"></a><span class="co">#&gt; 4 1     congruent   blue  blue    955  3115.</span></span>
<span id="cb28-46"><a href="data-transformation.html#cb28-46" tabindex="-1"></a><span class="co">#&gt; 5 1     incongruent red   blue    792  3115.</span></span>
<span id="cb28-47"><a href="data-transformation.html#cb28-47" tabindex="-1"></a><span class="co">#&gt; 6 1     congruent   red   red     452  3115.</span></span>

<span id="cb28-48"><a href="data-transformation.html#cb28-48" tabindex="-1"></a><span class="co">#&gt; # ℹ 6,393 more rows</span></span>

<span id="cb28-49"><a href="data-transformation.html#cb28-49" tabindex="-1"></a></span>
<span id="cb28-50"><a href="data-transformation.html#cb28-50" tabindex="-1"></a></span>
<span id="cb28-51"><a href="data-transformation.html#cb28-51" tabindex="-1"></a>newdf <span class="sc">%&gt;%</span> <span class="co">#Step 4 Now let&#39;s filter those RTs above the cutoff and count them</span></span>
<span id="cb28-52"><a href="data-transformation.html#cb28-52" tabindex="-1"></a>  <span class="fu">group_by</span>(s) <span class="sc">%&gt;%</span></span>
<span id="cb28-53"><a href="data-transformation.html#cb28-53" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mRT =</span> <span class="fu">mean</span>(RT), <span class="at">RTsd =</span> <span class="fu">sd</span>(RT)) <span class="sc">%&gt;%</span></span>
<span id="cb28-54"><a href="data-transformation.html#cb28-54" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cutoff =</span> mRT <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span>RTsd) <span class="sc">%&gt;%</span></span>
<span id="cb28-55"><a href="data-transformation.html#cb28-55" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>mRT, <span class="sc">-</span>RTsd) <span class="sc">%&gt;%</span></span>
<span id="cb28-56"><a href="data-transformation.html#cb28-56" tabindex="-1"></a>  <span class="fu">filter</span>(RT <span class="sc">&gt;</span> cutoff) <span class="sc">%&gt;%</span></span>
<span id="cb28-57"><a href="data-transformation.html#cb28-57" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co">#spread it out so its easy to read</span></span>

<span id="cb28-58"><a href="data-transformation.html#cb28-58" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> s, <span class="at">values_from =</span> n)</span>

<span id="cb28-59"><a href="data-transformation.html#cb28-59" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 20</span></span>
<span id="cb28-60"><a href="data-transformation.html#cb28-60" tabindex="-1"></a><span class="co">#&gt;     `1`   `2`   `3`   `4`   `5`   `6`   `7`   `8`   `9`  `10`  `11`  `12`  `13`</span></span>
<span id="cb28-61"><a href="data-transformation.html#cb28-61" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb28-62"><a href="data-transformation.html#cb28-62" tabindex="-1"></a><span class="co">#&gt; 1     4     4     4     4     7     6     6     3     8     5     1     7     4</span></span>

<span id="cb28-63"><a href="data-transformation.html#cb28-63" tabindex="-1"></a><span class="co">#&gt; # ℹ 7 more variables: `14` &lt;int&gt;, `15` &lt;int&gt;, `16` &lt;int&gt;, `17` &lt;int&gt;,</span></span>
<span id="cb28-64"><a href="data-transformation.html#cb28-64" tabindex="-1"></a><span class="co">#&gt; #   `18` &lt;int&gt;, `19` &lt;int&gt;, `20` &lt;int&gt;</span></span>

<span id="cb28-65"><a href="data-transformation.html#cb28-65" tabindex="-1"></a></span>
<span id="cb28-66"><a href="data-transformation.html#cb28-66" tabindex="-1"></a></span>
<span id="cb28-67"><a href="data-transformation.html#cb28-67" tabindex="-1"></a>newdf <span class="sc">%&gt;%</span> <span class="co">#We can see the proportion of removed data</span></span>
<span id="cb28-68"><a href="data-transformation.html#cb28-68" tabindex="-1"></a>  <span class="fu">group_by</span>(s) <span class="sc">%&gt;%</span></span>
<span id="cb28-69"><a href="data-transformation.html#cb28-69" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mRT =</span> <span class="fu">mean</span>(RT), <span class="at">RTsd =</span> <span class="fu">sd</span>(RT)) <span class="sc">%&gt;%</span></span>
<span id="cb28-70"><a href="data-transformation.html#cb28-70" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cutoff =</span> mRT <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span>RTsd) <span class="sc">%&gt;%</span></span>
<span id="cb28-71"><a href="data-transformation.html#cb28-71" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>mRT, <span class="sc">-</span>RTsd) <span class="sc">%&gt;%</span></span>
<span id="cb28-72"><a href="data-transformation.html#cb28-72" tabindex="-1"></a>  <span class="fu">group_by</span>(RT <span class="sc">&gt;</span> cutoff <span class="sc">|</span> RT <span class="sc">&lt;</span> <span class="dv">150</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-73"><a href="data-transformation.html#cb28-73" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb28-74"><a href="data-transformation.html#cb28-74" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> (n<span class="sc">/</span><span class="fu">sum</span>(n))<span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb28-75"><a href="data-transformation.html#cb28-75" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span id="cb28-76"><a href="data-transformation.html#cb28-76" tabindex="-1"></a><span class="co">#&gt;   `RT &gt; cutoff | RT &lt; 150`     n  prop</span></span>
<span id="cb28-77"><a href="data-transformation.html#cb28-77" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt;                    &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb28-78"><a href="data-transformation.html#cb28-78" tabindex="-1"></a><span class="co">#&gt; 1 FALSE                     6289 98.3 </span></span>
<span id="cb28-79"><a href="data-transformation.html#cb28-79" tabindex="-1"></a><span class="co">#&gt; 2 TRUE                       110  1.72</span></span>
<span id="cb28-80"><a href="data-transformation.html#cb28-80" tabindex="-1"></a></span>
<span id="cb28-81"><a href="data-transformation.html#cb28-81" tabindex="-1"></a>dfclean <span class="ot">&lt;-</span> newdf <span class="sc">%&gt;%</span> <span class="co">#Save it out as dfclean</span></span>
<span id="cb28-82"><a href="data-transformation.html#cb28-82" tabindex="-1"></a>  <span class="fu">group_by</span>(s) <span class="sc">%&gt;%</span></span>
<span id="cb28-83"><a href="data-transformation.html#cb28-83" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mRT =</span> <span class="fu">mean</span>(RT), <span class="at">RTsd =</span> <span class="fu">sd</span>(RT)) <span class="sc">%&gt;%</span></span>
<span id="cb28-84"><a href="data-transformation.html#cb28-84" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cutoff =</span> mRT <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span>RTsd) <span class="sc">%&gt;%</span></span>
<span id="cb28-85"><a href="data-transformation.html#cb28-85" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>mRT, <span class="sc">-</span>RTsd) <span class="sc">%&gt;%</span></span>
<span id="cb28-86"><a href="data-transformation.html#cb28-86" tabindex="-1"></a>  <span class="fu">filter</span>(RT <span class="sc">&lt;</span> cutoff <span class="sc">&amp;</span> RT <span class="sc">&gt;</span> <span class="dv">150</span>) <span class="co">#The RTs must be less than the cutoff AND greater than 150 ms</span></span></code></pre></div>
<p>Now we’re ready to do some descriptive statistics with the groups</p>
<p><strong>Challenge 4</strong>: What is the mean reaction time and standard deviation
for congruent vs incongruent trials</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-transformation.html#cb29-1" tabindex="-1"></a><span class="co">#hint group_by(the factor you&#39;re interested in)</span></span>
<span id="cb29-2"><a href="data-transformation.html#cb29-2" tabindex="-1"></a>dfclean <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="data-transformation.html#cb29-3" tabindex="-1"></a>  <span class="fu">group_by</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="data-transformation.html#cb29-4" tabindex="-1"></a>  <span class="fu">summarise</span>(...)</span></code></pre></div>
<p><strong>Challenge 5</strong>: Get the mean and sd of participant means for congruent
vs incongruent trials and compare to the previous outcome.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data-transformation.html#cb30-1" tabindex="-1"></a>dfclean <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="data-transformation.html#cb30-2" tabindex="-1"></a>  <span class="fu">group_by</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="data-transformation.html#cb30-3" tabindex="-1"></a>  <span class="fu">summarise</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="data-transformation.html#cb30-4" tabindex="-1"></a>  <span class="fu">group_by</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="data-transformation.html#cb30-5" tabindex="-1"></a>  <span class="fu">summarise</span>(..., ...)</span></code></pre></div>
<p>This is a quirk of repeated measures fully within designs, as the levels
of analysis are nested. More on that later. We can quickly visualize
some of these things, like the distribution of responses in base R.
Note: Soon we will learn to visualize everything in ggplot2.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-transformation.html#cb31-1" tabindex="-1"></a><span class="fu">hist</span>(dfclean<span class="sc">$</span>RT, <span class="at">breaks =</span> <span class="dv">100</span>)</span>
<span id="cb31-2"><a href="data-transformation.html#cb31-2" tabindex="-1"></a></span>
<span id="cb31-3"><a href="data-transformation.html#cb31-3" tabindex="-1"></a><span class="co">#Add a line for the mean</span></span>
<span id="cb31-4"><a href="data-transformation.html#cb31-4" tabindex="-1"></a><span class="fu">hist</span>(dfclean<span class="sc">$</span>RT, <span class="at">breaks =</span> <span class="dv">100</span>)</span>
<span id="cb31-5"><a href="data-transformation.html#cb31-5" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">mean</span>(dfclean<span class="sc">$</span>RT),</span>
<span id="cb31-6"><a href="data-transformation.html#cb31-6" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb31-7"><a href="data-transformation.html#cb31-7" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb31-8"><a href="data-transformation.html#cb31-8" tabindex="-1"></a><span class="co">#add a line for the median</span></span>
<span id="cb31-9"><a href="data-transformation.html#cb31-9" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">median</span>(dfclean<span class="sc">$</span>RT),</span>
<span id="cb31-10"><a href="data-transformation.html#cb31-10" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb31-11"><a href="data-transformation.html#cb31-11" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">3</span>)</span>
<span id="cb31-12"><a href="data-transformation.html#cb31-12" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">density</span>(dfclean<span class="sc">$</span>RT),</span>
<span id="cb31-13"><a href="data-transformation.html#cb31-13" tabindex="-1"></a>      <span class="at">lwd =</span> <span class="dv">2</span>, <span class="co"># thickness of line</span></span>
<span id="cb31-14"><a href="data-transformation.html#cb31-14" tabindex="-1"></a>      <span class="at">col =</span> <span class="st">&quot;chocolate3&quot;</span>)<span class="co"># density plot</span></span>
<span id="cb31-15"><a href="data-transformation.html#cb31-15" tabindex="-1"></a></span>
<span id="cb31-16"><a href="data-transformation.html#cb31-16" tabindex="-1"></a><span class="co">#Add a density plot,</span></span>
<span id="cb31-17"><a href="data-transformation.html#cb31-17" tabindex="-1"></a><span class="fu">hist</span>(dfclean<span class="sc">$</span>RT, <span class="at">breaks =</span> <span class="dv">100</span>,</span>
<span id="cb31-18"><a href="data-transformation.html#cb31-18" tabindex="-1"></a>     <span class="at">prob =</span> T)</span>
<span id="cb31-19"><a href="data-transformation.html#cb31-19" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">density</span>(dfclean<span class="sc">$</span>RT),</span>
<span id="cb31-20"><a href="data-transformation.html#cb31-20" tabindex="-1"></a>      <span class="at">lwd =</span> <span class="dv">2</span>, <span class="co"># thickness of line</span></span>
<span id="cb31-21"><a href="data-transformation.html#cb31-21" tabindex="-1"></a>      <span class="at">col =</span> <span class="st">&quot;chocolate3&quot;</span>)<span class="co"># density plot</span></span>
<span id="cb31-22"><a href="data-transformation.html#cb31-22" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">mean</span>(dfclean<span class="sc">$</span>RT),</span>
<span id="cb31-23"><a href="data-transformation.html#cb31-23" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb31-24"><a href="data-transformation.html#cb31-24" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb31-25"><a href="data-transformation.html#cb31-25" tabindex="-1"></a><span class="co">#add a line for the median</span></span>
<span id="cb31-26"><a href="data-transformation.html#cb31-26" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">median</span>(dfclean<span class="sc">$</span>RT),</span>
<span id="cb31-27"><a href="data-transformation.html#cb31-27" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb31-28"><a href="data-transformation.html#cb31-28" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">3</span>)</span>
<span id="cb31-29"><a href="data-transformation.html#cb31-29" tabindex="-1"></a></span>
<span id="cb31-30"><a href="data-transformation.html#cb31-30" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x =</span> <span class="st">&quot;topright&quot;</span>, <span class="co"># location of legend within plot area</span></span>
<span id="cb31-31"><a href="data-transformation.html#cb31-31" tabindex="-1"></a>       <span class="fu">c</span>(<span class="st">&quot;Density plot&quot;</span>, <span class="st">&quot;Mean&quot;</span>, <span class="st">&quot;Median&quot;</span>),</span>
<span id="cb31-32"><a href="data-transformation.html#cb31-32" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;chocolate3&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>),</span>
<span id="cb31-33"><a href="data-transformation.html#cb31-33" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>))</span></code></pre></div>
<p><img src="03_DataTransformation_files/figure-html/baseviz-1.png" width="70%" style="display: block; margin: auto;" /><img src="03_DataTransformation_files/figure-html/baseviz-2.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="pivoting-separating-and-uniting" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Pivoting, Separating and Uniting<a href="data-transformation.html#pivoting-separating-and-uniting" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>look at this <code>tibble(data.frame)</code></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data-transformation.html#cb32-1" tabindex="-1"></a>stocks <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb32-2"><a href="data-transformation.html#cb32-2" tabindex="-1"></a>  <span class="at">year   =</span> <span class="fu">c</span>(<span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2016</span>),</span>
<span id="cb32-3"><a href="data-transformation.html#cb32-3" tabindex="-1"></a>  <span class="at">half  =</span> <span class="fu">c</span>(   <span class="dv">1</span>,    <span class="dv">2</span>,     <span class="dv">1</span>,    <span class="dv">2</span>),</span>
<span id="cb32-4"><a href="data-transformation.html#cb32-4" tabindex="-1"></a>  <span class="at">return =</span> <span class="fu">c</span>(<span class="fl">1.88</span>, <span class="fl">0.59</span>, <span class="fl">0.92</span>, <span class="fl">0.17</span>)</span>
<span id="cb32-5"><a href="data-transformation.html#cb32-5" tabindex="-1"></a>)</span></code></pre></div>
<p>pivot_wider and pivot_longer are not perfect opposites. They have been deprecated
and replaced by <code>pivot_longer</code> and <code>pivot_wider</code></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-transformation.html#cb33-1" tabindex="-1"></a></span>
<span id="cb33-2"><a href="data-transformation.html#cb33-2" tabindex="-1"></a>stocks <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="data-transformation.html#cb33-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;year&quot;</span>,<span class="at">values_from =</span> <span class="st">&quot;return&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-4"><a href="data-transformation.html#cb33-4" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">`</span><span class="at">2015</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">2016</span><span class="st">`</span>,<span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>)</span>
<span id="cb33-5"><a href="data-transformation.html#cb33-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 3</span></span>
<span id="cb33-6"><a href="data-transformation.html#cb33-6" tabindex="-1"></a><span class="co">#&gt;    half year  value</span></span>
<span id="cb33-7"><a href="data-transformation.html#cb33-7" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;</span></span>
<span id="cb33-8"><a href="data-transformation.html#cb33-8" tabindex="-1"></a><span class="co">#&gt; 1     1 2015   1.88</span></span>
<span id="cb33-9"><a href="data-transformation.html#cb33-9" tabindex="-1"></a><span class="co">#&gt; 2     1 2016   0.92</span></span>
<span id="cb33-10"><a href="data-transformation.html#cb33-10" tabindex="-1"></a><span class="co">#&gt; 3     2 2015   0.59</span></span>
<span id="cb33-11"><a href="data-transformation.html#cb33-11" tabindex="-1"></a><span class="co">#&gt; 4     2 2016   0.17</span></span></code></pre></div>
<p>You can make data.frames with space using the <code>tribble()</code>
function</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data-transformation.html#cb34-1" tabindex="-1"></a>people <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb34-2"><a href="data-transformation.html#cb34-2" tabindex="-1"></a>  <span class="sc">~</span>name,             <span class="sc">~</span>key,    <span class="sc">~</span>value,</span>
<span id="cb34-3"><a href="data-transformation.html#cb34-3" tabindex="-1"></a>  <span class="co">#-----------------|--------|------</span></span>
<span id="cb34-4"><a href="data-transformation.html#cb34-4" tabindex="-1"></a>  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;age&quot;</span>,       <span class="dv">45</span>,</span>
<span id="cb34-5"><a href="data-transformation.html#cb34-5" tabindex="-1"></a>  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;height&quot;</span>,   <span class="dv">186</span>,</span>
<span id="cb34-6"><a href="data-transformation.html#cb34-6" tabindex="-1"></a>  <span class="st">&quot;Jessica Cordero&quot;</span>, <span class="st">&quot;age&quot;</span>,       <span class="dv">37</span>,</span>
<span id="cb34-7"><a href="data-transformation.html#cb34-7" tabindex="-1"></a>  <span class="st">&quot;Jessica Cordero&quot;</span>, <span class="st">&quot;height&quot;</span>,   <span class="dv">156</span></span>
<span id="cb34-8"><a href="data-transformation.html#cb34-8" tabindex="-1"></a>)</span>
<span id="cb34-9"><a href="data-transformation.html#cb34-9" tabindex="-1"></a></span>
<span id="cb34-10"><a href="data-transformation.html#cb34-10" tabindex="-1"></a>people</span>
<span id="cb34-11"><a href="data-transformation.html#cb34-11" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 3</span></span>
<span id="cb34-12"><a href="data-transformation.html#cb34-12" tabindex="-1"></a><span class="co">#&gt;   name            key    value</span></span>
<span id="cb34-13"><a href="data-transformation.html#cb34-13" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt;  &lt;dbl&gt;</span></span>
<span id="cb34-14"><a href="data-transformation.html#cb34-14" tabindex="-1"></a><span class="co">#&gt; 1 Phillip Woods   age       45</span></span>
<span id="cb34-15"><a href="data-transformation.html#cb34-15" tabindex="-1"></a><span class="co">#&gt; 2 Phillip Woods   height   186</span></span>
<span id="cb34-16"><a href="data-transformation.html#cb34-16" tabindex="-1"></a><span class="co">#&gt; 3 Jessica Cordero age       37</span></span>
<span id="cb34-17"><a href="data-transformation.html#cb34-17" tabindex="-1"></a><span class="co">#&gt; 4 Jessica Cordero height   156</span></span></code></pre></div>
<p><strong>Challenge 6</strong>: spread people so height and age have their own column</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-transformation.html#cb35-1" tabindex="-1"></a></span>
<span id="cb35-2"><a href="data-transformation.html#cb35-2" tabindex="-1"></a>newpeople <span class="ot">&lt;-</span> people <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="data-transformation.html#cb35-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(...)</span></code></pre></div>
<p><strong>Challenge 7</strong>: gather newpeople so that height and age are back together</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-transformation.html#cb36-1" tabindex="-1"></a></span>
<span id="cb36-2"><a href="data-transformation.html#cb36-2" tabindex="-1"></a>newpeople <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="data-transformation.html#cb36-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(...)</span></code></pre></div>
<p>You can separate or unite columns based upon a separator</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data-transformation.html#cb37-1" tabindex="-1"></a>people <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="data-transformation.html#cb37-2" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;first&quot;</span>,<span class="st">&quot;last&quot;</span>))</span>
<span id="cb37-3"><a href="data-transformation.html#cb37-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 4</span></span>
<span id="cb37-4"><a href="data-transformation.html#cb37-4" tabindex="-1"></a><span class="co">#&gt;   first   last    key    value</span></span>
<span id="cb37-5"><a href="data-transformation.html#cb37-5" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;</span></span>
<span id="cb37-6"><a href="data-transformation.html#cb37-6" tabindex="-1"></a><span class="co">#&gt; 1 Phillip Woods   age       45</span></span>
<span id="cb37-7"><a href="data-transformation.html#cb37-7" tabindex="-1"></a><span class="co">#&gt; 2 Phillip Woods   height   186</span></span>
<span id="cb37-8"><a href="data-transformation.html#cb37-8" tabindex="-1"></a><span class="co">#&gt; 3 Jessica Cordero age       37</span></span>
<span id="cb37-9"><a href="data-transformation.html#cb37-9" tabindex="-1"></a><span class="co">#&gt; 4 Jessica Cordero height   156</span></span></code></pre></div>
<p>How did it know? We usually have to specify the separator</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data-transformation.html#cb38-1" tabindex="-1"></a>weirdpeople <span class="ot">&lt;-</span> people <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="data-transformation.html#cb38-2" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;befored&quot;</span>,<span class="st">&quot;afterd&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;d&quot;</span>)</span></code></pre></div>
<p>Notice that the separator disappears</p>
<p><strong>Challenge 8</strong>: Unite the two columns above with “d” as a separator</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data-transformation.html#cb39-1" tabindex="-1"></a>weirdpeople <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="data-transformation.html#cb39-2" tabindex="-1"></a>  <span class="fu">unite</span>(...)</span></code></pre></div>
<p>That’s a lot to take in, so we’ll do questions about this content or
queries about how to accomplish different data transformations.</p>
</div>
<div id="solutions-to-challenges" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Solutions to Challenges<a href="data-transformation.html#solutions-to-challenges" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Challenge 1</strong>: Find and remove the rows with NAs, save it out to
“newdf”</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data-transformation.html#cb40-1" tabindex="-1"></a>ccolor <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="data-transformation.html#cb40-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">complete.cases</span>(.))</span>
<span id="cb40-3"><a href="data-transformation.html#cb40-3" tabindex="-1"></a></span>
<span id="cb40-4"><a href="data-transformation.html#cb40-4" tabindex="-1"></a>ccolor <span class="sc">%&gt;%</span></span>
<span id="cb40-5"><a href="data-transformation.html#cb40-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(RT))</span>
<span id="cb40-6"><a href="data-transformation.html#cb40-6" tabindex="-1"></a></span>
<span id="cb40-7"><a href="data-transformation.html#cb40-7" tabindex="-1"></a><span class="fu">as_tibble</span>(ccolor <span class="sc">%&gt;%</span></span>
<span id="cb40-8"><a href="data-transformation.html#cb40-8" tabindex="-1"></a>  <span class="fu">na.omit</span>())</span>
<span id="cb40-9"><a href="data-transformation.html#cb40-9" tabindex="-1"></a></span>
<span id="cb40-10"><a href="data-transformation.html#cb40-10" tabindex="-1"></a>newdf <span class="ot">&lt;-</span> ccolor <span class="sc">%&gt;%</span></span>
<span id="cb40-11"><a href="data-transformation.html#cb40-11" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span></code></pre></div>
<p><strong>Challenge 2</strong>: Filter out RT’s below 150 milliseconds and show how
many you’ve filtered out.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data-transformation.html#cb41-1" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> newdf <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="data-transformation.html#cb41-2" tabindex="-1"></a>  <span class="fu">filter</span>(RT <span class="sc">&gt;</span> <span class="dv">150</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="data-transformation.html#cb41-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>())</span></code></pre></div>
<p><strong>Challenge 3</strong>: Get the number of observations (rows) kept and removed
with <code>group_by()</code></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data-transformation.html#cb42-1" tabindex="-1"></a>newdf <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="data-transformation.html#cb42-2" tabindex="-1"></a>  <span class="fu">group_by</span>(RT <span class="sc">&gt;</span> <span class="dv">150</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="data-transformation.html#cb42-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="data-transformation.html#cb42-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">freq =</span> (n <span class="sc">/</span> <span class="fu">sum</span>(n))<span class="sc">*</span><span class="dv">100</span>)</span></code></pre></div>
<p><strong>Challenge 4</strong>: What is the mean reaction time and standard deviation
for congruent vs incongruent trials</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-transformation.html#cb43-1" tabindex="-1"></a><span class="co">#hint group_by(the factor you&#39;re interested in)</span></span>
<span id="cb43-2"><a href="data-transformation.html#cb43-2" tabindex="-1"></a>dfclean <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="data-transformation.html#cb43-3" tabindex="-1"></a>  <span class="fu">group_by</span>(con) <span class="sc">%&gt;%</span></span>
<span id="cb43-4"><a href="data-transformation.html#cb43-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mRT =</span> <span class="fu">mean</span>(RT), <span class="at">RTsd =</span> <span class="fu">sd</span>(RT))</span></code></pre></div>
<p><strong>Challenge 5</strong>: Get the mean and sd of participant means for congruent
vs incongruent trials and compare to the previous outcome.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-transformation.html#cb44-1" tabindex="-1"></a>dfclean <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="data-transformation.html#cb44-2" tabindex="-1"></a>  <span class="fu">group_by</span>(s,con) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="data-transformation.html#cb44-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">gmRT =</span> <span class="fu">mean</span>(RT)) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="data-transformation.html#cb44-4" tabindex="-1"></a>  <span class="fu">group_by</span>(con) <span class="sc">%&gt;%</span></span>
<span id="cb44-5"><a href="data-transformation.html#cb44-5" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mRT =</span> <span class="fu">mean</span>(gmRT), <span class="at">RTsd =</span> <span class="fu">sd</span>(gmRT))</span>
<span id="cb44-6"><a href="data-transformation.html#cb44-6" tabindex="-1"></a><span class="co">#&gt; `summarise()` has grouped output by &#39;s&#39;. You can override using the `.groups` argument.</span></span></code></pre></div>
<p><strong>Challenge 6</strong>: spread people so height and age have their own column</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-transformation.html#cb45-1" tabindex="-1"></a>newpeople <span class="ot">&lt;-</span> people <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="data-transformation.html#cb45-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> key, <span class="at">values_from =</span> value)</span></code></pre></div>
<p><strong>Challenge 7</strong>: gather newpeople so that height and age are back together</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-transformation.html#cb46-1" tabindex="-1"></a>newpeople <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="data-transformation.html#cb46-2" tabindex="-1"></a> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(age, height), <span class="at">names_to =</span> <span class="st">&quot;key&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>)</span></code></pre></div>
<p><strong>Challenge 8</strong>: Unite the two columns above with “d” as a separator</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data-transformation.html#cb47-1" tabindex="-1"></a></span>
<span id="cb47-2"><a href="data-transformation.html#cb47-2" tabindex="-1"></a>weirdpeople <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="data-transformation.html#cb47-3" tabindex="-1"></a>  <span class="fu">unite</span>(new, befored,afterd,<span class="at">sep =</span> <span class="st">&quot;d&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="importing-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-transformation-day-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sccastro/PsychMeasurement/docs/03_DataTransformation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
