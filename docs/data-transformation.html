<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Data Transformation | Psychological Measurement in R</title>
  <meta name="description" content="As a modern Psychologist, we can no longer be purely theoretical hypothesis generators, experimentalists, statisticians, or clinicians; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing research projects into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Data Transformation | Psychological Measurement in R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://spencercastro.com" />
  <meta property="og:image" content="https://spencercastro.comimages/UPsychLogo.jpg" />
  <meta property="og:description" content="As a modern Psychologist, we can no longer be purely theoretical hypothesis generators, experimentalists, statisticians, or clinicians; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing research projects into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="github-repo" content="sccastro/PsychMeasurement" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Data Transformation | Psychological Measurement in R" />
  
  <meta name="twitter:description" content="As a modern Psychologist, we can no longer be purely theoretical hypothesis generators, experimentalists, statisticians, or clinicians; now we must strive to be methodologically sound, balance experimental design against convenient populations, keep up with the ever-changing landscape of statistical tests and their caveats, and learn rudimentary computer programming on top of that! Therefore we need a tool that balances the comprehensibility of human language with the flexibility to keep up with developing statistical methods and the power to analyze any dataset. Enter R, the open-source statistical computing and graphics language with a powerful Integrated Development Environment (the Rstudio IDE), a robust community of developers, data scientists, and experts (who respond to questions!), and too many reputable online resources to read in a lifetime. The impetus to learn something new on top of your ongoing research may be hard to summon, but this course is designed to integrate your ongoing research projects into mastering R, and to provide tools for streamlining projects in the future." />
  <meta name="twitter:image" content="https://spencercastro.comimages/UPsychLogo.jpg" />

<meta name="author" content="Spencer Castro" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="importing-data.html"/>
<link rel="next" href="data-transformation-day-2.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="class_book.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Psychological Measurement in R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i><b>1</b> Syllabus</a><ul>
<li class="chapter" data-level="1.1" data-path="syllabus.html"><a href="syllabus.html#course-overview"><i class="fa fa-check"></i><b>1.1</b> Course Overview</a></li>
<li class="chapter" data-level="1.2" data-path="syllabus.html"><a href="syllabus.html#learning-outcomes-course-objectives"><i class="fa fa-check"></i><b>1.2</b> Learning Outcomes &amp; Course Objectives</a></li>
<li class="chapter" data-level="1.3" data-path="syllabus.html"><a href="syllabus.html#course-format"><i class="fa fa-check"></i><b>1.3</b> Course Format</a></li>
<li class="chapter" data-level="1.4" data-path="syllabus.html"><a href="syllabus.html#evaluation-methodsassignments"><i class="fa fa-check"></i><b>1.4</b> Evaluation Methods/Assignments</a></li>
<li class="chapter" data-level="1.5" data-path="syllabus.html"><a href="syllabus.html#grading-policy"><i class="fa fa-check"></i><b>1.5</b> Grading Policy</a></li>
<li class="chapter" data-level="1.6" data-path="syllabus.html"><a href="syllabus.html#student-rights-and-responsibilities"><i class="fa fa-check"></i><b>1.6</b> Student Rights and Responsibilities</a></li>
<li class="chapter" data-level="1.7" data-path="syllabus.html"><a href="syllabus.html#department-of-psychology-undergraduate-academic-misconduct-policy"><i class="fa fa-check"></i><b>1.7</b> Department of Psychology Undergraduate Academic Misconduct Policy</a></li>
<li class="chapter" data-level="1.8" data-path="syllabus.html"><a href="syllabus.html#course-policies"><i class="fa fa-check"></i><b>1.8</b> Course Policies</a></li>
<li class="chapter" data-level="1.9" data-path="syllabus.html"><a href="syllabus.html#university-attendance-requirements"><i class="fa fa-check"></i><b>1.9</b> University Attendance Requirements</a></li>
<li class="chapter" data-level="1.10" data-path="syllabus.html"><a href="syllabus.html#student-support-accommodations"><i class="fa fa-check"></i><b>1.10</b> Student Support &amp; Accommodations</a></li>
<li class="chapter" data-level="1.11" data-path="syllabus.html"><a href="syllabus.html#academic-calendar"><i class="fa fa-check"></i><b>1.11</b> Academic Calendar</a></li>
<li class="chapter" data-level="1.12" data-path="syllabus.html"><a href="syllabus.html#course-schedule"><i class="fa fa-check"></i><b>1.12</b> Course Schedule</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#baser-walkthrough"><i class="fa fa-check"></i>BaseR walkthrough</a></li>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#help"><i class="fa fa-check"></i><b>2.1</b> Help</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#vectors"><i class="fa fa-check"></i><b>2.2</b> VECTORS</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#programming"><i class="fa fa-check"></i><b>2.3</b> PROGRAMMING</a><ul>
<li class="chapter" data-level="2.3.1" data-path="introduction.html"><a href="introduction.html#for-loop"><i class="fa fa-check"></i><b>2.3.1</b> For loop</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction.html"><a href="introduction.html#while-loop"><i class="fa fa-check"></i><b>2.3.2</b> While loop</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#assignment-1"><i class="fa fa-check"></i><b>2.4</b> Assignment 1</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>3</b> Importing Data</a><ul>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#reading-files-into-r"><i class="fa fa-check"></i>Reading files into R</a></li>
<li class="chapter" data-level="3.1" data-path="importing-data.html"><a href="importing-data.html#whats-a-tibble"><i class="fa fa-check"></i><b>3.1</b> What’s a tibble?</a></li>
<li class="chapter" data-level="3.2" data-path="importing-data.html"><a href="importing-data.html#save-your-dataset"><i class="fa fa-check"></i><b>3.2</b> Save your dataset:</a></li>
<li class="chapter" data-level="3.3" data-path="importing-data.html"><a href="importing-data.html#cleaning-your-data-file"><i class="fa fa-check"></i><b>3.3</b> Cleaning your data file</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>4</b> Data Transformation</a><ul>
<li class="chapter" data-level="" data-path="data-transformation.html"><a href="data-transformation.html#data-transformation-with-dplyr"><i class="fa fa-check"></i>Data Transformation with Dplyr</a></li>
<li class="chapter" data-level="4.1" data-path="data-transformation.html"><a href="data-transformation.html#get-a-dataset-from-your-.rdata-file"><i class="fa fa-check"></i><b>4.1</b> Get a dataset from your .RData file</a></li>
<li class="chapter" data-level="4.2" data-path="data-transformation.html"><a href="data-transformation.html#introduction-to-the-pipe"><i class="fa fa-check"></i><b>4.2</b> Introduction to “The Pipe”</a></li>
<li class="chapter" data-level="4.3" data-path="data-transformation.html"><a href="data-transformation.html#aside-on-the-apply-family"><i class="fa fa-check"></i><b>4.3</b> Aside on the apply family</a></li>
<li class="chapter" data-level="4.4" data-path="data-transformation.html"><a href="data-transformation.html#solutions-to-challenges"><i class="fa fa-check"></i><b>4.4</b> Solutions to Challenges</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html"><i class="fa fa-check"></i><b>5</b> Data Transformation Day 2</a><ul>
<li class="chapter" data-level="5.1" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#rcolorbrewer"><i class="fa fa-check"></i><b>5.1</b> RcolorBrewer</a></li>
<li class="chapter" data-level="5.2" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#modifying-factor-levels"><i class="fa fa-check"></i><b>5.2</b> Modifying Factor Levels</a></li>
<li class="chapter" data-level="5.3" data-path="data-transformation-day-2.html"><a href="data-transformation-day-2.html#play-time"><i class="fa fa-check"></i><b>5.3</b> Play time</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>6</b> Visualization with ggplot2</a><ul>
<li class="chapter" data-level="6.1" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#statistical-transformations"><i class="fa fa-check"></i><b>6.1</b> Statistical Transformations</a></li>
<li class="chapter" data-level="6.2" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#changing-the-position"><i class="fa fa-check"></i><b>6.2</b> Changing the position</a></li>
<li class="chapter" data-level="6.3" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#coordinates"><i class="fa fa-check"></i><b>6.3</b> Coordinates</a><ul>
<li class="chapter" data-level="6.3.1" data-path="visualization-with-ggplot2.html"><a href="visualization-with-ggplot2.html#plot-maps-if-you-want"><i class="fa fa-check"></i><b>6.3.1</b> Plot maps if you want</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html"><i class="fa fa-check"></i><b>7</b> Introduction to Statistics</a><ul>
<li class="chapter" data-level="7.0.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#descriptive-stats"><i class="fa fa-check"></i><b>7.0.1</b> Descriptive Stats</a></li>
<li class="chapter" data-level="7.0.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>7.0.2</b> Measures of Central Tendency</a></li>
<li class="chapter" data-level="7.0.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-variability"><i class="fa fa-check"></i><b>7.0.3</b> Measures of Variability</a></li>
<li class="chapter" data-level="7.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#clinical-trial-example"><i class="fa fa-check"></i><b>7.1</b> Clinical Trial Example</a><ul>
<li class="chapter" data-level="7.1.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chi-square-goodness-of-fit-test-pearson-1900-review"><i class="fa fa-check"></i><b>7.1.1</b> Chi Square goodness-of-fit test (Pearson, 1900) Review</a></li>
<li class="chapter" data-level="7.1.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chi-square-test-of-independence"><i class="fa fa-check"></i><b>7.1.2</b> Chi-square test of independence</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="linear-models.html"><a href="linear-models.html"><i class="fa fa-check"></i><b>8</b> Linear Models</a><ul>
<li class="chapter" data-level="" data-path="linear-models.html"><a href="linear-models.html#steps-of-linear-models"><i class="fa fa-check"></i>Steps of Linear Models</a></li>
<li class="chapter" data-level="8.1" data-path="linear-models.html"><a href="linear-models.html#step-1.-get-your-data"><i class="fa fa-check"></i><b>8.1</b> Step 1. Get your data</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="multilevel-models.html"><a href="multilevel-models.html"><i class="fa fa-check"></i><b>9</b> Multilevel Models</a><ul>
<li class="chapter" data-level="" data-path="multilevel-models.html"><a href="multilevel-models.html#steps-of-multilevel-models"><i class="fa fa-check"></i>Steps of Multilevel Models</a><ul>
<li class="chapter" data-level="9.0.1" data-path="multilevel-models.html"><a href="multilevel-models.html#mixed-models-in-r"><i class="fa fa-check"></i><b>9.0.1</b> Mixed models in R</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Psychological Measurement in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1">
<h1><span class="header-section-number">4</span> Data Transformation</h1>
<blockquote>
“Happy families are all alike; every unhappy family is unhappy in its own way.”
<div style="text-align: right">
— Leo Tolstoy
</div>
</blockquote>
<blockquote>
“Tidy datasets are all alike, but every messy dataset is messy in its own way.”
<div style="text-align: right">
— Hadley Wickham
</div>
</blockquote>
<p>First off…</p>
<h4>
Advanced R Challenges
</h4>
<p>This challenge is to understand and use this function to read in a series of csv files and transform them into
one data.frame.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"></a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="co">#Joel&#39;s awesome function</span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3"></a>
<a class="sourceLine" id="cb31-4" data-line-number="4">combineCSV &lt;-<span class="st"> </span><span class="cf">function</span>(fPath){ <span class="co">#see the r base cheatsheet for function syntax</span></a>
<a class="sourceLine" id="cb31-5" data-line-number="5">  <span class="co"># List all files in the path</span></a>
<a class="sourceLine" id="cb31-6" data-line-number="6">  f &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="dt">path =</span> fPath, <span class="dt">recursive =</span> <span class="ot">TRUE</span>) <span class="co">#see ?list.files</span></a>
<a class="sourceLine" id="cb31-7" data-line-number="7">  </a>
<a class="sourceLine" id="cb31-8" data-line-number="8">  <span class="co">#separate files list and place into tibble (This is all the names and subids in the titles of the files)</span></a>
<a class="sourceLine" id="cb31-9" data-line-number="9">  f_split &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(<span class="kw">str_split</span>(f, <span class="st">&quot;_|/&quot;</span>, <span class="dt">simplify =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#see ?str_split from stringr package, separated by &quot;_&quot;</span></a>
<a class="sourceLine" id="cb31-10" data-line-number="10"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">.id =</span> <span class="kw">row_number</span>()) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#How does making a row number column help this process?</span></a>
<a class="sourceLine" id="cb31-11" data-line-number="11"><span class="st">    </span><span class="kw">select</span>(<span class="st">&quot;.id&quot;</span>, <span class="kw">everything</span>()) <span class="co">#How does everything() work?</span></a>
<a class="sourceLine" id="cb31-12" data-line-number="12">  </a>
<a class="sourceLine" id="cb31-13" data-line-number="13">  <span class="co">#read in all files to list</span></a>
<a class="sourceLine" id="cb31-14" data-line-number="14">  fls &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="kw">str_c</span>(fPath, f), read.csv, <span class="dt">header =</span> <span class="ot">FALSE</span>) <span class="co">#see ?str_c from stringr and ?lapply from the apply family</span></a>
<a class="sourceLine" id="cb31-15" data-line-number="15">  </a>
<a class="sourceLine" id="cb31-16" data-line-number="16">  <span class="co">#convert list to data frame</span></a>
<a class="sourceLine" id="cb31-17" data-line-number="17">  d &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">rbindlist</span>(fls, <span class="dt">fill =</span> <span class="ot">TRUE</span>, <span class="dt">idcol =</span> <span class="ot">TRUE</span>)) <span class="co">#see ?rbind_list from the data.table package</span></a>
<a class="sourceLine" id="cb31-18" data-line-number="18">  </a>
<a class="sourceLine" id="cb31-19" data-line-number="19">  <span class="co">#join data with identifying information</span></a>
<a class="sourceLine" id="cb31-20" data-line-number="20">  e &lt;-<span class="st"> </span>f_split <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Join df of names and ids with df of data</span></a>
<a class="sourceLine" id="cb31-21" data-line-number="21"><span class="st">    </span><span class="kw">full_join</span>(d, <span class="dt">by =</span> <span class="st">&quot;.id&quot;</span>) <span class="co">#See ?full_join</span></a>
<a class="sourceLine" id="cb31-22" data-line-number="22">}</a></code></pre></div>
<div id="data-transformation-with-dplyr" class="section level2 unnumbered">
<h2>Data Transformation with Dplyr</h2>
<p>First, we clean the environment and get the <code>tidyverse</code>, which has <code>dplyr</code>.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
</div>
<div id="get-a-dataset-from-your-.rdata-file" class="section level2">
<h2><span class="header-section-number">4.1</span> Get a dataset from your .RData file</h2>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">load</span>(<span class="st">&#39;data/ready.RData&#39;</span>)</a></code></pre></div>
<p><code>ready.Rdata</code> has multiple dataframes within it. This is the the helpful thing about <code>.RData</code> files. They can contain all of the dataframes you need for a project or analysis.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="dt">subject =</span> s, <span class="dt">congruency =</span> con, <span class="dt">stimulus =</span>S,</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">          <span class="dt">response =</span> R, <span class="dt">reactionTime =</span> RT))</a></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="kw">tbl_df</span>(ccolor) <span class="co">#Converts data to tbl class - Easier to view</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3"><span class="co">#&gt; # A tibble: 6,400 x 5</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="co">#&gt;   s     con         S     R        RT</span></a>
<a class="sourceLine" id="cb35-5" data-line-number="5"><span class="co">#&gt;   &lt;fct&gt; &lt;chr&gt;       &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb35-6" data-line-number="6"><span class="co">#&gt; 1 1     congruent   blue  blue   1023</span></a>
<a class="sourceLine" id="cb35-7" data-line-number="7"><span class="co">#&gt; 2 1     incongruent blue  red     665</span></a>
<a class="sourceLine" id="cb35-8" data-line-number="8"><span class="co">#&gt; 3 1     congruent   red   red    1568</span></a>
<a class="sourceLine" id="cb35-9" data-line-number="9"><span class="co">#&gt; 4 1     congruent   blue  blue    955</span></a>
<a class="sourceLine" id="cb35-10" data-line-number="10"><span class="co">#&gt; 5 1     incongruent red   blue    792</span></a>
<a class="sourceLine" id="cb35-11" data-line-number="11"><span class="co">#&gt; 6 1     congruent   red   red     452</span></a>
<a class="sourceLine" id="cb35-12" data-line-number="12"><span class="co">#&gt; # … with 6,394 more rows</span></a></code></pre></div>
<p>You can compare the classes…</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="kw">class</span>(ccolor)</a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="co">#&gt; [1] &quot;data.frame&quot;</span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="kw">class</span>(<span class="kw">tbl_df</span>(ccolor))</a>
<a class="sourceLine" id="cb36-4" data-line-number="4"><span class="co">#&gt; [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></a></code></pre></div>
<p>or get a glimpse of the data…</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw">glimpse</span>(ccolor) <span class="co">#Gives the same information as clicking the blue circle in the environment panel</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="co">#&gt; Observations: 6,400</span></a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="co">#&gt; Variables: 5</span></a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="co">#&gt; $ s   &lt;fct&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></a>
<a class="sourceLine" id="cb37-5" data-line-number="5"><span class="co">#&gt; $ con &lt;chr&gt; &quot;congruent&quot;, &quot;incongruent&quot;, &quot;congruent&quot;, &quot;congruent&quot;, &quot;incongruen…</span></a>
<a class="sourceLine" id="cb37-6" data-line-number="6"><span class="co">#&gt; $ S   &lt;fct&gt; blue, blue, red, blue, red, red, blue, red, blue, red, blue, blue…</span></a>
<a class="sourceLine" id="cb37-7" data-line-number="7"><span class="co">#&gt; $ R   &lt;chr&gt; &quot;blue&quot;, &quot;red&quot;, &quot;red&quot;, &quot;blue&quot;, &quot;blue&quot;, &quot;red&quot;, &quot;blue&quot;, &quot;red&quot;, &quot;blue…</span></a>
<a class="sourceLine" id="cb37-8" data-line-number="8"><span class="co">#&gt; $ RT  &lt;dbl&gt; 1023, 665, 1568, 955, 792, 452, 369, 1067, 414, 763, 766, 563, 11…</span></a></code></pre></div>
<p>or get the full thing…</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw">View</span>(ccolor) <span class="co">#Gives you a navigable display</span></a></code></pre></div>
</div>
<div id="introduction-to-the-pipe" class="section level2">
<h2><span class="header-section-number">4.2</span> Introduction to “The Pipe”</h2>
<p>The pipe, aka <code>%&gt;%</code>, takes you a level into the data, so…</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"></a>
<a class="sourceLine" id="cb39-2" data-line-number="2">ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">n</span>()) <span class="co"># is the same as...</span></a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="co">#&gt;   count</span></a>
<a class="sourceLine" id="cb39-5" data-line-number="5"><span class="co">#&gt; 1  6400</span></a>
<a class="sourceLine" id="cb39-6" data-line-number="6"></a>
<a class="sourceLine" id="cb39-7" data-line-number="7"><span class="kw">summarise</span>(ccolor, <span class="dt">count =</span> <span class="kw">n</span>())</a>
<a class="sourceLine" id="cb39-8" data-line-number="8"><span class="co">#&gt;   count</span></a>
<a class="sourceLine" id="cb39-9" data-line-number="9"><span class="co">#&gt; 1  6400</span></a></code></pre></div>
<p>Now let’s do some descriptives…</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="kw">nrow</span>(.)) </a>
<a class="sourceLine" id="cb40-4" data-line-number="4"><span class="co">#&gt; # A tibble: 20 x 2</span></a>
<a class="sourceLine" id="cb40-5" data-line-number="5"><span class="co">#&gt;   s     `nrow(.)`</span></a>
<a class="sourceLine" id="cb40-6" data-line-number="6"><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;</span></a>
<a class="sourceLine" id="cb40-7" data-line-number="7"><span class="co">#&gt; 1 1          6400</span></a>
<a class="sourceLine" id="cb40-8" data-line-number="8"><span class="co">#&gt; 2 2          6400</span></a>
<a class="sourceLine" id="cb40-9" data-line-number="9"><span class="co">#&gt; 3 3          6400</span></a>
<a class="sourceLine" id="cb40-10" data-line-number="10"><span class="co">#&gt; 4 4          6400</span></a>
<a class="sourceLine" id="cb40-11" data-line-number="11"><span class="co">#&gt; 5 5          6400</span></a>
<a class="sourceLine" id="cb40-12" data-line-number="12"><span class="co">#&gt; 6 6          6400</span></a>
<a class="sourceLine" id="cb40-13" data-line-number="13"><span class="co">#&gt; # … with 14 more rows</span></a>
<a class="sourceLine" id="cb40-14" data-line-number="14"></a>
<a class="sourceLine" id="cb40-15" data-line-number="15"><span class="co"># (Harder to read long, so we can spread it out)</span></a>
<a class="sourceLine" id="cb40-16" data-line-number="16"></a>
<a class="sourceLine" id="cb40-17" data-line-number="17">ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-18" data-line-number="18"><span class="st">  </span><span class="kw">group_by</span>(s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-19" data-line-number="19"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">nrow</span>(.)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Let&#39;s name this something easy to type and remember, like &quot;count&quot;</span></a>
<a class="sourceLine" id="cb40-20" data-line-number="20"><span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> s, <span class="dt">value =</span> count)</a>
<a class="sourceLine" id="cb40-21" data-line-number="21"><span class="co">#&gt; # A tibble: 1 x 20</span></a>
<a class="sourceLine" id="cb40-22" data-line-number="22"><span class="co">#&gt;     `1`   `2`   `3`   `4`   `5`   `6`   `7`   `8`   `9`  `10`  `11`  `12`  `13`</span></a>
<a class="sourceLine" id="cb40-23" data-line-number="23"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb40-24" data-line-number="24"><span class="co">#&gt; 1  6400  6400  6400  6400  6400  6400  6400  6400  6400  6400  6400  6400  6400</span></a>
<a class="sourceLine" id="cb40-25" data-line-number="25"><span class="co">#&gt; # … with 7 more variables: `14` &lt;int&gt;, `15` &lt;int&gt;, `16` &lt;int&gt;, `17` &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb40-26" data-line-number="26"><span class="co">#&gt; #   `18` &lt;int&gt;, `19` &lt;int&gt;, `20` &lt;int&gt;</span></a></code></pre></div>
<p>We can also wrap functions around the whole data object…</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="kw">as.matrix</span>(ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">nrow</span>(.)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-4" data-line-number="4"><span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> s, <span class="dt">value =</span> count)) <span class="co">#or we can subset it</span></a>
<a class="sourceLine" id="cb41-5" data-line-number="5"><span class="co">#&gt;         1    2    3    4    5    6    7    8    9   10   11   12   13   14   15</span></a>
<a class="sourceLine" id="cb41-6" data-line-number="6"><span class="co">#&gt; [1,] 6400 6400 6400 6400 6400 6400 6400 6400 6400 6400 6400 6400 6400 6400 6400</span></a>
<a class="sourceLine" id="cb41-7" data-line-number="7"><span class="co">#&gt;        16   17   18   19   20</span></a>
<a class="sourceLine" id="cb41-8" data-line-number="8"><span class="co">#&gt; [1,] 6400 6400 6400 6400 6400</span></a>
<a class="sourceLine" id="cb41-9" data-line-number="9"></a>
<a class="sourceLine" id="cb41-10" data-line-number="10"><span class="kw">data.frame</span>(ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-11" data-line-number="11"><span class="st">  </span><span class="kw">group_by</span>(s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-12" data-line-number="12"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">nrow</span>(.)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-13" data-line-number="13"><span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> s, <span class="dt">value =</span> count))[,<span class="dv">4</span><span class="op">:</span><span class="dv">7</span>]</a>
<a class="sourceLine" id="cb41-14" data-line-number="14"><span class="co">#&gt;     X4   X5   X6   X7</span></a>
<a class="sourceLine" id="cb41-15" data-line-number="15"><span class="co">#&gt; 1 6400 6400 6400 6400</span></a></code></pre></div>
<p>What happened to the names? What is that X4, X5, stuff? That’s what R does when it doesn’t know the column names, but in this case it actually does. Check with colnames()</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="kw">colnames</span>(ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="st">           </span><span class="kw">group_by</span>(s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-3" data-line-number="3"><span class="st">           </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">nrow</span>(.)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Let&#39;s name this something easy to type and remember, like &quot;count&quot;</span></a>
<a class="sourceLine" id="cb42-4" data-line-number="4"><span class="st">           </span><span class="kw">spread</span>(<span class="dt">key =</span> s, <span class="dt">value =</span> count))</a>
<a class="sourceLine" id="cb42-5" data-line-number="5"><span class="co">#&gt;  [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot;  &quot;9&quot;  &quot;10&quot; &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; &quot;15&quot;</span></a>
<a class="sourceLine" id="cb42-6" data-line-number="6"><span class="co">#&gt; [16] &quot;16&quot; &quot;17&quot; &quot;18&quot; &quot;19&quot; &quot;20&quot;</span></a></code></pre></div>
<p>None of these changes are being saved! You can make new objects with the <code>&lt;-</code> operator.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">df &lt;-<span class="st"> </span>ccolor <span class="co">#do some stuff here</span></a></code></pre></div>
<p>Above I used <code>group_by(s)</code>, which groups by participant, <code>summarise()</code> with <code>nrow(.)</code>, which counts the number of rows,
and <code>spread()</code>, which takes the column s, turns each row into a column, and puts the value argument in that column.</p>
<p>There’s also <code>filter()</code>, <code>gather()</code>, <code>separate()</code>, <code>unite()</code>, <code>select()</code>, <code>distinct()</code>, <code>sample_n()</code>, <code>slice()</code>, and many more.</p>
<p>For example:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw">as_tibble</span>(ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(s <span class="op">==</span><span class="st"> </span><span class="dv">1</span>))<span class="co"># &quot;==&quot; is a logic operator, which works with most classes of data</span></a>
<a class="sourceLine" id="cb44-3" data-line-number="3"><span class="co">#&gt; # A tibble: 320 x 5</span></a>
<a class="sourceLine" id="cb44-4" data-line-number="4"><span class="co">#&gt;   s     con         S     R        RT</span></a>
<a class="sourceLine" id="cb44-5" data-line-number="5"><span class="co">#&gt;   &lt;fct&gt; &lt;chr&gt;       &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb44-6" data-line-number="6"><span class="co">#&gt; 1 1     congruent   blue  blue   1023</span></a>
<a class="sourceLine" id="cb44-7" data-line-number="7"><span class="co">#&gt; 2 1     incongruent blue  red     665</span></a>
<a class="sourceLine" id="cb44-8" data-line-number="8"><span class="co">#&gt; 3 1     congruent   red   red    1568</span></a>
<a class="sourceLine" id="cb44-9" data-line-number="9"><span class="co">#&gt; 4 1     congruent   blue  blue    955</span></a>
<a class="sourceLine" id="cb44-10" data-line-number="10"><span class="co">#&gt; 5 1     incongruent red   blue    792</span></a>
<a class="sourceLine" id="cb44-11" data-line-number="11"><span class="co">#&gt; 6 1     congruent   red   red     452</span></a>
<a class="sourceLine" id="cb44-12" data-line-number="12"><span class="co">#&gt; # … with 314 more rows</span></a>
<a class="sourceLine" id="cb44-13" data-line-number="13"></a>
<a class="sourceLine" id="cb44-14" data-line-number="14"><span class="kw">class</span>(ccolor<span class="op">$</span>s)</a>
<a class="sourceLine" id="cb44-15" data-line-number="15"><span class="co">#&gt; [1] &quot;factor&quot;</span></a></code></pre></div>
</div>
<div id="aside-on-the-apply-family" class="section level2">
<h2><span class="header-section-number">4.3</span> Aside on the apply family</h2>
<p><em>&lt;ASIDE&gt;</em> - for those of you interested in replacing your For Loops, this is how you’d do it.
Here’s a quick introduction to the apply family. We can apply <code>class()</code> to muliple columns.</p>
<p>Say we want to get the class of every column…</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="kw">apply</span>(ccolor, <span class="dt">MARGIN =</span> <span class="dv">2</span>, <span class="dt">FUN =</span> class) <span class="co">#Something about changing it to an array loses its class attributes</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="co">#&gt;           s         con           S           R          RT </span></a>
<a class="sourceLine" id="cb45-3" data-line-number="3"><span class="co">#&gt; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot;</span></a>
<a class="sourceLine" id="cb45-4" data-line-number="4"><span class="kw">lapply</span>(ccolor, <span class="dt">FUN =</span> class) <span class="co">#list apply makes the output of the call a list</span></a>
<a class="sourceLine" id="cb45-5" data-line-number="5"><span class="co">#&gt; $s</span></a>
<a class="sourceLine" id="cb45-6" data-line-number="6"><span class="co">#&gt; [1] &quot;factor&quot;</span></a>
<a class="sourceLine" id="cb45-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb45-8" data-line-number="8"><span class="co">#&gt; $con</span></a>
<a class="sourceLine" id="cb45-9" data-line-number="9"><span class="co">#&gt; [1] &quot;character&quot;</span></a>
<a class="sourceLine" id="cb45-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb45-11" data-line-number="11"><span class="co">#&gt; $S</span></a>
<a class="sourceLine" id="cb45-12" data-line-number="12"><span class="co">#&gt; [1] &quot;factor&quot;</span></a>
<a class="sourceLine" id="cb45-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb45-14" data-line-number="14"><span class="co">#&gt; $R</span></a>
<a class="sourceLine" id="cb45-15" data-line-number="15"><span class="co">#&gt; [1] &quot;character&quot;</span></a>
<a class="sourceLine" id="cb45-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb45-17" data-line-number="17"><span class="co">#&gt; $RT</span></a>
<a class="sourceLine" id="cb45-18" data-line-number="18"><span class="co">#&gt; [1] &quot;numeric&quot;</span></a>
<a class="sourceLine" id="cb45-19" data-line-number="19"><span class="kw">sapply</span>(ccolor,<span class="dt">FUN =</span> class) <span class="co">#simple apply tries to output the simplest outcome</span></a>
<a class="sourceLine" id="cb45-20" data-line-number="20"><span class="co">#&gt;           s         con           S           R          RT </span></a>
<a class="sourceLine" id="cb45-21" data-line-number="21"><span class="co">#&gt;    &quot;factor&quot; &quot;character&quot;    &quot;factor&quot; &quot;character&quot;   &quot;numeric&quot;</span></a></code></pre></div>
<p>The bottom two assume you mean the columns, while the top one you have to specify.
tapply is different, because you index (or group) by another variable. Say we want mean RT by subject…</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="kw">tapply</span>(<span class="dt">X =</span> ccolor<span class="op">$</span>RT, <span class="dt">INDEX =</span> ccolor<span class="op">$</span>s, <span class="dt">FUN =</span> mean) <span class="co">#We&#39;d do it like that.</span></a>
<a class="sourceLine" id="cb46-2" data-line-number="2"><span class="co">#&gt;    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16 </span></a>
<a class="sourceLine" id="cb46-3" data-line-number="3"><span class="co">#&gt;  790  731  485  847  824  536 1065 1325 1090 1002  840  914  900 1012  953   NA </span></a>
<a class="sourceLine" id="cb46-4" data-line-number="4"><span class="co">#&gt;   17   18   19   20 </span></a>
<a class="sourceLine" id="cb46-5" data-line-number="5"><span class="co">#&gt;  996  980  719  623</span></a></code></pre></div>
<p>mapply stands for &quot;multivariate apply’, and works like this:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1"><span class="co"># Create a 4x4 matrix</span></a>
<a class="sourceLine" id="cb47-2" data-line-number="2">Q1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">4</span>), <span class="kw">rep</span>(<span class="dv">2</span>, <span class="dv">4</span>), <span class="kw">rep</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="kw">rep</span>(<span class="dv">4</span>, <span class="dv">4</span>)),<span class="dv">4</span>,<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb47-3" data-line-number="3">Q1 <span class="co">#Or you could use mapply()</span></a>
<a class="sourceLine" id="cb47-4" data-line-number="4"><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></a>
<a class="sourceLine" id="cb47-5" data-line-number="5"><span class="co">#&gt; [1,]    1    2    3    4</span></a>
<a class="sourceLine" id="cb47-6" data-line-number="6"><span class="co">#&gt; [2,]    1    2    3    4</span></a>
<a class="sourceLine" id="cb47-7" data-line-number="7"><span class="co">#&gt; [3,]    1    2    3    4</span></a>
<a class="sourceLine" id="cb47-8" data-line-number="8"><span class="co">#&gt; [4,]    1    2    3    4</span></a>
<a class="sourceLine" id="cb47-9" data-line-number="9"><span class="kw">mapply</span>(rep, <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,<span class="dv">4</span>) <span class="co">#repeat 1 through 4, 4 times</span></a>
<a class="sourceLine" id="cb47-10" data-line-number="10"><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></a>
<a class="sourceLine" id="cb47-11" data-line-number="11"><span class="co">#&gt; [1,]    1    2    3    4</span></a>
<a class="sourceLine" id="cb47-12" data-line-number="12"><span class="co">#&gt; [2,]    1    2    3    4</span></a>
<a class="sourceLine" id="cb47-13" data-line-number="13"><span class="co">#&gt; [3,]    1    2    3    4</span></a>
<a class="sourceLine" id="cb47-14" data-line-number="14"><span class="co">#&gt; [4,]    1    2    3    4</span></a></code></pre></div>
<p>Say you want to mean-center some data</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">dataPoints &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">30</span>), <span class="dt">nrow=</span><span class="dv">5</span>, <span class="dt">ncol=</span><span class="dv">6</span>)</a></code></pre></div>
<p>Find means per column with <code>apply()</code></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">dataPoints_means &lt;-<span class="st"> </span><span class="kw">apply</span>(dataPoints, <span class="dv">2</span>, mean) <span class="co">#Margin = 2 signifies &quot;do it to the columns&quot;</span></a></code></pre></div>
<p>Find standard deviation with <code>apply()</code></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">dataPoints_sdev &lt;-<span class="st"> </span><span class="kw">apply</span>(dataPoints, <span class="dv">2</span>, sd)</a></code></pre></div>
<p>Center the points</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">dataPoints_Trans1 &lt;-<span class="st"> </span><span class="kw">sweep</span>(dataPoints, <span class="dv">2</span>, dataPoints_means,<span class="st">&quot;-&quot;</span>) <span class="co">#subtract mean from points in columns</span></a></code></pre></div>
<p>Return the result</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">dataPoints_Trans1</a>
<a class="sourceLine" id="cb52-2" data-line-number="2"><span class="co">#&gt;        [,1]     [,2]   [,3]    [,4]    [,5]   [,6]</span></a>
<a class="sourceLine" id="cb52-3" data-line-number="3"><span class="co">#&gt; [1,] -0.807  1.43794 -0.758 -1.3013  0.0376  0.580</span></a>
<a class="sourceLine" id="cb52-4" data-line-number="4"><span class="co">#&gt; [2,]  0.849 -1.53229  0.425  0.0397 -0.0676 -0.258</span></a>
<a class="sourceLine" id="cb52-5" data-line-number="5"><span class="co">#&gt; [3,] -1.844  0.04220  1.861  0.5091 -1.7351  0.662</span></a>
<a class="sourceLine" id="cb52-6" data-line-number="6"><span class="co">#&gt; [4,]  0.588  0.04533 -1.835  1.1047  0.3072 -0.149</span></a>
<a class="sourceLine" id="cb52-7" data-line-number="7"><span class="co">#&gt; [5,]  1.215  0.00682  0.308 -0.3523  1.4579 -0.835</span></a></code></pre></div>
<p>Normalize</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1">dataPoints_Trans2 &lt;-<span class="st"> </span><span class="kw">sweep</span>(dataPoints_Trans1, <span class="dv">2</span>, dataPoints_sdev, <span class="st">&quot;/&quot;</span>) <span class="co">#divide new point values by standard deviation in columns</span></a></code></pre></div>
<p>Return the result</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">dataPoints_Trans2</a>
<a class="sourceLine" id="cb54-2" data-line-number="2"><span class="co">#&gt;        [,1]     [,2]   [,3]    [,4]    [,5]   [,6]</span></a>
<a class="sourceLine" id="cb54-3" data-line-number="3"><span class="co">#&gt; [1,] -0.628  1.36800 -0.547 -1.4329  0.0328  0.929</span></a>
<a class="sourceLine" id="cb54-4" data-line-number="4"><span class="co">#&gt; [2,]  0.661 -1.45776  0.306  0.0437 -0.0591 -0.413</span></a>
<a class="sourceLine" id="cb54-5" data-line-number="5"><span class="co">#&gt; [3,] -1.436  0.04015  1.343  0.5607 -1.5165  1.060</span></a>
<a class="sourceLine" id="cb54-6" data-line-number="6"><span class="co">#&gt; [4,]  0.458  0.04312 -1.325  1.2165  0.2685 -0.239</span></a>
<a class="sourceLine" id="cb54-7" data-line-number="7"><span class="co">#&gt; [5,]  0.946  0.00649  0.222 -0.3880  1.2742 -1.337</span></a></code></pre></div>
<p>Now you have mean-centered data points, probably for a regression model.</p>
<p><em>&lt;/ASIDE&gt;</em></p>
<p>##Extracting rows
One thing we always want to do is extract rows based on some criteria. For example, in Reaction Time data
we often trim the early responses as anticipatory, and the late responses as outliers.</p>
<p><strong>Challenge 1</strong>: Find and remove the rows with NAs, save it out to “newdf”</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1">newdf &lt;-<span class="st"> </span>...</a></code></pre></div>
<p><strong>Challenge 2</strong>: Filter out RT’s below 150 milliseconds and show how many you’ve filtered out.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1">newdf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(...) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb56-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(...)</a></code></pre></div>
<p><strong>Challenge 3</strong>: Get the number of observations (rows) kept and removed with <code>group_by()</code></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1">newdf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(...) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(...)</a></code></pre></div>
<p>In papers, you want to report the proportion of data you have removed and the criteria with which you removed that data.</p>
<p>Now you have the slow responses, but a more appropriate standard might be removing data
above three standard deviations from the mean for each participant’s own distribution.
Let’s try that now…</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1">newdf <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Step 1 is to group by the subject and get the mean and sd</span></a>
<a class="sourceLine" id="cb58-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mRT =</span> <span class="kw">mean</span>(RT), <span class="dt">RTsd =</span> <span class="kw">sd</span>(RT))</a>
<a class="sourceLine" id="cb58-4" data-line-number="4"><span class="co">#&gt; # A tibble: 6,399 x 7</span></a>
<a class="sourceLine" id="cb58-5" data-line-number="5"><span class="co">#&gt; # Groups:   s [20]</span></a>
<a class="sourceLine" id="cb58-6" data-line-number="6"><span class="co">#&gt;   s     con         S     R        RT   mRT  RTsd</span></a>
<a class="sourceLine" id="cb58-7" data-line-number="7"><span class="co">#&gt;   &lt;fct&gt; &lt;chr&gt;       &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb58-8" data-line-number="8"><span class="co">#&gt; 1 1     congruent   blue  blue   1023  790.  775.</span></a>
<a class="sourceLine" id="cb58-9" data-line-number="9"><span class="co">#&gt; 2 1     incongruent blue  red     665  790.  775.</span></a>
<a class="sourceLine" id="cb58-10" data-line-number="10"><span class="co">#&gt; 3 1     congruent   red   red    1568  790.  775.</span></a>
<a class="sourceLine" id="cb58-11" data-line-number="11"><span class="co">#&gt; 4 1     congruent   blue  blue    955  790.  775.</span></a>
<a class="sourceLine" id="cb58-12" data-line-number="12"><span class="co">#&gt; 5 1     incongruent red   blue    792  790.  775.</span></a>
<a class="sourceLine" id="cb58-13" data-line-number="13"><span class="co">#&gt; 6 1     congruent   red   red     452  790.  775.</span></a>
<a class="sourceLine" id="cb58-14" data-line-number="14"><span class="co">#&gt; # … with 6,393 more rows</span></a>
<a class="sourceLine" id="cb58-15" data-line-number="15"></a>
<a class="sourceLine" id="cb58-16" data-line-number="16">newdf <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Step 2 is to make a cutoff 3 standard deviations above the mean for each participant</span></a>
<a class="sourceLine" id="cb58-17" data-line-number="17"><span class="st">  </span><span class="kw">group_by</span>(s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-18" data-line-number="18"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mRT =</span> <span class="kw">mean</span>(RT), <span class="dt">RTsd =</span> <span class="kw">sd</span>(RT)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-19" data-line-number="19"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cutoff =</span> mRT <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span>RTsd)</a>
<a class="sourceLine" id="cb58-20" data-line-number="20"><span class="co">#&gt; # A tibble: 6,399 x 8</span></a>
<a class="sourceLine" id="cb58-21" data-line-number="21"><span class="co">#&gt; # Groups:   s [20]</span></a>
<a class="sourceLine" id="cb58-22" data-line-number="22"><span class="co">#&gt;   s     con         S     R        RT   mRT  RTsd cutoff</span></a>
<a class="sourceLine" id="cb58-23" data-line-number="23"><span class="co">#&gt;   &lt;fct&gt; &lt;chr&gt;       &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb58-24" data-line-number="24"><span class="co">#&gt; 1 1     congruent   blue  blue   1023  790.  775.  3115.</span></a>
<a class="sourceLine" id="cb58-25" data-line-number="25"><span class="co">#&gt; 2 1     incongruent blue  red     665  790.  775.  3115.</span></a>
<a class="sourceLine" id="cb58-26" data-line-number="26"><span class="co">#&gt; 3 1     congruent   red   red    1568  790.  775.  3115.</span></a>
<a class="sourceLine" id="cb58-27" data-line-number="27"><span class="co">#&gt; 4 1     congruent   blue  blue    955  790.  775.  3115.</span></a>
<a class="sourceLine" id="cb58-28" data-line-number="28"><span class="co">#&gt; 5 1     incongruent red   blue    792  790.  775.  3115.</span></a>
<a class="sourceLine" id="cb58-29" data-line-number="29"><span class="co">#&gt; 6 1     congruent   red   red     452  790.  775.  3115.</span></a>
<a class="sourceLine" id="cb58-30" data-line-number="30"><span class="co">#&gt; # … with 6,393 more rows</span></a>
<a class="sourceLine" id="cb58-31" data-line-number="31"></a>
<a class="sourceLine" id="cb58-32" data-line-number="32"></a>
<a class="sourceLine" id="cb58-33" data-line-number="33">newdf <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Step 3 Let&#39;s clean up the columns we need and the ones we don&#39;t</span></a>
<a class="sourceLine" id="cb58-34" data-line-number="34"><span class="st">  </span><span class="kw">group_by</span>(s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-35" data-line-number="35"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mRT =</span> <span class="kw">mean</span>(RT), <span class="dt">RTsd =</span> <span class="kw">sd</span>(RT)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-36" data-line-number="36"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cutoff =</span> mRT <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span>RTsd) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-37" data-line-number="37"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>mRT, <span class="op">-</span>RTsd)</a>
<a class="sourceLine" id="cb58-38" data-line-number="38"><span class="co">#&gt; # A tibble: 6,399 x 6</span></a>
<a class="sourceLine" id="cb58-39" data-line-number="39"><span class="co">#&gt; # Groups:   s [20]</span></a>
<a class="sourceLine" id="cb58-40" data-line-number="40"><span class="co">#&gt;   s     con         S     R        RT cutoff</span></a>
<a class="sourceLine" id="cb58-41" data-line-number="41"><span class="co">#&gt;   &lt;fct&gt; &lt;chr&gt;       &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb58-42" data-line-number="42"><span class="co">#&gt; 1 1     congruent   blue  blue   1023  3115.</span></a>
<a class="sourceLine" id="cb58-43" data-line-number="43"><span class="co">#&gt; 2 1     incongruent blue  red     665  3115.</span></a>
<a class="sourceLine" id="cb58-44" data-line-number="44"><span class="co">#&gt; 3 1     congruent   red   red    1568  3115.</span></a>
<a class="sourceLine" id="cb58-45" data-line-number="45"><span class="co">#&gt; 4 1     congruent   blue  blue    955  3115.</span></a>
<a class="sourceLine" id="cb58-46" data-line-number="46"><span class="co">#&gt; 5 1     incongruent red   blue    792  3115.</span></a>
<a class="sourceLine" id="cb58-47" data-line-number="47"><span class="co">#&gt; 6 1     congruent   red   red     452  3115.</span></a>
<a class="sourceLine" id="cb58-48" data-line-number="48"><span class="co">#&gt; # … with 6,393 more rows</span></a>
<a class="sourceLine" id="cb58-49" data-line-number="49"></a>
<a class="sourceLine" id="cb58-50" data-line-number="50"></a>
<a class="sourceLine" id="cb58-51" data-line-number="51">newdf <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Step 4 Now let&#39;s filter those RTs above the cutoff and count them</span></a>
<a class="sourceLine" id="cb58-52" data-line-number="52"><span class="st">  </span><span class="kw">group_by</span>(s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-53" data-line-number="53"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mRT =</span> <span class="kw">mean</span>(RT), <span class="dt">RTsd =</span> <span class="kw">sd</span>(RT)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-54" data-line-number="54"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cutoff =</span> mRT <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span>RTsd) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-55" data-line-number="55"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>mRT, <span class="op">-</span>RTsd) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-56" data-line-number="56"><span class="st">  </span><span class="kw">filter</span>(RT <span class="op">&gt;</span><span class="st"> </span>cutoff) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-57" data-line-number="57"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#spread it out so its easy to read</span></a>
<a class="sourceLine" id="cb58-58" data-line-number="58"><span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> s, <span class="dt">value =</span> n)</a>
<a class="sourceLine" id="cb58-59" data-line-number="59"><span class="co">#&gt; # A tibble: 1 x 20</span></a>
<a class="sourceLine" id="cb58-60" data-line-number="60"><span class="co">#&gt;     `1`   `2`   `3`   `4`   `5`   `6`   `7`   `8`   `9`  `10`  `11`  `12`  `13`</span></a>
<a class="sourceLine" id="cb58-61" data-line-number="61"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb58-62" data-line-number="62"><span class="co">#&gt; 1     4     4     4     4     7     6     6     3     8     5     1     7     4</span></a>
<a class="sourceLine" id="cb58-63" data-line-number="63"><span class="co">#&gt; # … with 7 more variables: `14` &lt;int&gt;, `15` &lt;int&gt;, `16` &lt;int&gt;, `17` &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb58-64" data-line-number="64"><span class="co">#&gt; #   `18` &lt;int&gt;, `19` &lt;int&gt;, `20` &lt;int&gt;</span></a>
<a class="sourceLine" id="cb58-65" data-line-number="65"></a>
<a class="sourceLine" id="cb58-66" data-line-number="66"></a>
<a class="sourceLine" id="cb58-67" data-line-number="67">newdf <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#We can see the proportion of removed data</span></a>
<a class="sourceLine" id="cb58-68" data-line-number="68"><span class="st">  </span><span class="kw">group_by</span>(s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-69" data-line-number="69"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mRT =</span> <span class="kw">mean</span>(RT), <span class="dt">RTsd =</span> <span class="kw">sd</span>(RT)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-70" data-line-number="70"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cutoff =</span> mRT <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span>RTsd) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-71" data-line-number="71"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>mRT, <span class="op">-</span>RTsd) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-72" data-line-number="72"><span class="st">  </span><span class="kw">group_by</span>(RT <span class="op">&gt;</span><span class="st"> </span>cutoff <span class="op">|</span><span class="st"> </span>RT <span class="op">&lt;</span><span class="st"> </span><span class="dv">150</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-73" data-line-number="73"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-74" data-line-number="74"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop =</span> (n<span class="op">/</span><span class="kw">sum</span>(n))<span class="op">*</span><span class="dv">100</span>)</a>
<a class="sourceLine" id="cb58-75" data-line-number="75"><span class="co">#&gt; # A tibble: 2 x 3</span></a>
<a class="sourceLine" id="cb58-76" data-line-number="76"><span class="co">#&gt;   `RT &gt; cutoff | RT &lt; 150`     n  prop</span></a>
<a class="sourceLine" id="cb58-77" data-line-number="77"><span class="co">#&gt;   &lt;lgl&gt;                    &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb58-78" data-line-number="78"><span class="co">#&gt; 1 FALSE                     6289 98.3 </span></a>
<a class="sourceLine" id="cb58-79" data-line-number="79"><span class="co">#&gt; 2 TRUE                       110  1.72</span></a>
<a class="sourceLine" id="cb58-80" data-line-number="80"></a>
<a class="sourceLine" id="cb58-81" data-line-number="81">dfclean &lt;-<span class="st"> </span>newdf <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Save it out as dfclean</span></a>
<a class="sourceLine" id="cb58-82" data-line-number="82"><span class="st">  </span><span class="kw">group_by</span>(s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-83" data-line-number="83"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mRT =</span> <span class="kw">mean</span>(RT), <span class="dt">RTsd =</span> <span class="kw">sd</span>(RT)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-84" data-line-number="84"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cutoff =</span> mRT <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span>RTsd) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-85" data-line-number="85"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>mRT, <span class="op">-</span>RTsd) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-86" data-line-number="86"><span class="st">  </span><span class="kw">filter</span>(RT <span class="op">&lt;</span><span class="st"> </span>cutoff <span class="op">&amp;</span><span class="st"> </span>RT <span class="op">&gt;</span><span class="st"> </span><span class="dv">150</span>) <span class="co">#The RTs must be less than the cutoff AND greater than 150 ms</span></a></code></pre></div>
<p>Now we’re ready to do some descriptive statistics with the groups</p>
<p><strong>Challenge 4</strong>: What is the mean reaction time and standard deviation for congruent vs incongruent trials</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="co">#hint group_by(the factor you&#39;re interested in)</span></a>
<a class="sourceLine" id="cb59-2" data-line-number="2">dfclean <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(...) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-4" data-line-number="4"><span class="st">  </span><span class="kw">summarise</span>(...)</a></code></pre></div>
<p><strong>Challenge 5</strong>: Get the mean and sd of participant means for congruent vs incongruent trials and compare to the previous outcome.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">dfclean <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb60-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(...) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb60-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(...) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb60-4" data-line-number="4"><span class="st">  </span><span class="kw">group_by</span>(...) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb60-5" data-line-number="5"><span class="st">  </span><span class="kw">summarise</span>(..., ...)</a></code></pre></div>
<p>This is a quirk of repeated measures fully within designs, as the levels of analysis are nested. More on that later.
We can quickly visualize some of these things, like the distribution of responses in base R.
Note: Soon we will learn to visualize everything in ggplot2.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="kw">hist</span>(dfclean<span class="op">$</span>RT, <span class="dt">breaks =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb61-2" data-line-number="2"></a>
<a class="sourceLine" id="cb61-3" data-line-number="3"><span class="co">#Add a line for the mean</span></a>
<a class="sourceLine" id="cb61-4" data-line-number="4"><span class="kw">hist</span>(dfclean<span class="op">$</span>RT, <span class="dt">breaks =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb61-5" data-line-number="5"><span class="kw">abline</span>(<span class="dt">v =</span> <span class="kw">mean</span>(dfclean<span class="op">$</span>RT),</a>
<a class="sourceLine" id="cb61-6" data-line-number="6">       <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>,</a>
<a class="sourceLine" id="cb61-7" data-line-number="7">       <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb61-8" data-line-number="8"><span class="co">#add a line for the median</span></a>
<a class="sourceLine" id="cb61-9" data-line-number="9"><span class="kw">abline</span>(<span class="dt">v =</span> <span class="kw">median</span>(dfclean<span class="op">$</span>RT),</a>
<a class="sourceLine" id="cb61-10" data-line-number="10">       <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>,</a>
<a class="sourceLine" id="cb61-11" data-line-number="11">       <span class="dt">lwd =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb61-12" data-line-number="12"><span class="kw">lines</span>(<span class="kw">density</span>(dfclean<span class="op">$</span>RT),</a>
<a class="sourceLine" id="cb61-13" data-line-number="13">      <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="co"># thickness of line</span></a>
<a class="sourceLine" id="cb61-14" data-line-number="14">      <span class="dt">col =</span> <span class="st">&quot;chocolate3&quot;</span>)<span class="co"># density plot</span></a>
<a class="sourceLine" id="cb61-15" data-line-number="15"></a>
<a class="sourceLine" id="cb61-16" data-line-number="16"><span class="co">#Add a density plot,</span></a>
<a class="sourceLine" id="cb61-17" data-line-number="17"><span class="kw">hist</span>(dfclean<span class="op">$</span>RT, <span class="dt">breaks =</span> <span class="dv">100</span>,</a>
<a class="sourceLine" id="cb61-18" data-line-number="18">     <span class="dt">prob =</span> T)</a>
<a class="sourceLine" id="cb61-19" data-line-number="19"><span class="kw">lines</span>(<span class="kw">density</span>(dfclean<span class="op">$</span>RT),</a>
<a class="sourceLine" id="cb61-20" data-line-number="20">      <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="co"># thickness of line</span></a>
<a class="sourceLine" id="cb61-21" data-line-number="21">      <span class="dt">col =</span> <span class="st">&quot;chocolate3&quot;</span>)<span class="co"># density plot</span></a>
<a class="sourceLine" id="cb61-22" data-line-number="22"><span class="kw">abline</span>(<span class="dt">v =</span> <span class="kw">mean</span>(dfclean<span class="op">$</span>RT),</a>
<a class="sourceLine" id="cb61-23" data-line-number="23">       <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>,</a>
<a class="sourceLine" id="cb61-24" data-line-number="24">       <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb61-25" data-line-number="25"><span class="co">#add a line for the median</span></a>
<a class="sourceLine" id="cb61-26" data-line-number="26"><span class="kw">abline</span>(<span class="dt">v =</span> <span class="kw">median</span>(dfclean<span class="op">$</span>RT),</a>
<a class="sourceLine" id="cb61-27" data-line-number="27">       <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>,</a>
<a class="sourceLine" id="cb61-28" data-line-number="28">       <span class="dt">lwd =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb61-29" data-line-number="29"></a>
<a class="sourceLine" id="cb61-30" data-line-number="30"><span class="kw">legend</span>(<span class="dt">x =</span> <span class="st">&quot;topright&quot;</span>, <span class="co"># location of legend within plot area</span></a>
<a class="sourceLine" id="cb61-31" data-line-number="31">       <span class="kw">c</span>(<span class="st">&quot;Density plot&quot;</span>, <span class="st">&quot;Mean&quot;</span>, <span class="st">&quot;Median&quot;</span>),</a>
<a class="sourceLine" id="cb61-32" data-line-number="32">       <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;chocolate3&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>),</a>
<a class="sourceLine" id="cb61-33" data-line-number="33">       <span class="dt">lwd =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>))</a></code></pre></div>
<p><img src="03_DataTransformation_files/figure-html/baseviz-1.png" width="70%" style="display: block; margin: auto;" /><img src="03_DataTransformation_files/figure-html/baseviz-2.png" width="70%" style="display: block; margin: auto;" /></p>
<p>##Spreading, Gathering, Separating and Uniting
look at this <code>tibble(data.frame)</code></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1">stocks &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb62-2" data-line-number="2">  <span class="dt">year   =</span> <span class="kw">c</span>(<span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2016</span>),</a>
<a class="sourceLine" id="cb62-3" data-line-number="3">  <span class="dt">half  =</span> <span class="kw">c</span>(   <span class="dv">1</span>,    <span class="dv">2</span>,     <span class="dv">1</span>,    <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb62-4" data-line-number="4">  <span class="dt">return =</span> <span class="kw">c</span>(<span class="fl">1.88</span>, <span class="fl">0.59</span>, <span class="fl">0.92</span>, <span class="fl">0.17</span>)</a>
<a class="sourceLine" id="cb62-5" data-line-number="5">)</a></code></pre></div>
<p>Gather and spread are not perfect opposites</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1">stocks <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb63-2" data-line-number="2"><span class="st">  </span><span class="kw">spread</span>(year, return) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb63-3" data-line-number="3"><span class="st">  </span><span class="kw">gather</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;return&quot;</span>, <span class="st">`</span><span class="dt">2015</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">2016</span><span class="st">`</span>)</a>
<a class="sourceLine" id="cb63-4" data-line-number="4"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb63-5" data-line-number="5"><span class="co">#&gt;    half year  return</span></a>
<a class="sourceLine" id="cb63-6" data-line-number="6"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb63-7" data-line-number="7"><span class="co">#&gt; 1     1 2015    1.88</span></a>
<a class="sourceLine" id="cb63-8" data-line-number="8"><span class="co">#&gt; 2     2 2015    0.59</span></a>
<a class="sourceLine" id="cb63-9" data-line-number="9"><span class="co">#&gt; 3     1 2016    0.92</span></a>
<a class="sourceLine" id="cb63-10" data-line-number="10"><span class="co">#&gt; 4     2 2016    0.17</span></a></code></pre></div>
<p>You can make data.frames with space using the <code>tribble()</code> function</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1">people &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb64-2" data-line-number="2">  <span class="op">~</span>name,             <span class="op">~</span>key,    <span class="op">~</span>value,</a>
<a class="sourceLine" id="cb64-3" data-line-number="3">  <span class="co">#-----------------|--------|------</span></a>
<a class="sourceLine" id="cb64-4" data-line-number="4">  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;age&quot;</span>,       <span class="dv">45</span>,</a>
<a class="sourceLine" id="cb64-5" data-line-number="5">  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;height&quot;</span>,   <span class="dv">186</span>,</a>
<a class="sourceLine" id="cb64-6" data-line-number="6">  <span class="st">&quot;Jessica Cordero&quot;</span>, <span class="st">&quot;age&quot;</span>,       <span class="dv">37</span>,</a>
<a class="sourceLine" id="cb64-7" data-line-number="7">  <span class="st">&quot;Jessica Cordero&quot;</span>, <span class="st">&quot;height&quot;</span>,   <span class="dv">156</span></a>
<a class="sourceLine" id="cb64-8" data-line-number="8">)</a>
<a class="sourceLine" id="cb64-9" data-line-number="9"></a>
<a class="sourceLine" id="cb64-10" data-line-number="10">people</a>
<a class="sourceLine" id="cb64-11" data-line-number="11"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb64-12" data-line-number="12"><span class="co">#&gt;   name            key    value</span></a>
<a class="sourceLine" id="cb64-13" data-line-number="13"><span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb64-14" data-line-number="14"><span class="co">#&gt; 1 Phillip Woods   age       45</span></a>
<a class="sourceLine" id="cb64-15" data-line-number="15"><span class="co">#&gt; 2 Phillip Woods   height   186</span></a>
<a class="sourceLine" id="cb64-16" data-line-number="16"><span class="co">#&gt; 3 Jessica Cordero age       37</span></a>
<a class="sourceLine" id="cb64-17" data-line-number="17"><span class="co">#&gt; 4 Jessica Cordero height   156</span></a></code></pre></div>
<p><strong>Challenge 6</strong>: spread people so height and age have their own column</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1">newpeople &lt;-<span class="st"> </span>people <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="st">  </span><span class="kw">spread</span>(...)</a></code></pre></div>
<p><strong>Challenge 7</strong>: gather newpeople so that height and age are back together</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1">newpeople <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="st">  </span><span class="kw">gather</span>(...)</a></code></pre></div>
<p>You can separate or unite columns based upon a separator</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1">people <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb67-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(name, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;first&quot;</span>,<span class="st">&quot;last&quot;</span>))</a>
<a class="sourceLine" id="cb67-3" data-line-number="3"><span class="co">#&gt; # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb67-4" data-line-number="4"><span class="co">#&gt;   first   last    key    value</span></a>
<a class="sourceLine" id="cb67-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb67-6" data-line-number="6"><span class="co">#&gt; 1 Phillip Woods   age       45</span></a>
<a class="sourceLine" id="cb67-7" data-line-number="7"><span class="co">#&gt; 2 Phillip Woods   height   186</span></a>
<a class="sourceLine" id="cb67-8" data-line-number="8"><span class="co">#&gt; 3 Jessica Cordero age       37</span></a>
<a class="sourceLine" id="cb67-9" data-line-number="9"><span class="co">#&gt; 4 Jessica Cordero height   156</span></a></code></pre></div>
<p>How did it know? We usually have to specify the separator</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1">weirdpeople &lt;-<span class="st"> </span>people <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(name, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;befored&quot;</span>,<span class="st">&quot;afterd&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;d&quot;</span>)</a></code></pre></div>
<p>Notice that the separator disappears</p>
<p><strong>Challenge 8</strong>: Unite the two columns above with “d” as a separator</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1">weirdpeople <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb69-2" data-line-number="2"><span class="st">  </span><span class="kw">unite</span>(...)</a></code></pre></div>
<p>That’s a lot to take in, so we’ll do questions about this content or
queries about how to accomplish different data transformations.</p>
</div>
<div id="solutions-to-challenges" class="section level2">
<h2><span class="header-section-number">4.4</span> Solutions to Challenges</h2>
<p><strong>Challenge 1</strong>: Find and remove the rows with NAs, save it out to “newdf”</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1">ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb70-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">complete.cases</span>(.))</a>
<a class="sourceLine" id="cb70-3" data-line-number="3"></a>
<a class="sourceLine" id="cb70-4" data-line-number="4">ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb70-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(RT))</a>
<a class="sourceLine" id="cb70-6" data-line-number="6"></a>
<a class="sourceLine" id="cb70-7" data-line-number="7"><span class="kw">as_tibble</span>(ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb70-8" data-line-number="8"><span class="st">  </span><span class="kw">na.omit</span>())</a>
<a class="sourceLine" id="cb70-9" data-line-number="9"></a>
<a class="sourceLine" id="cb70-10" data-line-number="10">newdf &lt;-<span class="st"> </span>ccolor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb70-11" data-line-number="11"><span class="st">  </span><span class="kw">na.omit</span>()</a></code></pre></div>
<p><strong>Challenge 2</strong>: Filter out RT’s below 150 milliseconds and show how many you’ve filtered out.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1">df2 &lt;-<span class="st"> </span>newdf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(RT <span class="op">&gt;</span><span class="st"> </span><span class="dv">150</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb71-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">n</span>())</a></code></pre></div>
<p><strong>Challenge 3</strong>: Get the number of observations (rows) kept and removed with <code>group_by()</code></p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1">newdf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb72-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(RT <span class="op">&gt;</span><span class="st"> </span><span class="dv">150</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb72-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb72-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">freq =</span> (n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n))<span class="op">*</span><span class="dv">100</span>)</a></code></pre></div>
<p><strong>Challenge 4</strong>: What is the mean reaction time and standard deviation for congruent vs incongruent trials</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1"><span class="co">#hint group_by(the factor you&#39;re interested in)</span></a>
<a class="sourceLine" id="cb73-2" data-line-number="2">dfclean <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(con) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-4" data-line-number="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mRT =</span> <span class="kw">mean</span>(RT), <span class="dt">RTsd =</span> <span class="kw">sd</span>(RT))</a></code></pre></div>
<p><strong>Challenge 5</strong>: Get the mean and sd of participant means for congruent vs incongruent trials and compare to the previous outcome.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1">dfclean <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(s,con) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">gmRT =</span> <span class="kw">mean</span>(RT)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-4" data-line-number="4"><span class="st">  </span><span class="kw">group_by</span>(con) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-5" data-line-number="5"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mRT =</span> <span class="kw">mean</span>(gmRT), <span class="dt">RTsd =</span> <span class="kw">sd</span>(gmRT))</a></code></pre></div>
<p><strong>Challenge 6</strong>: spread people so height and age have their own column</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1">newpeople &lt;-<span class="st"> </span>people <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb75-2" data-line-number="2"><span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> key, <span class="dt">value =</span> value)</a></code></pre></div>
<p><strong>Challenge 7</strong>: gather newpeople so that height and age are back together</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1">newpeople <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb76-2" data-line-number="2"><span class="st">  </span><span class="kw">gather</span>(<span class="st">&quot;key&quot;</span>,<span class="st">&quot;value&quot;</span>, age<span class="op">:</span>height)</a></code></pre></div>
<p><strong>Challenge 8</strong>: Unite the two columns above with “d” as a separator</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1"></a>
<a class="sourceLine" id="cb77-2" data-line-number="2">weirdpeople <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb77-3" data-line-number="3"><span class="st">  </span><span class="kw">unite</span>(new, befored,afterd,<span class="dt">sep =</span> <span class="st">&quot;d&quot;</span>)</a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="importing-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-transformation-day-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://spencercastro.com/03_DataTransformation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
